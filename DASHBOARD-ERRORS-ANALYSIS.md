# ุชุญููู ุดุงูู ููุดุงูู ููุญุฉ ุงููุนูููุงุช - NNH AI Studio

ุจุนุฏ ูุญุต ุดุงูู ููุฑูุฒ ุงูุจุฑูุฌูุ ุญุฏุฏูุง ุงููุดุงูู ุงูุฑุฆูุณูุฉ ุงูุชู ุชุณุจุจ ุงูุฃุฎุทุงุก ูู ููุญุฉ ุงููุนูููุงุช ููุงุฌูุงุช ุงููุณุชุฎุฏู.

## ๐ ุงููุดุงูู ุงูุฑุฆูุณูุฉ

### 1. ุฎุทุฃ `Cannot read properties of undefined (reading 'totalLocations')`

- **ุงููููุน**: ุนุฏุฉ ููููุงุช ุชุญุงูู ุงููุตูู ุฅูู `totalLocations` ูู ูุงุฆู ุบูุฑ ูุนุฑู
- **ุงูุณุจุจ**: ุนุฏู ุงูุชุญูู ูู ุงูุจูุงูุงุช ูุจู ุงููุตูู ุฅูู ุฎุตุงุฆุตูุง
- **ุฎุทูุฑุฉ**: ูุฑุชูุนุฉ - ูุคุฏู ุฅูู ุตูุญุงุช ูุงุฑุบุฉ ูุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุฆุฉ

### 2. ุฎุทุฃ `Cannot read properties of undefined (reading 'reviewTrendPct')`

- **ุงููููุน**: `ReviewsPageClient.tsx` ุณุทุฑ 358 - `const reviewTrendPct = dashboardSnapshot?.kpis.reviewTrendPct ?? 0;`
- **ุงูุณุจุจ**: ุงุณุชุฎุฏุงู `?` ููุชุญูู ูู `dashboardSnapshot` ูููู ููุณ `kpis`
- **ุฎุทูุฑุฉ**: ูุฑุชูุนุฉ - ูุณุจุจ ุชุนุทู ุตูุญุฉ ุงููุฑุงุฌุนุงุช ุจุงููุงูู

### 3. ุฎุทุฃ `TypeError: eY.sanitize is not a function`

- **ุงููููุน**: ูุฎุชูู ุฃูุญุงุก ุงูุชุทุจูู
- **ุงูุณุจุจ**: ูุดููุฉ ูู ุงุณุชุฎุฏุงู ููุชุจุฉ ุงูุชุนููู (DOMPurify ุฃู ูุง ุดุงุจู)
- **ุฎุทูุฑุฉ**: ูุชูุณุทุฉ - ูุฏ ูุคุซุฑ ุนูู ูุนุงูุฌุฉ ุงููุญุชูู ุงูููุฏู ูู ุงููุณุชุฎุฏู

### 4. ุฎุทุฃ 404 ููุฑุงุจุท `/en/dashboard`

- **ุงููููุน**: ุฑูุงุจุท ุงูุชููู
- **ุงูุณุจุจ**: ุชุบููุฑ ูู ูุณุงุฑุงุช ุงูุชุทุจูู ุฏูู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจุท
- **ุฎุทูุฑุฉ**: ููุฎูุถุฉ - ูููู ูููุณุชุฎุฏููู ุงุณุชุฎุฏุงู ุฑูุงุจุท ุฃุฎุฑู ููุชููู

## ๐ ูุณุงุฑ ุงูุจูุงูุงุช ูุชุญุฏูุฏ ููุงุท ุงููุดู

1. **ูุตุฏุฑ ุงูุจูุงูุงุช**:
   - ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช `/api/dashboard/overview` ุชุฑุฌุน ูุงุฆู `DashboardSnapshot`
   - ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช `/api/dashboard/stats` ุชุฑุฌุน ุฅุญุตุงุกุงุช ุนุงูุฉ
   - ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช `/api/reviews/stats` ุชุฑุฌุน ุฅุญุตุงุกุงุช ุงููุฑุงุฌุนุงุช

2. **ูุนุงูุฌุฉ ุงูุจูุงูุงุช**:
   - `useDashboardSnapshot()` ูู `hooks/use-dashboard-cache.ts` ูุฌูุจ ุงูุจูุงูุงุช ูู API
   - ุงูุจูุงูุงุช ูุฏ ุชููู `null` ุฃู `undefined` ูู ุญุงูุงุช ูุฎุชููุฉ ูุจู ุงูุชูุงู ุงูุชุญููู

3. **ุนุฑุถ ุงูุจูุงูุงุช**:
   - ููููุงุช ูุชุนุฏุฏุฉ ุชุณุชุฎุฏู ุงูุจูุงูุงุช ุงููุฌููุจุฉ ุฏูู ูุญูุตุงุช ูุงููุฉ
   - ุงููููู `AIAnalyticsCard` ูู `ReviewsPageClient.tsx` ูุญุงูู ุงููุตูู ุฅูู `reviewTrendPct` ูุจุงุดุฑุฉ

## ๐๏ธ ุฅุณุชุฑุงุชูุฌูุฉ ุงูุฅุตูุงุญ ุงูุดุงููุฉ

### 1. ุชุญุณูู ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช ุงูุบุงุฆุจุฉ ูู ุงูููููุงุช

#### ุฃ. ุฅุตูุงุญ ุฎุทุฃ reviewTrendPct ูู ReviewsPageClient.tsx

```typescript
// ุงูุญุงูู (ูุน ุงูุฎุทุฃ)
const reviewTrendPct = dashboardSnapshot?.kpis.reviewTrendPct ?? 0;

// ุงูุฅุตูุงุญ
const reviewTrendPct = dashboardSnapshot?.kpis?.reviewTrendPct ?? 0;
```

#### ุจ. ุชุทุจูู ุฏูุงู ุญูุงูุฉ ุงูุจูุงูุงุช ูู ุฌููุน ุงูููููุงุช

- ุฅูุดุงุก ุฏุงูุฉ `safeGet()` ุนุงูุฉ ูููุตูู ุงูุขูู ููุฎุตุงุฆุต ุงููุชุฏุงุฎูุฉ
- ุงุณุชุฎุฏุงู ููุท `?? defaultValue` ุจุดูู ูุชุณู

### 2. ุชุนุฒูุฒ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (API)

#### ุฃ. ุถูุงู ูููู ูุชุณู ููุจูุงูุงุช ุงูููุฑุฌุนุฉ

- ุฅุถุงูุฉ ูุญูุตุงุช ููุจูุงูุงุช ุงููุงุฑุบุฉ ูุจู ุงูุฅุฑุฌุงุน
- ุชูููุฑ ููู ุงูุชุฑุงุถูุฉ ูุฌููุน ุงูุฎุตุงุฆุต ุงููุทููุจุฉ

#### ุจ. ุชุญุณูู ูุนุงูุฌุฉ ุงูุฎุทุฃ

- ุฅุฑุฌุงุน ููุงูู ุจูุงูุงุช ูุงููุฉ ุญุชู ูู ุญุงูุฉ ุงูุฃุฎุทุงุก
- ุชุณุฌูู ุงูุฃุฎุทุงุก ุจุดูู ููุธู ููุชุดุฎูุต ุงููุงุญู

### 3. ุชุทุจูู ErrorBoundary ูู ุงูููููุงุช ุงูุญุฑุฌุฉ

- ุชุทุจูู `ErrorBoundary` ูู ุฌููุน ุตูุญุงุช ุงูุชุจููุจุงุช
- ุชุฎุตูุต ูุญุชูู ุงูุงูููุงุฑ ููู ูููู

### 4. ูุนุงูุฌุฉ ูุดููุฉ ุงูุชุนููู (eY.sanitize)

- ุงูุชุญูู ูู ุงุณุชุฎุฏุงู ููุชุจุฉ DOMPurify
- ุถูุงู ุงุณุชูุฑุงุฏูุง ุจุดูู ุตุญูุญ ูู ุฌููุน ุงููููุงุช ุงูุชู ุชุณุชุฎุฏููุง

## ๐ ุงููููุงุช ุงูุชู ุชุญุชุงุฌ ุฅูู ุชุญุฏูุซ

### 1. ูููุงุช ุงูููููุงุช

- `components/reviews/ReviewsPageClient.tsx` - ุฅุตูุงุญ ุงููุตูู ุฅูู `reviewTrendPct`
- `components/reviews/stats-cards.tsx` - ุฅุถุงูุฉ ูุญูุตุงุช ููุจูุงูุงุช ุงูุบุงุฆุจุฉ
- `components/command-center/stats-card.tsx` - ุชุญุฏูุซ ููุนูู ุจุดูู ุขูู ูุน ุงูุจูุงูุงุช ุงููุงุฑุบุฉ

### 2. ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช

- `app/api/dashboard/overview/route.ts` - ุถูุงู ุฅุฑุฌุงุน ูููู ุจูุงูุงุช ูุชุณู
- `app/api/dashboard/stats/route.ts` - ุฅุถุงูุฉ ูุญูุตุงุช ูุจู ุฅุฑุฌุงุน ุงูุจูุงูุงุช
- `app/api/reviews/stats/route.ts` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุดุงุฐุฉ

### 3. ูุธุงุฆู ุงูุฅุณุชุฏุนุงุก (Hooks)

- `hooks/use-dashboard-cache.ts` - ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุชุญูู ูู ุงูุจูุงูุงุช
- `hooks/features/use-business-stats.ts` - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฎุทุฃ ูุชูููุฑ ููู ุงูุชุฑุงุถูุฉ

## ๐ ุฃููููุฉ ุงูุฅุตูุงุญุงุช

1. **ุฅุตูุงุญุงุช ูุณุชุนุฌูุฉ (ุฃุนูู ุฃููููุฉ)**:
   - ุฅุตูุงุญ `reviewTrendPct` ูู `ReviewsPageClient.tsx`
   - ุฅุถุงูุฉ `ErrorBoundary` ุฅูู ุฌููุน ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ
   - ุชุตุญูุญ ุงุณุชุฎุฏุงู ููุชุจุฉ ุงูุชุนููู

2. **ุฅุตูุงุญุงุช ูุชูุณุทุฉ ุงูุฃููููุฉ**:
   - ุชุญุณูู ุฌููุน ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ูุฅุฑุฌุงุน ุจูุงูุงุช ุขููุฉ
   - ุชุทุจูู ุฏูุงู ุงูุญูุงูุฉ ุนูู ุฌููุน ุงูููููุงุช ุงูุชู ุชุนุฑุถ ุงูุจูุงูุงุช

3. **ุชุญุณููุงุช ุนุงูุฉ**:
   - ุชุญุฏูุซ ุงูุฑูุงุจุท ุงูููุณูุฑุฉ ูุฅุตูุงุญ ุฃุฎุทุงุก 404
   - ุชุญุณูู ุงูุชุณุฌูู ูุชุชุจุน ุงูุฃุฎุทุงุก

ุจุชุทุจูู ูุฐู ุงูุฅุตูุงุญุงุชุ ุณูุชู ุญู ุฌููุน ุงููุดุงูู ุงูุชู ุชุคุซุฑ ุญุงููุงู ุนูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ูุถูุงู ุนูู ุฌููุน ุงูุชุจููุจุงุช ุจุดูู ุตุญูุญ.
