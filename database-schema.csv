separator,schema,table_name,column_count,total_size,table_size,index_count,table_comment
--- TABLE ---,public,activity_logs,7,504 kB,288 kB,3,
--- TABLE ---,public,ai_requests,13,128 kB,8192 bytes,7,Tracks AI API requests for analytics and billing
--- TABLE ---,public,ai_settings,8,104 kB,8192 bytes,6,AI provider settings for users
--- TABLE ---,public,audit_logs,8,224 kB,104 kB,2,Application audit log for key security-sensitive actions.
--- TABLE ---,public,auto_reply_settings,22,40 kB,0 bytes,4,
--- TABLE ---,public,business_profile_history,8,1056 kB,344 kB,4,
--- TABLE ---,public,error_logs,24,88 kB,0 bytes,9,Centralized error logging for client and server-side errors
--- TABLE ---,public,gmb_accounts,18,312 kB,32 kB,13,
--- TABLE ---,public,gmb_locations,46,2928 kB,592 kB,38,Real-time enabled: Updates broadcast to subscribed clients
--- TABLE ---,public,gmb_media,13,4008 kB,1664 kB,15,Stores media items (photos/videos) from Google My Business locations
--- TABLE ---,public,gmb_metrics,10,96 kB,16 kB,3,
--- TABLE ---,public,gmb_performance_metrics,12,864 kB,192 kB,14,Stores daily performance metrics from Business Profile Performance API
--- TABLE ---,public,gmb_posts,24,120 kB,0 bytes,14,Stores GMB posts for composing and scheduling Business Profile posts
--- TABLE ---,public,gmb_questions,37,552 kB,48 kB,28,Real-time enabled: Changes broadcast to subscribed clients
--- TABLE ---,public,gmb_reviews,51,5784 kB,2312 kB,37,Stores Google My Business reviews with AI analysis and reply management
--- TABLE ---,public,gmb_search_keywords,12,6288 kB,1648 kB,13,Stores search keyword impressions from Business Profile Performance API
--- TABLE ---,public,gmb_sync_logs,12,624 kB,392 kB,3,
--- TABLE ---,public,notifications,18,64 kB,0 bytes,7,
--- TABLE ---,public,oauth_states,6,160 kB,24 kB,6,Stores temporary OAuth state parameters for secure OAuth flow
--- TABLE ---,public,performance_metrics,7,40 kB,0 bytes,4,
--- TABLE ---,public,profiles,10,168 kB,32 kB,6,
--- TABLE ---,public,rate_limit_requests,7,48 kB,0 bytes,5,
--- TABLE ---,public,sync_status,8,112 kB,16 kB,4,"Tracks GMB sync runs (status, progress, timings) for each user/account"
--- TABLE ---,public,weekly_task_recommendations,17,112 kB,8192 bytes,6,
separator,table_name,ordinal_position,column_name,data_type,full_type,is_nullable,column_default,character_maximum_length,numeric_precision,numeric_scale,datetime_precision,underlying_type,column_comment
--- COLUMN ---,activity_logs,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,activity_logs,2,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,activity_logs,3,activity_type,text,text,NO,,,,,,text,
--- COLUMN ---,activity_logs,4,activity_message,text,text,NO,,,,,,text,
--- COLUMN ---,activity_logs,5,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,activity_logs,6,actionable,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,activity_logs,7,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,ai_requests,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,ai_requests,2,user_id,uuid,uuid,NO,,,,,,uuid,Foreign key to auth.users(id)
--- COLUMN ---,ai_requests,3,location_id,uuid,uuid,YES,,,,,,uuid,"Foreign key to gmb_locations(id), nullable"
--- COLUMN ---,ai_requests,4,provider,text,text,NO,,,,,,text,
--- COLUMN ---,ai_requests,5,model,text,text,NO,,,,,,text,
--- COLUMN ---,ai_requests,6,feature,text,text,NO,,,,,,text,
--- COLUMN ---,ai_requests,7,prompt_tokens,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,ai_requests,8,completion_tokens,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,ai_requests,9,total_tokens,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,ai_requests,10,cost_usd,numeric,"numeric(10,6)",YES,0,,10,6,,numeric,
--- COLUMN ---,ai_requests,11,latency_ms,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,ai_requests,12,success,boolean,boolean,YES,true,,,,,bool,
--- COLUMN ---,ai_requests,13,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,ai_settings,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,ai_settings,2,user_id,uuid,uuid,NO,,,,,,uuid,Foreign key to auth.users(id)
--- COLUMN ---,ai_settings,3,provider,text,text,NO,,,,,,text,
--- COLUMN ---,ai_settings,4,api_key,text,text,NO,,,,,,text,
--- COLUMN ---,ai_settings,5,is_active,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,ai_settings,6,priority,integer,"integer(32,0)",YES,999,,32,0,,int4,Lower number = higher priority when multiple providers are active
--- COLUMN ---,ai_settings,7,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,ai_settings,8,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,audit_logs,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,audit_logs,2,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,audit_logs,3,action,character varying,character varying(100),NO,,100,,,,varchar,
--- COLUMN ---,audit_logs,4,resource_type,character varying,character varying(50),YES,,50,,,,varchar,
--- COLUMN ---,audit_logs,5,resource_id,character varying,character varying(255),YES,,255,,,,varchar,
--- COLUMN ---,audit_logs,6,metadata,jsonb,jsonb,YES,,,,,,jsonb,
--- COLUMN ---,audit_logs,7,ip_address,text,text,YES,,,,,,text,
--- COLUMN ---,audit_logs,8,created_at,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,auto_reply_settings,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,auto_reply_settings,2,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,auto_reply_settings,3,location_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,auto_reply_settings,4,enabled,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,auto_reply_settings,5,min_rating,integer,"integer(32,0)",YES,1,,32,0,,int4,
--- COLUMN ---,auto_reply_settings,6,max_rating,integer,"integer(32,0)",YES,5,,32,0,,int4,
--- COLUMN ---,auto_reply_settings,7,reply_template,text,text,YES,,,,,,text,
--- COLUMN ---,auto_reply_settings,8,use_ai,boolean,boolean,YES,true,,,,,bool,
--- COLUMN ---,auto_reply_settings,9,ai_tone,text,text,YES,'professional'::text,,,,,text,
--- COLUMN ---,auto_reply_settings,10,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,auto_reply_settings,11,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,auto_reply_settings,12,require_approval,boolean,boolean,YES,false,,,,,bool,Require manual approval before sending (default: false for instant replies)
--- COLUMN ---,auto_reply_settings,13,auto_reply_1_star,boolean,boolean,YES,true,,,,,bool,Auto-reply to 1-star reviews
--- COLUMN ---,auto_reply_settings,14,auto_reply_2_star,boolean,boolean,YES,true,,,,,bool,Auto-reply to 2-star reviews
--- COLUMN ---,auto_reply_settings,15,auto_reply_3_star,boolean,boolean,YES,true,,,,,bool,Auto-reply to 3-star reviews
--- COLUMN ---,auto_reply_settings,16,auto_reply_4_star,boolean,boolean,YES,true,,,,,bool,Auto-reply to 4-star reviews
--- COLUMN ---,auto_reply_settings,17,auto_reply_5_star,boolean,boolean,YES,true,,,,,bool,Auto-reply to 5-star reviews
--- COLUMN ---,auto_reply_settings,18,response_style,text,text,YES,'friendly'::text,,,,,text,
--- COLUMN ---,auto_reply_settings,19,response_delay_minutes,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,auto_reply_settings,20,reply_to_positive,boolean,boolean,YES,true,,,,,bool,
--- COLUMN ---,auto_reply_settings,21,reply_to_neutral,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,auto_reply_settings,22,reply_to_negative,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,business_profile_history,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,business_profile_history,2,location_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,business_profile_history,3,location_name,text,text,NO,,,,,,text,
--- COLUMN ---,business_profile_history,4,operation_type,text,text,NO,,,,,,text,
--- COLUMN ---,business_profile_history,5,data,jsonb,jsonb,NO,,,,,,jsonb,
--- COLUMN ---,business_profile_history,6,metadata,jsonb,jsonb,YES,,,,,,jsonb,
--- COLUMN ---,business_profile_history,7,created_by,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,business_profile_history,8,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,error_logs,1,id,text,text,NO,(gen_random_uuid())::text,,,,,text,
--- COLUMN ---,error_logs,2,message,text,text,NO,,,,,,text,
--- COLUMN ---,error_logs,3,stack,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,4,level,text,text,YES,'error'::text,,,,,text,
--- COLUMN ---,error_logs,5,timestamp,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,error_logs,6,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,error_logs,7,context,jsonb,jsonb,YES,,,,,,jsonb,
--- COLUMN ---,error_logs,8,user_agent,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,9,url,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,10,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,error_logs,11,session_id,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,12,ip_address,inet,inet,YES,,,,,,inet,
--- COLUMN ---,error_logs,13,browser_name,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,14,browser_version,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,15,os_name,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,16,os_version,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,17,device_type,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,18,error_type,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,19,error_code,text,text,YES,,,,,,text,
--- COLUMN ---,error_logs,20,severity,integer,"integer(32,0)",YES,3,,32,0,,int4,
--- COLUMN ---,error_logs,21,resolved,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,error_logs,22,resolved_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,error_logs,23,resolved_by,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,error_logs,24,resolution_notes,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_accounts,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_accounts,2,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,gmb_accounts,3,account_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_accounts,4,email,text,text,YES,,,,,,text,Email address of the Google account
--- COLUMN ---,gmb_accounts,5,google_account_id,text,text,YES,,,,,,text,Google user ID from OAuth
--- COLUMN ---,gmb_accounts,6,access_token,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_accounts,7,refresh_token,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_accounts,8,token_expires_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_accounts,10,last_sync,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_accounts,11,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_accounts,13,is_active,boolean,boolean,YES,true,,,,,bool,
--- COLUMN ---,gmb_accounts,14,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_accounts,15,account_id,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_accounts,16,settings,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_accounts,17,disconnected_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,Timestamp when account was disconnected
--- COLUMN ---,gmb_accounts,18,data_retention_days,integer,"integer(32,0)",YES,30,,32,0,,int4,Number of days to retain archived data before permanent deletion
--- COLUMN ---,gmb_accounts,19,delete_on_disconnect,boolean,boolean,YES,false,,,,,bool,"If true, delete all data immediately on disconnect"
--- COLUMN ---,gmb_accounts,20,notification_settings,jsonb,jsonb,YES,,,,,,jsonb,"Google Business Profile notification settings (pubsubTopic, notificationTypes)"
--- COLUMN ---,gmb_locations,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_locations,2,gmb_account_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_locations,3,location_name,text,text,NO,,,,,,text,
--- COLUMN ---,gmb_locations,4,location_id,text,text,NO,,,,,,text,
--- COLUMN ---,gmb_locations,5,address,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations,6,phone,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations,7,category,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations,8,website,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations,9,is_active,boolean,boolean,YES,true,,,,,bool,
--- COLUMN ---,gmb_locations,10,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_locations,11,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_locations,12,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_locations,13,business_hours,jsonb,jsonb,YES,"'{""friday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""monday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""sunday"": {""open"": ""00:00"", ""close"": ""00:00"", ""closed"": true}, ""tuesday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""saturday"": {""open"": ""10:00"", ""close"": ""16:00"", ""closed"": false}, ""thursday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""wednesday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}}'::jsonb",,,,,jsonb,Business hours in JSONB format
--- COLUMN ---,gmb_locations,14,user_id,uuid,uuid,YES,,,,,,uuid,Foreign key to auth.users table - owner of this location
--- COLUMN ---,gmb_locations,15,rating,numeric,"numeric(2,1)",YES,,,2,1,,numeric,Average rating for the location (0.0 to 5.0)
--- COLUMN ---,gmb_locations,16,normalized_location_id,text,text,YES,,,,,,text,Normalized location ID extracted from full resource name. Used to prevent duplicates.
--- COLUMN ---,gmb_locations,17,latitude,double precision,,YES,,,53,,,float8,Latitude coordinate of the location (from Google API latlng)
--- COLUMN ---,gmb_locations,18,longitude,double precision,,YES,,,53,,,float8,Longitude coordinate of the location (from Google API latlng)
--- COLUMN ---,gmb_locations,19,type,text,text,YES,,,,,,text,Location type
--- COLUMN ---,gmb_locations,20,review_count,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,gmb_locations,21,response_rate,numeric,"numeric(5,2)",YES,0,,5,2,,numeric,Response rate percentage (0.0-100.0)
--- COLUMN ---,gmb_locations,22,is_syncing,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_locations,23,ai_insights,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations,24,status,text,text,YES,'pending'::text,,,,,text,"Location status (verified, pending, suspended, etc.)"
--- COLUMN ---,gmb_locations,25,latlng,text,text,YES,,,,,,text,Latitude/longitude as text (alternative format)
--- COLUMN ---,gmb_locations,26,regularhours,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,Regular business hours in JSONB format
--- COLUMN ---,gmb_locations,27,account_id,text,text,YES,,,,,,text,Account identifier (legacy/alternative)
--- COLUMN ---,gmb_locations,28,location_id_external,text,text,YES,,,,,,text,External location identifier
--- COLUMN ---,gmb_locations,29,health_score,integer,"integer(32,0)",YES,0,,32,0,,int4,Health score for the location
--- COLUMN ---,gmb_locations,30,last_synced_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,Last synchronization timestamp
--- COLUMN ---,gmb_locations,31,is_archived,boolean,boolean,YES,false,,,,,bool,Location is archived (disconnected but data retained)
--- COLUMN ---,gmb_locations,32,archived_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_locations,33,cover_photo_url,text,text,YES,,,,,,text,URL to the cover photo for the business profile
--- COLUMN ---,gmb_locations,34,description,text,text,YES,,,,,,text,Business description/profile description from Google My Business
--- COLUMN ---,gmb_locations,35,short_description,text,text,YES,,,,,,text,Short business description
--- COLUMN ---,gmb_locations,36,additional_categories,ARRAY,ARRAY,YES,"COALESCE(ARRAY[]::text[], ARRAY[]::text[])",,,,,_text,Additional business categories (array of category names)
--- COLUMN ---,gmb_locations,37,from_the_business,ARRAY,ARRAY,YES,"COALESCE(ARRAY[]::text[], ARRAY[]::text[])",,,,,_text,Information from the business (array of text)
--- COLUMN ---,gmb_locations,38,opening_date,date,date,YES,,,,,0,date,Date when the business opened
--- COLUMN ---,gmb_locations,39,service_area_enabled,boolean,boolean,YES,false,,,,,bool,Whether service area is enabled for this location
--- COLUMN ---,gmb_locations,40,menu_url,text,text,YES,,,,,,text,URL to the business menu
--- COLUMN ---,gmb_locations,41,booking_url,text,text,YES,,,,,,text,URL for booking/reservations
--- COLUMN ---,gmb_locations,42,order_url,text,text,YES,,,,,,text,URL for online ordering
--- COLUMN ---,gmb_locations,43,appointment_url,text,text,YES,,,,,,text,URL for appointments
--- COLUMN ---,gmb_locations,44,profile_completeness,integer,"integer(32,0)",YES,0,,32,0,,int4,Profile completeness score (0-100)
--- COLUMN ---,gmb_locations,45,calculated_response_rate,numeric,"numeric(5,2)",YES,,,5,2,,numeric,
--- COLUMN ---,gmb_locations,46,logo_url,text,text,YES,,,,,,text,Direct URL to location logo from GMB (mediaFormat: LOGO)
--- COLUMN ---,gmb_locations_with_rating,1,id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,gmb_locations_with_rating,2,gmb_account_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,gmb_locations_with_rating,3,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,gmb_locations_with_rating,4,location_id,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations_with_rating,5,location_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations_with_rating,6,address,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations_with_rating,7,phone,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations_with_rating,8,website,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations_with_rating,9,category,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations_with_rating,10,is_active,boolean,boolean,YES,,,,,,bool,
--- COLUMN ---,gmb_locations_with_rating,11,metadata,jsonb,jsonb,YES,,,,,,jsonb,
--- COLUMN ---,gmb_locations_with_rating,12,business_hours,jsonb,jsonb,YES,,,,,,jsonb,
--- COLUMN ---,gmb_locations_with_rating,13,created_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_locations_with_rating,14,updated_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_locations_with_rating,15,stored_rating,numeric,"numeric(2,1)",YES,,,2,1,,numeric,
--- COLUMN ---,gmb_locations_with_rating,16,normalized_location_id,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_locations_with_rating,17,calculated_rating,numeric,"numeric(3,2)",YES,,,3,2,,numeric,
--- COLUMN ---,gmb_locations_with_rating,18,reviews_count,integer,"integer(32,0)",YES,,,32,0,,int4,
--- COLUMN ---,gmb_locations_with_rating,19,last_review_date,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_media,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_media,2,gmb_account_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_media,3,location_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_media,4,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_media,5,external_media_id,text,text,NO,,,,,,text,Unique identifier from Google My Business API
--- COLUMN ---,gmb_media,6,type,text,text,YES,,,,,,text,"Type of media: PHOTO, VIDEO, etc."
--- COLUMN ---,gmb_media,7,url,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_media,8,thumbnail_url,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_media,9,created_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_media,10,updated_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_media,11,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,Full media object from Google API for reference
--- COLUMN ---,gmb_media,12,synced_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_media,13,category,text,text,YES,,,,,,text,"Media category from GMB: LOGO, COVER, PROFILE, ADDITIONAL, INTERIOR, EXTERIOR, PRODUCT, FOOD_AND_DRINK, MENU, COMMON_AREA, ROOMS, TEAMS, AT_WORK"
--- COLUMN ---,gmb_metrics,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_metrics,2,gmb_account_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_metrics,3,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_metrics,4,phase,text,text,NO,,,,,,text,
--- COLUMN ---,gmb_metrics,5,runs_count,integer,"integer(32,0)",NO,0,,32,0,,int4,
--- COLUMN ---,gmb_metrics,6,total_duration_ms,bigint,"bigint(64,0)",NO,0,,64,0,,int8,
--- COLUMN ---,gmb_metrics,7,total_items_count,bigint,"bigint(64,0)",NO,0,,64,0,,int8,
--- COLUMN ---,gmb_metrics,8,avg_duration_ms,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,gmb_metrics,9,updated_at,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_metrics,10,created_at,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_performance_metrics,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_performance_metrics,2,gmb_account_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_performance_metrics,3,location_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_performance_metrics,4,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_performance_metrics,5,metric_type,text,text,NO,,,,,,text,"Type of metric (e.g., BUSINESS_IMPRESSIONS_DESKTOP_MAPS, CALL_CLICKS, WEBSITE_CLICKS)"
--- COLUMN ---,gmb_performance_metrics,6,metric_date,date,date,NO,,,,,0,date,
--- COLUMN ---,gmb_performance_metrics,7,metric_value,bigint,"bigint(64,0)",NO,0,,64,0,,int8,The actual metric value for the given date
--- COLUMN ---,gmb_performance_metrics,8,sub_entity_type,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_performance_metrics,9,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_performance_metrics,10,synced_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_performance_metrics,11,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_performance_metrics,12,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_posts,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_posts,2,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_posts,3,location_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_posts,4,title,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_posts,5,content,text,text,NO,,,,,,text,
--- COLUMN ---,gmb_posts,6,media_url,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_posts,7,call_to_action,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_posts,8,call_to_action_url,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_posts,9,status,text,text,NO,'draft'::text,,,,,text,
--- COLUMN ---,gmb_posts,10,scheduled_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_posts,11,published_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_posts,12,provider_post_id,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_posts,13,error_message,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_posts,14,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_posts,15,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_posts,16,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_posts,17,post_type,text,text,YES,'whats_new'::text,,,,,text,
--- COLUMN ---,gmb_posts,18,post_id,text,text,YES,,,,,,text,Google My Business post ID from API
--- COLUMN ---,gmb_posts,19,cta_type,text,text,YES,,,,,,text,"Call-to-action button type (BOOK, ORDER, etc.)"
--- COLUMN ---,gmb_posts,20,cta_url,text,text,YES,,,,,,text,URL for call-to-action button
--- COLUMN ---,gmb_posts,21,start_date,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_posts,22,end_date,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_posts,23,is_archived,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_posts,24,archived_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_questions,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_questions,2,gmb_account_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_questions,3,location_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_questions,4,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_questions,5,external_question_id,text,text,YES,,,,,,text,External question ID from Google if available
--- COLUMN ---,gmb_questions,6,question_text,text,text,NO,,,,,,text,
--- COLUMN ---,gmb_questions,7,author_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,8,author_type,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,9,answer_text,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,10,answered_by,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,11,answered_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_questions,12,answer_status,text,text,YES,'pending'::text,,,,,text,
--- COLUMN ---,gmb_questions,13,ai_suggested_answer,text,text,YES,,,,,,text,AI-generated suggested answer for the question
--- COLUMN ---,gmb_questions,14,ai_confidence_score,numeric,"numeric(3,2)",YES,,,3,2,,numeric,Confidence score (0-1) for AI-generated answer
--- COLUMN ---,gmb_questions,15,upvote_count,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,gmb_questions,16,is_featured,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_questions,17,is_hidden,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_questions,18,language_code,text,text,YES,'en'::text,,,,,text,
--- COLUMN ---,gmb_questions,19,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_questions,20,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_questions,21,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_questions,22,synced_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_questions,23,author_profile_photo_url,text,text,YES,,,,,,text,URL to question author profile photo
--- COLUMN ---,gmb_questions,24,question_id,text,text,YES,,,,,,text,Google My Business question ID for API calls
--- COLUMN ---,gmb_questions,25,asked_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_questions,26,author_display_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,27,answer_id,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,28,total_answer_count,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,gmb_questions,29,status,text,text,YES,'pending'::text,,,,,text,
--- COLUMN ---,gmb_questions,30,priority,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,31,question_url,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,32,google_resource_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,33,internal_notes,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,34,ai_category,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_questions,35,ai_answer_generated,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_questions,36,is_archived,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_questions,37,archived_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_reviews,2,location_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_reviews,3,external_review_id,text,text,YES,,,,,,text,Unique review ID from Google My Business API
--- COLUMN ---,gmb_reviews,4,reviewer_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,5,rating,integer,"integer(32,0)",NO,,,32,0,,int4,
--- COLUMN ---,gmb_reviews,6,review_text,text,text,YES,,,,,,text,Review comment text
--- COLUMN ---,gmb_reviews,7,review_date,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,Date the review was created
--- COLUMN ---,gmb_reviews,8,reply_text,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,9,reply_date,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,Date the reply was created
--- COLUMN ---,gmb_reviews,10,has_reply,boolean,boolean,YES,false,,,,,bool,Whether the review has a reply
--- COLUMN ---,gmb_reviews,11,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,12,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,13,user_id,uuid,uuid,YES,,,,,,uuid,Foreign key to auth.users table - owner of this review
--- COLUMN ---,gmb_reviews,14,ai_sentiment,text,text,YES,,,,,,text,"AI-analyzed sentiment: positive, neutral, or negative"
--- COLUMN ---,gmb_reviews,15,gmb_account_id,uuid,uuid,YES,,,,,,uuid,Foreign key to gmb_accounts table
--- COLUMN ---,gmb_reviews,16,ai_generated_response,text,text,YES,,,,,,text,AI-suggested reply text for this review
--- COLUMN ---,gmb_reviews,17,review_id,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,18,comment,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,19,review_reply,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,20,replied_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,21,ai_suggested_reply,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,22,status,text,text,YES,'pending'::text,,,,,text,
--- COLUMN ---,gmb_reviews,23,has_response,boolean,boolean,YES,false,,,,,bool,Whether the review has a response
--- COLUMN ---,gmb_reviews,24,response_text,text,text,YES,,,,,,text,The response text for the review
--- COLUMN ---,gmb_reviews,25,responded_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,When the response was created
--- COLUMN ---,gmb_reviews,26,auto_reply_enabled,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_reviews,27,auto_reply_status,character varying,character varying(50),YES,,50,,,,varchar,
--- COLUMN ---,gmb_reviews,28,ai_generated_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,29,ai_sent_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,30,reviewer_profile_photo_url,text,text,YES,,,,,,text,URL to reviewer profile photo from Google
--- COLUMN ---,gmb_reviews,31,reply_timestamp,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,When the reply was posted to Google
--- COLUMN ---,gmb_reviews,32,review_timestamp,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,When the review was posted on Google
--- COLUMN ---,gmb_reviews,33,account_id,text,text,YES,,,,,,text,Google My Business account ID for API calls
--- COLUMN ---,gmb_reviews,34,google_my_business_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,35,review_url,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,36,reviewer_display_name,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,37,is_verified_purchase,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_reviews,38,response,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,39,ai_sentiment_score,numeric,"numeric(3,2)",YES,,,3,2,,numeric,
--- COLUMN ---,gmb_reviews,40,ai_reply_generated,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_reviews,41,ai_confidence_score,numeric,"numeric(3,2)",YES,,,3,2,,numeric,
--- COLUMN ---,gmb_reviews,42,response_priority,text,text,YES,,,,,,text,Priority level for responding to this review
--- COLUMN ---,gmb_reviews,43,internal_notes,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,44,flagged_reason,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_reviews,45,tags,ARRAY,ARRAY,YES,,,,,,_text,
--- COLUMN ---,gmb_reviews,46,synced_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,47,is_archived,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,gmb_reviews,48,archived_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_reviews,49,is_anonymized,boolean,boolean,YES,false,,,,,bool,Personal data has been anonymized
--- COLUMN ---,gmb_reviews,50,metadata,jsonb,jsonb,YES,,,,,,jsonb,
--- COLUMN ---,gmb_reviews,51,ai_sentiment_analysis,jsonb,jsonb,YES,,,,,,jsonb,
--- COLUMN ---,gmb_search_keywords,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_search_keywords,2,gmb_account_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_search_keywords,3,location_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_search_keywords,4,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_search_keywords,5,search_keyword,text,text,NO,,,,,,text,The lower-cased search keyword that users used to find the business
--- COLUMN ---,gmb_search_keywords,6,month_year,date,date,NO,,,,,0,date,
--- COLUMN ---,gmb_search_keywords,7,impressions_count,bigint,"bigint(64,0)",NO,0,,64,0,,int8,Number of unique users who searched for this keyword in the month
--- COLUMN ---,gmb_search_keywords,8,threshold_value,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,gmb_search_keywords,9,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_search_keywords,10,synced_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_search_keywords,11,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_search_keywords,12,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_sync_logs,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,gmb_sync_logs,2,gmb_account_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_sync_logs,3,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,gmb_sync_logs,4,phase,text,text,NO,,,,,,text,
--- COLUMN ---,gmb_sync_logs,5,status,text,text,NO,'started'::text,,,,,text,
--- COLUMN ---,gmb_sync_logs,6,started_at,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,gmb_sync_logs,7,ended_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,gmb_sync_logs,8,duration_ms,integer,"integer(32,0)",YES,,,32,0,,int4,
--- COLUMN ---,gmb_sync_logs,9,counts,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_sync_logs,10,error,text,text,YES,,,,,,text,
--- COLUMN ---,gmb_sync_logs,11,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,gmb_sync_logs,12,created_at,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,notification_stats,1,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,notification_stats,2,unread_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,notification_stats,3,read_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,notification_stats,4,new_reviews_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,notification_stats,5,new_questions_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,notification_stats,6,new_media_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,notification_stats,7,latest_unread_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,notifications,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,notifications,2,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,notifications,3,type,text,text,NO,,,,,,text,
--- COLUMN ---,notifications,4,title,text,text,NO,,,,,,text,
--- COLUMN ---,notifications,5,message,text,text,NO,,,,,,text,
--- COLUMN ---,notifications,6,link,text,text,YES,,,,,,text,
--- COLUMN ---,notifications,7,read,boolean,boolean,YES,false,,,,,bool,
--- COLUMN ---,notifications,8,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,notifications,9,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,notifications,10,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,notifications,11,notification_type,text,text,YES,,,,,,text,"Type of Google Business Profile notification (e.g., NEW_REVIEW, NEW_QUESTION)"
--- COLUMN ---,notifications,12,location_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,notifications,13,location_name,text,text,YES,,,,,,text,"Google resource name for the location (e.g., locations/12345)"
--- COLUMN ---,notifications,14,review_name,text,text,YES,,,,,,text,"Google resource name for the review (e.g., locations/12345/reviews/67890)"
--- COLUMN ---,notifications,15,question_name,text,text,YES,,,,,,text,Google resource name for the question
--- COLUMN ---,notifications,16,answer_name,text,text,YES,,,,,,text,Google resource name for the answer
--- COLUMN ---,notifications,17,media_name,text,text,YES,,,,,,text,Google resource name for the media item
--- COLUMN ---,notifications,18,raw_data,jsonb,jsonb,YES,,,,,,jsonb,Complete notification data from Google Pub/Sub
--- COLUMN ---,oauth_states,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,oauth_states,2,state,text,text,NO,,,,,,text,Unique random state parameter for OAuth security
--- COLUMN ---,oauth_states,3,user_id,uuid,uuid,YES,,,,,,uuid,Reference to the user initiating the OAuth flow
--- COLUMN ---,oauth_states,4,expires_at,timestamp with time zone,timestamp with time zone,NO,,,,,6,timestamptz,When this state expires (typically 30 minutes)
--- COLUMN ---,oauth_states,5,used,boolean,boolean,YES,false,,,,,bool,Whether this state has been used in the callback
--- COLUMN ---,oauth_states,6,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,performance_metrics,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,performance_metrics,2,name,text,text,NO,,,,,,text,
--- COLUMN ---,performance_metrics,3,value,numeric,numeric,NO,,,,,,numeric,
--- COLUMN ---,performance_metrics,4,unit,text,text,NO,,,,,,text,
--- COLUMN ---,performance_metrics,5,timestamp,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,performance_metrics,6,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,performance_metrics,7,metadata,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,
--- COLUMN ---,profiles,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,profiles,2,email,text,text,NO,,,,,,text,
--- COLUMN ---,profiles,3,full_name,text,text,YES,,,,,,text,
--- COLUMN ---,profiles,4,avatar_url,text,text,YES,,,,,,text,
--- COLUMN ---,profiles,5,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,profiles,6,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,profiles,7,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,profiles,8,provider_sub,text,text,YES,,,,,,text,
--- COLUMN ---,profiles,9,last_login,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,profiles,10,phone,text,text,YES,,,,,,text,User phone number (from auth.users.phone)
--- COLUMN ---,rate_limit_requests,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,rate_limit_requests,2,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,rate_limit_requests,3,action,text,text,NO,,,,,,text,
--- COLUMN ---,rate_limit_requests,4,created_at,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,rate_limit_requests,5,endpoint,text,text,YES,,,,,,text,
--- COLUMN ---,rate_limit_requests,6,ip_address,inet,inet,YES,,,,,,inet,
--- COLUMN ---,rate_limit_requests,7,user_agent,text,text,YES,,,,,,text,
--- COLUMN ---,review_stats_view,1,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,review_stats_view,2,total_reviews,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,review_stats_view,3,pending_reviews,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,review_stats_view,4,responded_reviews,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,review_stats_view,5,response_rate,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,review_stats_view,6,avg_rating,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,review_stats_view,7,positive_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,review_stats_view,8,neutral_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,review_stats_view,9,negative_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,sync_status,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,sync_status,2,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,sync_status,3,account_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,sync_status,4,status,text,text,NO,'pending'::text,,,,,text,
--- COLUMN ---,sync_status,5,progress,integer,"integer(32,0)",NO,0,,32,0,,int4,
--- COLUMN ---,sync_status,6,started_at,timestamp with time zone,timestamp with time zone,NO,now(),,,,6,timestamptz,
--- COLUMN ---,sync_status,7,finished_at,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,sync_status,8,meta,jsonb,jsonb,YES,'{}'::jsonb,,,,,jsonb,"Optional JSON with section counts, errors, or diagnostics"
--- COLUMN ---,v_dashboard_stats,1,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,v_dashboard_stats,2,total_locations,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_dashboard_stats,3,total_reviews,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_dashboard_stats,4,avg_rating,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,v_dashboard_stats,5,pending_reviews,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_dashboard_stats,6,replied_reviews,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_dashboard_stats,7,pending_questions,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_dashboard_stats,8,recent_reviews,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_dashboard_stats,9,avg_response_rate,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,v_dashboard_stats,10,calculated_response_rate,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,v_error_summary,1,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,v_error_summary,2,severity,integer,"integer(32,0)",YES,,,32,0,,int4,
--- COLUMN ---,v_error_summary,3,error_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_error_summary,4,resolved_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_error_summary,5,last_error,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,v_notification_summary,1,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,v_notification_summary,2,type,text,text,YES,,,,,,text,
--- COLUMN ---,v_notification_summary,3,total_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_notification_summary,4,unread_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_notification_summary,5,last_notification,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,v_performance_summary,1,user_id,uuid,uuid,YES,,,,,,uuid,
--- COLUMN ---,v_performance_summary,2,name,text,text,YES,,,,,,text,
--- COLUMN ---,v_performance_summary,3,measurement_count,bigint,"bigint(64,0)",YES,,,64,0,,int8,
--- COLUMN ---,v_performance_summary,4,avg_value,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,v_performance_summary,5,min_value,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,v_performance_summary,6,max_value,numeric,numeric,YES,,,,,,numeric,
--- COLUMN ---,v_performance_summary,7,median_value,double precision,,YES,,,53,,,float8,
--- COLUMN ---,v_performance_summary,8,p95_value,double precision,,YES,,,53,,,float8,
--- COLUMN ---,v_performance_summary,9,last_measured,timestamp with time zone,timestamp with time zone,YES,,,,,6,timestamptz,
--- COLUMN ---,weekly_task_recommendations,1,id,uuid,uuid,NO,gen_random_uuid(),,,,,uuid,
--- COLUMN ---,weekly_task_recommendations,2,user_id,uuid,uuid,NO,,,,,,uuid,
--- COLUMN ---,weekly_task_recommendations,3,week_start_date,date,date,NO,,,,,0,date,
--- COLUMN ---,weekly_task_recommendations,4,week_end_date,date,date,NO,,,,,0,date,
--- COLUMN ---,weekly_task_recommendations,5,tasks,jsonb,jsonb,YES,'[]'::jsonb,,,,,jsonb,
--- COLUMN ---,weekly_task_recommendations,6,insights,text,text,YES,,,,,,text,
--- COLUMN ---,weekly_task_recommendations,7,created_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
--- COLUMN ---,weekly_task_recommendations,8,title,text,text,NO,,,,,,text,
--- COLUMN ---,weekly_task_recommendations,9,description,text,text,YES,,,,,,text,
--- COLUMN ---,weekly_task_recommendations,10,category,text,text,YES,,,,,,text,
--- COLUMN ---,weekly_task_recommendations,11,priority,text,text,YES,'medium'::text,,,,,text,
--- COLUMN ---,weekly_task_recommendations,12,effort_level,text,text,YES,'moderate'::text,,,,,text,
--- COLUMN ---,weekly_task_recommendations,13,estimated_minutes,integer,"integer(32,0)",YES,0,,32,0,,int4,
--- COLUMN ---,weekly_task_recommendations,14,status,text,text,YES,'pending'::text,,,,,text,
--- COLUMN ---,weekly_task_recommendations,15,reasoning,text,text,YES,,,,,,text,
--- COLUMN ---,weekly_task_recommendations,16,expected_impact,text,text,YES,,,,,,text,
--- COLUMN ---,weekly_task_recommendations,17,updated_at,timestamp with time zone,timestamp with time zone,YES,now(),,,,6,timestamptz,
separator,table_name,constraint_name,column_name,ordinal_position
--- PRIMARY KEY ---,activity_logs,activity_logs_pkey,id,1
--- PRIMARY KEY ---,ai_requests,ai_requests_pkey,id,1
--- PRIMARY KEY ---,ai_settings,ai_settings_pkey,id,1
--- PRIMARY KEY ---,audit_logs,audit_logs_pkey,id,1
--- PRIMARY KEY ---,auto_reply_settings,auto_reply_settings_pkey,id,1
--- PRIMARY KEY ---,business_profile_history,business_profile_history_pkey,id,1
--- PRIMARY KEY ---,error_logs,error_logs_pkey,id,1
--- PRIMARY KEY ---,gmb_accounts,gmb_accounts_pkey,id,1
--- PRIMARY KEY ---,gmb_locations,gmb_locations_pkey,id,1
--- PRIMARY KEY ---,gmb_media,gmb_media_pkey,id,1
--- PRIMARY KEY ---,gmb_metrics,gmb_metrics_pkey,id,1
--- PRIMARY KEY ---,gmb_performance_metrics,gmb_performance_metrics_pkey,id,1
--- PRIMARY KEY ---,gmb_posts,gmb_posts_pkey,id,1
--- PRIMARY KEY ---,gmb_questions,gmb_questions_pkey,id,1
--- PRIMARY KEY ---,gmb_reviews,gmb_reviews_pkey,id,1
--- PRIMARY KEY ---,gmb_search_keywords,gmb_search_keywords_pkey,id,1
--- PRIMARY KEY ---,gmb_sync_logs,gmb_sync_logs_pkey,id,1
--- PRIMARY KEY ---,notifications,notifications_pkey,id,1
--- PRIMARY KEY ---,oauth_states,oauth_states_pkey,id,1
--- PRIMARY KEY ---,performance_metrics,performance_metrics_pkey,id,1
--- PRIMARY KEY ---,profiles,profiles_pkey,id,1
--- PRIMARY KEY ---,rate_limit_requests,rate_limit_requests_pkey,id,1
--- PRIMARY KEY ---,sync_status,sync_status_pkey,id,1
--- PRIMARY KEY ---,weekly_task_recommendations,weekly_task_recommendations_pkey,id,1
separator,from_table,from_column,to_table,to_column,constraint_name,update_rule,delete_rule
--- FOREIGN KEY ---,ai_requests,location_id,gmb_locations,id,ai_requests_location_id_fkey,NO ACTION,SET NULL
--- FOREIGN KEY ---,ai_requests,user_id,profiles,id,ai_requests_user_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,ai_settings,user_id,profiles,id,ai_settings_user_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,auto_reply_settings,location_id,gmb_locations,id,auto_reply_settings_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,business_profile_history,location_id,gmb_locations,id,business_profile_history_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_accounts,user_id,profiles,id,fk_user,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_accounts,user_id,profiles,id,fk_user_profile,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_accounts,user_id,profiles,id,gmb_accounts_user_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_locations,gmb_account_id,gmb_accounts,id,gmb_locations_gmb_account_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_media,gmb_account_id,gmb_accounts,id,gmb_media_gmb_account_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_media,location_id,gmb_locations,id,gmb_media_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_performance_metrics,gmb_account_id,gmb_accounts,id,gmb_performance_metrics_gmb_account_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_performance_metrics,location_id,gmb_locations,id,gmb_performance_metrics_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_posts,location_id,gmb_locations,id,gmb_posts_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_questions,gmb_account_id,gmb_accounts,id,gmb_questions_gmb_account_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_questions,location_id,gmb_locations,id,gmb_questions_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_reviews,gmb_account_id,gmb_accounts,id,gmb_reviews_gmb_account_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_reviews,location_id,gmb_locations,id,gmb_reviews_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_search_keywords,gmb_account_id,gmb_accounts,id,gmb_search_keywords_gmb_account_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_search_keywords,location_id,gmb_locations,id,gmb_search_keywords_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_sync_logs,gmb_account_id,gmb_accounts,id,gmb_sync_logs_gmb_account_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,gmb_sync_logs,user_id,profiles,id,gmb_sync_logs_user_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,notifications,location_id,gmb_locations,id,notifications_location_id_fkey,NO ACTION,CASCADE
--- FOREIGN KEY ---,sync_status,account_id,gmb_accounts,id,sync_status_account_id_fkey,NO ACTION,CASCADE
separator,table_name,constraint_name,column_name,ordinal_position
--- UNIQUE ---,ai_settings,ai_settings_user_id_provider_key,user_id,1
--- UNIQUE ---,ai_settings,ai_settings_user_id_provider_key,provider,2
--- UNIQUE ---,gmb_accounts,gmb_accounts_user_account_unique,user_id,1
--- UNIQUE ---,gmb_accounts,gmb_accounts_user_account_unique,account_id,2
--- UNIQUE ---,gmb_locations,gmb_locations_location_user_unique,location_id,1
--- UNIQUE ---,gmb_locations,gmb_locations_location_user_unique,user_id,2
--- UNIQUE ---,gmb_locations,gmb_locations_unique_account_location,gmb_account_id,1
--- UNIQUE ---,gmb_locations,gmb_locations_unique_account_location,location_id,2
--- UNIQUE ---,gmb_locations,unique_location_per_account_normalized,gmb_account_id,1
--- UNIQUE ---,gmb_locations,unique_location_per_account_normalized,normalized_location_id,2
--- UNIQUE ---,gmb_media,gmb_media_external_media_id_key,external_media_id,1
--- UNIQUE ---,gmb_metrics,gmb_metrics_unique,gmb_account_id,1
--- UNIQUE ---,gmb_metrics,gmb_metrics_unique,phase,2
--- UNIQUE ---,gmb_performance_metrics,gmb_performance_metrics_location_id_metric_date_metric_type_key,location_id,1
--- UNIQUE ---,gmb_performance_metrics,gmb_performance_metrics_location_id_metric_date_metric_type_key,metric_date,2
--- UNIQUE ---,gmb_performance_metrics,gmb_performance_metrics_location_id_metric_date_metric_type_key,metric_type,3
--- UNIQUE ---,gmb_posts,gmb_posts_post_id_key,post_id,1
--- UNIQUE ---,gmb_questions,gmb_questions_external_question_id_key,external_question_id,1
--- UNIQUE ---,gmb_questions,gmb_questions_question_id_key,question_id,1
--- UNIQUE ---,gmb_reviews,gmb_reviews_external_review_id_key,external_review_id,1
--- UNIQUE ---,gmb_reviews,gmb_reviews_review_id_key,review_id,1
--- UNIQUE ---,gmb_search_keywords,gmb_search_keywords_location_id_search_keyword_month_year_key,location_id,1
--- UNIQUE ---,gmb_search_keywords,gmb_search_keywords_location_id_search_keyword_month_year_key,search_keyword,2
--- UNIQUE ---,gmb_search_keywords,gmb_search_keywords_location_id_search_keyword_month_year_key,month_year,3
--- UNIQUE ---,oauth_states,oauth_states_state_key,state,1
--- UNIQUE ---,profiles,profiles_email_key,email,1
separator,table_name,constraint_name,check_clause
--- CHECK ---,activity_logs,2200_25953_1_not_null,id IS NOT NULL
--- CHECK ---,activity_logs,2200_25953_3_not_null,activity_type IS NOT NULL
--- CHECK ---,activity_logs,2200_25953_4_not_null,activity_message IS NOT NULL
--- CHECK ---,ai_requests,2200_17989_1_not_null,id IS NOT NULL
--- CHECK ---,ai_requests,2200_17989_2_not_null,user_id IS NOT NULL
--- CHECK ---,ai_requests,2200_17989_4_not_null,provider IS NOT NULL
--- CHECK ---,ai_requests,2200_17989_5_not_null,model IS NOT NULL
--- CHECK ---,ai_requests,2200_17989_6_not_null,feature IS NOT NULL
--- CHECK ---,ai_settings,2200_18073_1_not_null,id IS NOT NULL
--- CHECK ---,ai_settings,2200_18073_2_not_null,user_id IS NOT NULL
--- CHECK ---,ai_settings,2200_18073_3_not_null,provider IS NOT NULL
--- CHECK ---,ai_settings,2200_18073_4_not_null,api_key IS NOT NULL
--- CHECK ---,audit_logs,2200_69658_1_not_null,id IS NOT NULL
--- CHECK ---,audit_logs,2200_69658_3_not_null,action IS NOT NULL
--- CHECK ---,audit_logs,2200_69658_8_not_null,created_at IS NOT NULL
--- CHECK ---,auto_reply_settings,2200_85876_1_not_null,id IS NOT NULL
--- CHECK ---,auto_reply_settings,2200_85876_2_not_null,user_id IS NOT NULL
--- CHECK ---,auto_reply_settings,auto_reply_settings_ai_tone_check,"(ai_tone = ANY (ARRAY['professional'::text, 'friendly'::text, 'casual'::text, 'formal'::text]))"
--- CHECK ---,auto_reply_settings,auto_reply_settings_max_rating_check,((max_rating >= 1) AND (max_rating <= 5))
--- CHECK ---,auto_reply_settings,auto_reply_settings_min_rating_check,((min_rating >= 1) AND (min_rating <= 5))
--- CHECK ---,auto_reply_settings,valid_response_style,"(response_style = ANY (ARRAY['friendly'::text, 'professional'::text, 'apologetic'::text, 'marketing'::text]))"
--- CHECK ---,business_profile_history,2200_65362_1_not_null,id IS NOT NULL
--- CHECK ---,business_profile_history,2200_65362_2_not_null,location_id IS NOT NULL
--- CHECK ---,business_profile_history,2200_65362_3_not_null,location_name IS NOT NULL
--- CHECK ---,business_profile_history,2200_65362_4_not_null,operation_type IS NOT NULL
--- CHECK ---,business_profile_history,2200_65362_5_not_null,data IS NOT NULL
--- CHECK ---,business_profile_history,business_profile_history_operation_type_check,"(operation_type = ANY (ARRAY['create'::text, 'update'::text, 'delete'::text, 'bulk_update'::text, 'rollback'::text]))"
--- CHECK ---,error_logs,2200_63102_1_not_null,id IS NOT NULL
--- CHECK ---,error_logs,2200_63102_2_not_null,message IS NOT NULL
--- CHECK ---,error_logs,error_logs_level_check,"(level = ANY (ARRAY['error'::text, 'warning'::text, 'info'::text]))"
--- CHECK ---,error_logs,error_logs_severity_check,((severity >= 1) AND (severity <= 5))
--- CHECK ---,gmb_accounts,2200_17497_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_locations,2200_17637_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_locations,2200_17637_2_not_null,gmb_account_id IS NOT NULL
--- CHECK ---,gmb_locations,2200_17637_3_not_null,location_name IS NOT NULL
--- CHECK ---,gmb_locations,2200_17637_4_not_null,location_id IS NOT NULL
--- CHECK ---,gmb_locations,gmb_locations_health_score_check,((health_score >= 0) AND (health_score <= 100))
--- CHECK ---,gmb_locations,gmb_locations_status_check,"((status IS NULL) OR (status = ANY (ARRAY['verified'::text, 'pending'::text, 'suspended'::text, 'active'::text, 'inactive'::text, 'closed'::text])))"
--- CHECK ---,gmb_media,2200_37467_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_media,2200_37467_2_not_null,gmb_account_id IS NOT NULL
--- CHECK ---,gmb_media,2200_37467_3_not_null,location_id IS NOT NULL
--- CHECK ---,gmb_media,2200_37467_4_not_null,user_id IS NOT NULL
--- CHECK ---,gmb_media,2200_37467_5_not_null,external_media_id IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_10_not_null,created_at IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_2_not_null,gmb_account_id IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_3_not_null,user_id IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_4_not_null,phase IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_5_not_null,runs_count IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_6_not_null,total_duration_ms IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_7_not_null,total_items_count IS NOT NULL
--- CHECK ---,gmb_metrics,2200_49498_9_not_null,updated_at IS NOT NULL
--- CHECK ---,gmb_metrics,gmb_metrics_phase_check,"(phase = ANY (ARRAY['locations'::text, 'reviews'::text, 'media'::text, 'questions'::text, 'performance'::text, 'keywords'::text]))"
--- CHECK ---,gmb_performance_metrics,2200_37602_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_performance_metrics,2200_37602_2_not_null,gmb_account_id IS NOT NULL
--- CHECK ---,gmb_performance_metrics,2200_37602_3_not_null,location_id IS NOT NULL
--- CHECK ---,gmb_performance_metrics,2200_37602_4_not_null,user_id IS NOT NULL
--- CHECK ---,gmb_performance_metrics,2200_37602_5_not_null,metric_type IS NOT NULL
--- CHECK ---,gmb_performance_metrics,2200_37602_6_not_null,metric_date IS NOT NULL
--- CHECK ---,gmb_performance_metrics,2200_37602_7_not_null,metric_value IS NOT NULL
--- CHECK ---,gmb_posts,2200_35052_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_posts,2200_35052_2_not_null,user_id IS NOT NULL
--- CHECK ---,gmb_posts,2200_35052_3_not_null,location_id IS NOT NULL
--- CHECK ---,gmb_posts,2200_35052_5_not_null,content IS NOT NULL
--- CHECK ---,gmb_posts,2200_35052_9_not_null,status IS NOT NULL
--- CHECK ---,gmb_posts,gmb_posts_post_type_check,"(post_type = ANY (ARRAY['whats_new'::text, 'event'::text, 'offer'::text]))"
--- CHECK ---,gmb_posts,gmb_posts_status_check,"(status = ANY (ARRAY['draft'::text, 'queued'::text, 'published'::text, 'failed'::text]))"
--- CHECK ---,gmb_questions,2200_40040_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_questions,2200_40040_2_not_null,gmb_account_id IS NOT NULL
--- CHECK ---,gmb_questions,2200_40040_3_not_null,location_id IS NOT NULL
--- CHECK ---,gmb_questions,2200_40040_4_not_null,user_id IS NOT NULL
--- CHECK ---,gmb_questions,2200_40040_6_not_null,question_text IS NOT NULL
--- CHECK ---,gmb_questions,gmb_questions_ai_confidence_score_check,((ai_confidence_score >= (0)::numeric) AND (ai_confidence_score <= (1)::numeric))
--- CHECK ---,gmb_questions,gmb_questions_answer_status_check,"(answer_status = ANY (ARRAY['unanswered'::text, 'answered'::text, 'deleted'::text, 'pending'::text, 'draft'::text]))"
--- CHECK ---,gmb_questions,gmb_questions_author_type_check,"(author_type = ANY (ARRAY['MERCHANT'::text, 'CUSTOMER'::text, 'GOOGLE_USER'::text]))"
--- CHECK ---,gmb_questions,gmb_questions_priority_check,"(priority = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'urgent'::text]))"
--- CHECK ---,gmb_questions,gmb_questions_status_check,"(status = ANY (ARRAY['pending'::text, 'answered'::text, 'flagged'::text, 'archived'::text]))"
--- CHECK ---,gmb_reviews,2200_17721_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_reviews,2200_17721_2_not_null,location_id IS NOT NULL
--- CHECK ---,gmb_reviews,2200_17721_5_not_null,rating IS NOT NULL
--- CHECK ---,gmb_reviews,gmb_reviews_ai_sentiment_check,"(ai_sentiment = ANY (ARRAY['positive'::text, 'neutral'::text, 'negative'::text]))"
--- CHECK ---,gmb_reviews,gmb_reviews_rating_check,((rating >= 1) AND (rating <= 5))
--- CHECK ---,gmb_reviews,gmb_reviews_status_check,"(status = ANY (ARRAY['pending'::text, 'in_progress'::text, 'responded'::text, 'flagged'::text, 'archived'::text, 'new'::text]))"
--- CHECK ---,gmb_search_keywords,2200_37633_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_search_keywords,2200_37633_2_not_null,gmb_account_id IS NOT NULL
--- CHECK ---,gmb_search_keywords,2200_37633_3_not_null,location_id IS NOT NULL
--- CHECK ---,gmb_search_keywords,2200_37633_4_not_null,user_id IS NOT NULL
--- CHECK ---,gmb_search_keywords,2200_37633_5_not_null,search_keyword IS NOT NULL
--- CHECK ---,gmb_search_keywords,2200_37633_6_not_null,month_year IS NOT NULL
--- CHECK ---,gmb_search_keywords,2200_37633_7_not_null,impressions_count IS NOT NULL
--- CHECK ---,gmb_sync_logs,2200_49312_12_not_null,created_at IS NOT NULL
--- CHECK ---,gmb_sync_logs,2200_49312_1_not_null,id IS NOT NULL
--- CHECK ---,gmb_sync_logs,2200_49312_2_not_null,gmb_account_id IS NOT NULL
--- CHECK ---,gmb_sync_logs,2200_49312_3_not_null,user_id IS NOT NULL
--- CHECK ---,gmb_sync_logs,2200_49312_4_not_null,phase IS NOT NULL
--- CHECK ---,gmb_sync_logs,2200_49312_5_not_null,status IS NOT NULL
--- CHECK ---,gmb_sync_logs,2200_49312_6_not_null,started_at IS NOT NULL
--- CHECK ---,notifications,2200_31820_1_not_null,id IS NOT NULL
--- CHECK ---,notifications,2200_31820_2_not_null,user_id IS NOT NULL
--- CHECK ---,notifications,2200_31820_3_not_null,type IS NOT NULL
--- CHECK ---,notifications,2200_31820_4_not_null,title IS NOT NULL
--- CHECK ---,notifications,2200_31820_5_not_null,message IS NOT NULL
--- CHECK ---,notifications,notifications_notification_type_check,"(notification_type = ANY (ARRAY['NEW_REVIEW'::text, 'UPDATED_REVIEW'::text, 'NEW_QUESTION'::text, 'UPDATED_QUESTION'::text, 'NEW_ANSWER'::text, 'UPDATED_ANSWER'::text, 'NEW_CUSTOMER_MEDIA'::text, 'GOOGLE_UPDATE'::text, 'DUPLICATE_LOCATION'::text, 'VOICE_OF_MERCHANT_UPDATED'::text]))"
--- CHECK ---,notifications,notifications_type_check,"(type = ANY (ARRAY['review'::text, 'sync'::text, 'error'::text, 'info'::text, 'success'::text, 'warning'::text]))"
--- CHECK ---,oauth_states,2200_28374_1_not_null,id IS NOT NULL
--- CHECK ---,oauth_states,2200_28374_2_not_null,state IS NOT NULL
--- CHECK ---,oauth_states,2200_28374_4_not_null,expires_at IS NOT NULL
--- CHECK ---,performance_metrics,2200_48563_1_not_null,id IS NOT NULL
--- CHECK ---,performance_metrics,2200_48563_2_not_null,name IS NOT NULL
--- CHECK ---,performance_metrics,2200_48563_3_not_null,value IS NOT NULL
--- CHECK ---,performance_metrics,2200_48563_4_not_null,unit IS NOT NULL
--- CHECK ---,performance_metrics,2200_48563_5_not_null,timestamp IS NOT NULL
--- CHECK ---,performance_metrics,performance_metrics_unit_check,"(unit = ANY (ARRAY['ms'::text, 'bytes'::text, 'count'::text]))"
--- CHECK ---,profiles,2200_17486_1_not_null,id IS NOT NULL
--- CHECK ---,profiles,2200_17486_2_not_null,email IS NOT NULL
--- CHECK ---,rate_limit_requests,2200_48523_1_not_null,id IS NOT NULL
--- CHECK ---,rate_limit_requests,2200_48523_2_not_null,user_id IS NOT NULL
--- CHECK ---,rate_limit_requests,2200_48523_3_not_null,action IS NOT NULL
--- CHECK ---,rate_limit_requests,2200_48523_4_not_null,created_at IS NOT NULL
--- CHECK ---,sync_status,2200_78740_1_not_null,id IS NOT NULL
--- CHECK ---,sync_status,2200_78740_4_not_null,status IS NOT NULL
--- CHECK ---,sync_status,2200_78740_5_not_null,progress IS NOT NULL
--- CHECK ---,sync_status,2200_78740_6_not_null,started_at IS NOT NULL
--- CHECK ---,sync_status,sync_status_progress_check,((progress >= 0) AND (progress <= 100))
--- CHECK ---,sync_status,sync_status_status_check,"(status = ANY (ARRAY['pending'::text, 'running'::text, 'success'::text, 'failed'::text, 'cancelled'::text]))"
--- CHECK ---,weekly_task_recommendations,2200_44534_1_not_null,id IS NOT NULL
--- CHECK ---,weekly_task_recommendations,2200_44534_2_not_null,user_id IS NOT NULL
--- CHECK ---,weekly_task_recommendations,2200_44534_3_not_null,week_start_date IS NOT NULL
--- CHECK ---,weekly_task_recommendations,2200_44534_4_not_null,week_end_date IS NOT NULL
--- CHECK ---,weekly_task_recommendations,2200_44534_8_not_null,title IS NOT NULL
--- CHECK ---,weekly_task_recommendations,weekly_task_recommendations_effort_level_check,"(effort_level = ANY (ARRAY['quick'::text, 'moderate'::text, 'extensive'::text]))"
--- CHECK ---,weekly_task_recommendations,weekly_task_recommendations_priority_check,"(priority = ANY (ARRAY['high'::text, 'medium'::text, 'low'::text]))"
--- CHECK ---,weekly_task_recommendations,weekly_task_recommendations_status_check,"(status = ANY (ARRAY['pending'::text, 'in_progress'::text, 'completed'::text, 'dismissed'::text]))"
separator,schema,table_name,index_name,definition,size,times_used,tuples_read,tuples_fetched
--- INDEX ---,public,activity_logs,activity_logs_pkey,CREATE UNIQUE INDEX activity_logs_pkey ON public.activity_logs USING btree (id),88 kB,24,503,502
--- INDEX ---,public,activity_logs,idx_activity_logs_created_at_desc,CREATE INDEX idx_activity_logs_created_at_desc ON public.activity_logs USING btree (created_at DESC),48 kB,164,24692,23923
--- INDEX ---,public,activity_logs,idx_activity_logs_user_id,CREATE INDEX idx_activity_logs_user_id ON public.activity_logs USING btree (user_id),40 kB,446,370,306
--- INDEX ---,public,ai_requests,ai_requests_pkey,CREATE UNIQUE INDEX ai_requests_pkey ON public.ai_requests USING btree (id),16 kB,30,30,30
--- INDEX ---,public,ai_requests,idx_ai_requests_created_at,CREATE INDEX idx_ai_requests_created_at ON public.ai_requests USING btree (created_at),16 kB,0,0,0
--- INDEX ---,public,ai_requests,idx_ai_requests_feature,CREATE INDEX idx_ai_requests_feature ON public.ai_requests USING btree (feature),16 kB,0,0,0
--- INDEX ---,public,ai_requests,idx_ai_requests_location_id,CREATE INDEX idx_ai_requests_location_id ON public.ai_requests USING btree (location_id),16 kB,39,0,0
--- INDEX ---,public,ai_requests,idx_ai_requests_provider,CREATE INDEX idx_ai_requests_provider ON public.ai_requests USING btree (provider),16 kB,0,0,0
--- INDEX ---,public,ai_requests,idx_ai_requests_user_created,"CREATE INDEX idx_ai_requests_user_created ON public.ai_requests USING btree (user_id, created_at DESC)",16 kB,11,0,0
--- INDEX ---,public,ai_requests,idx_ai_requests_user_id,CREATE INDEX idx_ai_requests_user_id ON public.ai_requests USING btree (user_id),16 kB,13,0,0
--- INDEX ---,public,ai_settings,ai_settings_pkey,CREATE UNIQUE INDEX ai_settings_pkey ON public.ai_settings USING btree (id),16 kB,23,1,0
--- INDEX ---,public,ai_settings,ai_settings_user_id_provider_key,"CREATE UNIQUE INDEX ai_settings_user_id_provider_key ON public.ai_settings USING btree (user_id, provider)",16 kB,0,0,0
--- INDEX ---,public,ai_settings,idx_ai_settings_active,"CREATE INDEX idx_ai_settings_active ON public.ai_settings USING btree (user_id, is_active) WHERE (is_active = true)",16 kB,0,0,0
--- INDEX ---,public,ai_settings,idx_ai_settings_priority,"CREATE INDEX idx_ai_settings_priority ON public.ai_settings USING btree (user_id, priority, is_active) WHERE (is_active = true)",16 kB,8,0,0
--- INDEX ---,public,ai_settings,idx_ai_settings_provider,CREATE INDEX idx_ai_settings_provider ON public.ai_settings USING btree (provider),8192 bytes,0,0,0
--- INDEX ---,public,ai_settings,idx_ai_settings_user_id,CREATE INDEX idx_ai_settings_user_id ON public.ai_settings USING btree (user_id),16 kB,58,8,0
--- INDEX ---,public,audit_logs,audit_logs_pkey,CREATE UNIQUE INDEX audit_logs_pkey ON public.audit_logs USING btree (id),40 kB,3,300,300
--- INDEX ---,public,audit_logs,audit_logs_user_idx,"CREATE INDEX audit_logs_user_idx ON public.audit_logs USING btree (user_id, created_at DESC)",48 kB,0,0,0
--- INDEX ---,public,auto_reply_settings,auto_reply_settings_pkey,CREATE UNIQUE INDEX auto_reply_settings_pkey ON public.auto_reply_settings USING btree (id),8192 bytes,1,0,0
--- INDEX ---,public,auto_reply_settings,idx_auto_reply_settings_enabled,"CREATE INDEX idx_auto_reply_settings_enabled ON public.auto_reply_settings USING btree (enabled, require_approval) WHERE ((enabled = true) AND (require_approval = false))",8192 bytes,0,0,0
--- INDEX ---,public,auto_reply_settings,idx_auto_reply_settings_location_id,CREATE INDEX idx_auto_reply_settings_location_id ON public.auto_reply_settings USING btree (location_id),8192 bytes,9,0,0
--- INDEX ---,public,auto_reply_settings,idx_auto_reply_settings_user_id,CREATE INDEX idx_auto_reply_settings_user_id ON public.auto_reply_settings USING btree (user_id),8192 bytes,0,0,0
--- INDEX ---,public,business_profile_history,business_profile_history_pkey,CREATE UNIQUE INDEX business_profile_history_pkey ON public.business_profile_history USING btree (id),16 kB,4,69,65
--- INDEX ---,public,business_profile_history,idx_profile_history_created_at,CREATE INDEX idx_profile_history_created_at ON public.business_profile_history USING btree (created_at DESC),16 kB,0,0,0
--- INDEX ---,public,business_profile_history,idx_profile_history_location,CREATE INDEX idx_profile_history_location ON public.business_profile_history USING btree (location_id),16 kB,13,234,20
--- INDEX ---,public,business_profile_history,idx_profile_history_operation,CREATE INDEX idx_profile_history_operation ON public.business_profile_history USING btree (operation_type),16 kB,0,0,0
--- INDEX ---,public,error_logs,error_logs_pkey,CREATE UNIQUE INDEX error_logs_pkey ON public.error_logs USING btree (id),8192 bytes,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_context,CREATE INDEX idx_error_logs_context ON public.error_logs USING gin (context),16 kB,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_created_at,CREATE INDEX idx_error_logs_created_at ON public.error_logs USING btree (created_at DESC),8192 bytes,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_error_type,CREATE INDEX idx_error_logs_error_type ON public.error_logs USING btree (error_type),8192 bytes,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_level,CREATE INDEX idx_error_logs_level ON public.error_logs USING btree (level),8192 bytes,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_resolved,CREATE INDEX idx_error_logs_resolved ON public.error_logs USING btree (resolved),8192 bytes,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_severity,CREATE INDEX idx_error_logs_severity ON public.error_logs USING btree (severity),8192 bytes,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_timestamp,"CREATE INDEX idx_error_logs_timestamp ON public.error_logs USING btree (""timestamp"" DESC)",8192 bytes,0,0,0
--- INDEX ---,public,error_logs,idx_error_logs_user_id,CREATE INDEX idx_error_logs_user_id ON public.error_logs USING btree (user_id),8192 bytes,0,0,0
--- INDEX ---,public,gmb_accounts,gmb_accounts_pkey,CREATE UNIQUE INDEX gmb_accounts_pkey ON public.gmb_accounts USING btree (id),16 kB,16,11,10
--- INDEX ---,public,gmb_accounts,gmb_accounts_user_account_unique,"CREATE UNIQUE INDEX gmb_accounts_user_account_unique ON public.gmb_accounts USING btree (user_id, account_id)",16 kB,22670,24749,21315
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_active,CREATE INDEX idx_gmb_accounts_active ON public.gmb_accounts USING btree (is_active),16 kB,2,1,0
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_disconnected,"CREATE INDEX idx_gmb_accounts_disconnected ON public.gmb_accounts USING btree (user_id, disconnected_at) WHERE (disconnected_at IS NOT NULL)",16 kB,0,0,0
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_google_account_id,CREATE INDEX idx_gmb_accounts_google_account_id ON public.gmb_accounts USING btree (google_account_id),16 kB,0,0,0
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_google_id,CREATE INDEX idx_gmb_accounts_google_id ON public.gmb_accounts USING btree (google_account_id),16 kB,4,39,6
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_id,CREATE INDEX idx_gmb_accounts_id ON public.gmb_accounts USING btree (id),16 kB,59080,224891,31846
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_last_sync,CREATE INDEX idx_gmb_accounts_last_sync ON public.gmb_accounts USING btree (last_sync DESC) WHERE (is_active = true),16 kB,0,0,0
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_notification_settings,CREATE INDEX idx_gmb_accounts_notification_settings ON public.gmb_accounts USING gin (notification_settings),24 kB,0,0,0
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_tokens,"CREATE INDEX idx_gmb_accounts_tokens ON public.gmb_accounts USING btree (user_id, token_expires_at)",16 kB,3,3,0
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_user,CREATE INDEX idx_gmb_accounts_user ON public.gmb_accounts USING btree (user_id),16 kB,18,196,0
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_user_active,"CREATE INDEX idx_gmb_accounts_user_active ON public.gmb_accounts USING btree (user_id, is_active) WHERE (is_active = true)",16 kB,1532,11945,771
--- INDEX ---,public,gmb_accounts,idx_gmb_accounts_user_id,CREATE INDEX idx_gmb_accounts_user_id ON public.gmb_accounts USING btree (user_id),16 kB,0,0,0
--- INDEX ---,public,gmb_locations,gmb_locations_account_idx,CREATE INDEX gmb_locations_account_idx ON public.gmb_locations USING btree (gmb_account_id),16 kB,2361,4531,1166
--- INDEX ---,public,gmb_locations,gmb_locations_location_user_unique,"CREATE UNIQUE INDEX gmb_locations_location_user_unique ON public.gmb_locations USING btree (location_id, user_id)",16 kB,4,4,1
--- INDEX ---,public,gmb_locations,gmb_locations_normalized_idx,CREATE INDEX gmb_locations_normalized_idx ON public.gmb_locations USING btree (normalized_location_id),16 kB,6,0,0
--- INDEX ---,public,gmb_locations,gmb_locations_pkey,CREATE UNIQUE INDEX gmb_locations_pkey ON public.gmb_locations USING btree (id),16 kB,5,4,3
--- INDEX ---,public,gmb_locations,gmb_locations_unique_account_location,"CREATE UNIQUE INDEX gmb_locations_unique_account_location ON public.gmb_locations USING btree (gmb_account_id, location_id)",16 kB,874,932,474
--- INDEX ---,public,gmb_locations,idx_gmb_locations_account_active,"CREATE INDEX idx_gmb_locations_account_active ON public.gmb_locations USING btree (gmb_account_id, is_active) WHERE (is_active = true)",16 kB,501,11919,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_account_id,CREATE INDEX idx_gmb_locations_account_id ON public.gmb_locations USING btree (gmb_account_id),16 kB,64,4,1
--- INDEX ---,public,gmb_locations,idx_gmb_locations_account_location,"CREATE INDEX idx_gmb_locations_account_location ON public.gmb_locations USING btree (gmb_account_id, location_id)",16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_account_normalized,"CREATE INDEX idx_gmb_locations_account_normalized ON public.gmb_locations USING btree (gmb_account_id, normalized_location_id)",16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_additional_categories,CREATE INDEX idx_gmb_locations_additional_categories ON public.gmb_locations USING gin (additional_categories),24 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_address_trgm,CREATE INDEX idx_gmb_locations_address_trgm ON public.gmb_locations USING gin (address gin_trgm_ops),176 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_archived,"CREATE INDEX idx_gmb_locations_archived ON public.gmb_locations USING btree (user_id, is_archived) WHERE (is_archived = true)",16 kB,44,39,4
--- INDEX ---,public,gmb_locations,idx_gmb_locations_coordinates,"CREATE INDEX idx_gmb_locations_coordinates ON public.gmb_locations USING btree (latitude, longitude) WHERE ((latitude IS NOT NULL) AND (longitude IS NOT NULL))",16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_cover_photo_url,CREATE INDEX idx_gmb_locations_cover_photo_url ON public.gmb_locations USING btree (cover_photo_url),16 kB,15,137,22
--- INDEX ---,public,gmb_locations,idx_gmb_locations_created,"CREATE INDEX idx_gmb_locations_created ON public.gmb_locations USING btree (user_id, created_at DESC)",16 kB,12386,13201,11817
--- INDEX ---,public,gmb_locations,idx_gmb_locations_description,"CREATE INDEX idx_gmb_locations_description ON public.gmb_locations USING gin (to_tsvector('english'::regconfig, COALESCE(description, ''::text)))",256 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_gmb_account_id,CREATE INDEX idx_gmb_locations_gmb_account_id ON public.gmb_locations USING btree (gmb_account_id),16 kB,3364,1,1
--- INDEX ---,public,gmb_locations,idx_gmb_locations_health_score,CREATE INDEX idx_gmb_locations_health_score ON public.gmb_locations USING btree (health_score),16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_id,CREATE INDEX idx_gmb_locations_id ON public.gmb_locations USING btree (id),16 kB,101831,966167,53274
--- INDEX ---,public,gmb_locations,idx_gmb_locations_is_syncing,CREATE INDEX idx_gmb_locations_is_syncing ON public.gmb_locations USING btree (is_syncing) WHERE (is_syncing = true),8192 bytes,2,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_last_synced_at,CREATE INDEX idx_gmb_locations_last_synced_at ON public.gmb_locations USING btree (last_synced_at),16 kB,2,38,3
--- INDEX ---,public,gmb_locations,idx_gmb_locations_latitude,CREATE INDEX idx_gmb_locations_latitude ON public.gmb_locations USING btree (latitude) WHERE (latitude IS NOT NULL),16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_location_id_external,CREATE INDEX idx_gmb_locations_location_id_external ON public.gmb_locations USING btree (location_id_external),16 kB,2,13,2
--- INDEX ---,public,gmb_locations,idx_gmb_locations_logo_url,CREATE INDEX idx_gmb_locations_logo_url ON public.gmb_locations USING btree (logo_url),16 kB,4,23,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_longitude,CREATE INDEX idx_gmb_locations_longitude ON public.gmb_locations USING btree (longitude) WHERE (longitude IS NOT NULL),16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_metadata,CREATE INDEX idx_gmb_locations_metadata ON public.gmb_locations USING gin (metadata),936 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_name_trgm,CREATE INDEX idx_gmb_locations_name_trgm ON public.gmb_locations USING gin (location_name gin_trgm_ops),144 kB,9,182,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_normalized_id,CREATE INDEX idx_gmb_locations_normalized_id ON public.gmb_locations USING btree (normalized_location_id),16 kB,2,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_profile_completeness,CREATE INDEX idx_gmb_locations_profile_completeness ON public.gmb_locations USING btree (profile_completeness) WHERE (profile_completeness IS NOT NULL),16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_rating,CREATE INDEX idx_gmb_locations_rating ON public.gmb_locations USING btree (rating),16 kB,2,24,2
--- INDEX ---,public,gmb_locations,idx_gmb_locations_response_rate,CREATE INDEX idx_gmb_locations_response_rate ON public.gmb_locations USING btree (response_rate DESC),16 kB,5,8,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_review_count,CREATE INDEX idx_gmb_locations_review_count ON public.gmb_locations USING btree (review_count DESC),16 kB,21,143,22
--- INDEX ---,public,gmb_locations,idx_gmb_locations_status,CREATE INDEX idx_gmb_locations_status ON public.gmb_locations USING btree (status) WHERE (status IS NOT NULL),16 kB,0,0,0
--- INDEX ---,public,gmb_locations,idx_gmb_locations_user,CREATE INDEX idx_gmb_locations_user ON public.gmb_locations USING btree (user_id),16 kB,9521,88599,463
--- INDEX ---,public,gmb_locations,idx_gmb_locations_user_account,"CREATE INDEX idx_gmb_locations_user_account ON public.gmb_locations USING btree (user_id, gmb_account_id)",16 kB,740,1076,625
--- INDEX ---,public,gmb_locations,idx_gmb_locations_user_active,"CREATE INDEX idx_gmb_locations_user_active ON public.gmb_locations USING btree (user_id, is_active) WHERE (is_active = true)",16 kB,504,3247,519
--- INDEX ---,public,gmb_locations,idx_gmb_locations_user_id,CREATE INDEX idx_gmb_locations_user_id ON public.gmb_locations USING btree (user_id),16 kB,739,711,361
--- INDEX ---,public,gmb_locations,unique_location_per_account_normalized,"CREATE UNIQUE INDEX unique_location_per_account_normalized ON public.gmb_locations USING btree (gmb_account_id, normalized_location_id)",16 kB,174,209,10
--- INDEX ---,public,gmb_media,gmb_media_external_media_id_key,CREATE UNIQUE INDEX gmb_media_external_media_id_key ON public.gmb_media USING btree (external_media_id),312 kB,99083,86110,83130
--- INDEX ---,public,gmb_media,gmb_media_external_uidx,CREATE UNIQUE INDEX gmb_media_external_uidx ON public.gmb_media USING btree (external_media_id),312 kB,14319,1416,0
--- INDEX ---,public,gmb_media,gmb_media_location_idx,CREATE INDEX gmb_media_location_idx ON public.gmb_media USING btree (location_id),48 kB,30,14262,8930
--- INDEX ---,public,gmb_media,gmb_media_pkey,CREATE UNIQUE INDEX gmb_media_pkey ON public.gmb_media USING btree (id),88 kB,16,1584,1500
--- INDEX ---,public,gmb_media,idx_gmb_media_account,CREATE INDEX idx_gmb_media_account ON public.gmb_media USING btree (gmb_account_id),40 kB,6,579,579
--- INDEX ---,public,gmb_media,idx_gmb_media_category,CREATE INDEX idx_gmb_media_category ON public.gmb_media USING btree (category) WHERE (category IS NOT NULL),16 kB,2,1,1
--- INDEX ---,public,gmb_media,idx_gmb_media_external_id,CREATE INDEX idx_gmb_media_external_id ON public.gmb_media USING btree (external_media_id),304 kB,0,0,0
--- INDEX ---,public,gmb_media,idx_gmb_media_gmb_account_id,CREATE INDEX idx_gmb_media_gmb_account_id ON public.gmb_media USING btree (gmb_account_id),40 kB,0,0,0
--- INDEX ---,public,gmb_media,idx_gmb_media_location,CREATE INDEX idx_gmb_media_location ON public.gmb_media USING btree (location_id),48 kB,20,3193,0
--- INDEX ---,public,gmb_media,idx_gmb_media_location_category,"CREATE INDEX idx_gmb_media_location_category ON public.gmb_media USING btree (location_id, category) WHERE (category IS NOT NULL)",32 kB,0,0,0
--- INDEX ---,public,gmb_media,idx_gmb_media_location_id,CREATE INDEX idx_gmb_media_location_id ON public.gmb_media USING btree (location_id),48 kB,1,100,100
--- INDEX ---,public,gmb_media,idx_gmb_media_unique,"CREATE UNIQUE INDEX idx_gmb_media_unique ON public.gmb_media USING btree (external_media_id, location_id)",376 kB,0,0,0
--- INDEX ---,public,gmb_media,idx_gmb_media_user,CREATE INDEX idx_gmb_media_user ON public.gmb_media USING btree (user_id),32 kB,19,3634,0
--- INDEX ---,public,gmb_media,idx_gmb_media_user_id,CREATE INDEX idx_gmb_media_user_id ON public.gmb_media USING btree (user_id),32 kB,461,166922,68974
--- INDEX ---,public,gmb_media,uidx_gmb_media_external,CREATE UNIQUE INDEX uidx_gmb_media_external ON public.gmb_media USING btree (external_media_id),312 kB,14319,1416,0
--- INDEX ---,public,gmb_metrics,gmb_metrics_account_phase_idx,"CREATE INDEX gmb_metrics_account_phase_idx ON public.gmb_metrics USING btree (gmb_account_id, phase)",16 kB,2464,2552,2429
--- INDEX ---,public,gmb_metrics,gmb_metrics_pkey,CREATE UNIQUE INDEX gmb_metrics_pkey ON public.gmb_metrics USING btree (id),16 kB,2429,2432,2429
--- INDEX ---,public,gmb_metrics,gmb_metrics_unique,"CREATE UNIQUE INDEX gmb_metrics_unique ON public.gmb_metrics USING btree (gmb_account_id, phase)",16 kB,0,0,0
--- INDEX ---,public,gmb_performance_metrics,gmb_perf_loc_date_idx,"CREATE INDEX gmb_perf_loc_date_idx ON public.gmb_performance_metrics USING btree (location_id, metric_date)",48 kB,1,214,0
--- INDEX ---,public,gmb_performance_metrics,gmb_perf_location_date_idx,"CREATE INDEX gmb_perf_location_date_idx ON public.gmb_performance_metrics USING btree (location_id, metric_date)",48 kB,0,0,0
--- INDEX ---,public,gmb_performance_metrics,gmb_performance_metrics_location_id_metric_date_metric_type_key,"CREATE UNIQUE INDEX gmb_performance_metrics_location_id_metric_date_metric_type_key ON public.gmb_performance_metrics USING btree (location_id, metric_date, metric_type)",128 kB,67428,59538,58750
--- INDEX ---,public,gmb_performance_metrics,gmb_performance_metrics_pkey,CREATE UNIQUE INDEX gmb_performance_metrics_pkey ON public.gmb_performance_metrics USING btree (id),56 kB,17,1422,1400
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_account,CREATE INDEX idx_gmb_performance_metrics_account ON public.gmb_performance_metrics USING btree (gmb_account_id),16 kB,8,189,189
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_date,CREATE INDEX idx_gmb_performance_metrics_date ON public.gmb_performance_metrics USING btree (metric_date DESC),16 kB,41,12378,11998
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_gmb_account_id,CREATE INDEX idx_gmb_performance_metrics_gmb_account_id ON public.gmb_performance_metrics USING btree (gmb_account_id),16 kB,0,0,0
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_location,CREATE INDEX idx_gmb_performance_metrics_location ON public.gmb_performance_metrics USING btree (location_id),16 kB,11,1850,1660
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_location_date,"CREATE INDEX idx_gmb_performance_metrics_location_date ON public.gmb_performance_metrics USING btree (location_id, metric_date DESC)",48 kB,124,4265,706
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_location_id,CREATE INDEX idx_gmb_performance_metrics_location_id ON public.gmb_performance_metrics USING btree (location_id),16 kB,19,6209,1351
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_type,CREATE INDEX idx_gmb_performance_metrics_type ON public.gmb_performance_metrics USING btree (metric_type),16 kB,125,0,0
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_user,CREATE INDEX idx_gmb_performance_metrics_user ON public.gmb_performance_metrics USING btree (user_id),16 kB,162,28983,4212
--- INDEX ---,public,gmb_performance_metrics,idx_gmb_performance_metrics_user_id,CREATE INDEX idx_gmb_performance_metrics_user_id ON public.gmb_performance_metrics USING btree (user_id),16 kB,31,2253,1179
--- INDEX ---,public,gmb_performance_metrics,uidx_gmb_perf_loc_date_type,"CREATE UNIQUE INDEX uidx_gmb_perf_loc_date_type ON public.gmb_performance_metrics USING btree (location_id, metric_date, metric_type)",128 kB,6908,0,0
--- INDEX ---,public,gmb_posts,gmb_posts_pkey,CREATE UNIQUE INDEX gmb_posts_pkey ON public.gmb_posts USING btree (id),8192 bytes,12,0,0
--- INDEX ---,public,gmb_posts,gmb_posts_post_id_key,CREATE UNIQUE INDEX gmb_posts_post_id_key ON public.gmb_posts USING btree (post_id),8192 bytes,0,0,0
--- INDEX ---,public,gmb_posts,gmb_posts_post_type_idx,"CREATE INDEX gmb_posts_post_type_idx ON public.gmb_posts USING btree (user_id, post_type)",8192 bytes,162,0,0
--- INDEX ---,public,gmb_posts,gmb_posts_user_loc_idx,"CREATE INDEX gmb_posts_user_loc_idx ON public.gmb_posts USING btree (user_id, location_id, status)",8192 bytes,45,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_archived,CREATE INDEX idx_gmb_posts_archived ON public.gmb_posts USING btree (is_archived) WHERE (is_archived = true),8192 bytes,0,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_loc,CREATE INDEX idx_gmb_posts_loc ON public.gmb_posts USING btree (location_id),8192 bytes,209,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_location_id,CREATE INDEX idx_gmb_posts_location_id ON public.gmb_posts USING btree (location_id),8192 bytes,86,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_location_status,"CREATE INDEX idx_gmb_posts_location_status ON public.gmb_posts USING btree (location_id, status)",8192 bytes,13,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_post_id,CREATE INDEX idx_gmb_posts_post_id ON public.gmb_posts USING btree (post_id),8192 bytes,1,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_post_type,CREATE INDEX idx_gmb_posts_post_type ON public.gmb_posts USING btree (post_type),8192 bytes,0,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_scheduled,CREATE INDEX idx_gmb_posts_scheduled ON public.gmb_posts USING btree (scheduled_at) WHERE ((scheduled_at IS NOT NULL) AND (status = 'queued'::text)),8192 bytes,0,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_stat,CREATE INDEX idx_gmb_posts_stat ON public.gmb_posts USING btree (status),8192 bytes,0,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_status,CREATE INDEX idx_gmb_posts_status ON public.gmb_posts USING btree (status),8192 bytes,4,0,0
--- INDEX ---,public,gmb_posts,idx_gmb_posts_user_id,CREATE INDEX idx_gmb_posts_user_id ON public.gmb_posts USING btree (user_id),8192 bytes,1279,0,0
--- INDEX ---,public,gmb_questions,gmb_questions_external_question_id_key,CREATE UNIQUE INDEX gmb_questions_external_question_id_key ON public.gmb_questions USING btree (external_question_id),16 kB,2781,2890,2273
--- INDEX ---,public,gmb_questions,gmb_questions_external_uidx,CREATE UNIQUE INDEX gmb_questions_external_uidx ON public.gmb_questions USING btree (external_question_id),16 kB,433,404,0
--- INDEX ---,public,gmb_questions,gmb_questions_location_idx,CREATE INDEX gmb_questions_location_idx ON public.gmb_questions USING btree (location_id),16 kB,3,30,20
--- INDEX ---,public,gmb_questions,gmb_questions_pkey,CREATE UNIQUE INDEX gmb_questions_pkey ON public.gmb_questions USING btree (id),16 kB,40,66,45
--- INDEX ---,public,gmb_questions,gmb_questions_question_id_key,CREATE UNIQUE INDEX gmb_questions_question_id_key ON public.gmb_questions USING btree (question_id),16 kB,51,10,10
--- INDEX ---,public,gmb_questions,idx_gmb_questions_account,CREATE INDEX idx_gmb_questions_account ON public.gmb_questions USING btree (gmb_account_id),16 kB,4,0,0
--- INDEX ---,public,gmb_questions,idx_gmb_questions_answer_status,CREATE INDEX idx_gmb_questions_answer_status ON public.gmb_questions USING btree (answer_status),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,idx_gmb_questions_archived,CREATE INDEX idx_gmb_questions_archived ON public.gmb_questions USING btree (is_archived) WHERE (is_archived = true),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,idx_gmb_questions_created,CREATE INDEX idx_gmb_questions_created ON public.gmb_questions USING btree (created_at DESC),16 kB,433,351,326
--- INDEX ---,public,gmb_questions,idx_gmb_questions_created_at,CREATE INDEX idx_gmb_questions_created_at ON public.gmb_questions USING btree (created_at DESC),16 kB,1151,1091,859
--- INDEX ---,public,gmb_questions,idx_gmb_questions_external_id,CREATE INDEX idx_gmb_questions_external_id ON public.gmb_questions USING btree (external_question_id),16 kB,3,0,0
--- INDEX ---,public,gmb_questions,idx_gmb_questions_gmb_account_id,CREATE INDEX idx_gmb_questions_gmb_account_id ON public.gmb_questions USING btree (gmb_account_id),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,idx_gmb_questions_loc,CREATE INDEX idx_gmb_questions_loc ON public.gmb_questions USING btree (location_id),16 kB,134,1715,1545
--- INDEX ---,public,gmb_questions,idx_gmb_questions_location,CREATE INDEX idx_gmb_questions_location ON public.gmb_questions USING btree (location_id),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,idx_gmb_questions_location_id,CREATE INDEX idx_gmb_questions_location_id ON public.gmb_questions USING btree (location_id),16 kB,20,229,155
--- INDEX ---,public,gmb_questions,idx_gmb_questions_question_id,CREATE INDEX idx_gmb_questions_question_id ON public.gmb_questions USING btree (question_id),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,idx_gmb_questions_status,CREATE INDEX idx_gmb_questions_status ON public.gmb_questions USING btree (answer_status),16 kB,302,453,445
--- INDEX ---,public,gmb_questions,idx_gmb_questions_unanswered,"CREATE INDEX idx_gmb_questions_unanswered ON public.gmb_questions USING btree (user_id, location_id) WHERE (answer_text IS NULL)",16 kB,47,288,276
--- INDEX ---,public,gmb_questions,idx_gmb_questions_user,CREATE INDEX idx_gmb_questions_user ON public.gmb_questions USING btree (user_id),16 kB,123,279,279
--- INDEX ---,public,gmb_questions,idx_gmb_questions_user_date,"CREATE INDEX idx_gmb_questions_user_date ON public.gmb_questions USING btree (user_id, created_at DESC, location_id)",16 kB,583,1865,1573
--- INDEX ---,public,gmb_questions,idx_gmb_questions_user_id,CREATE INDEX idx_gmb_questions_user_id ON public.gmb_questions USING btree (user_id),16 kB,442,4495,3813
--- INDEX ---,public,gmb_questions,idx_gmb_questions_user_location_answer,"CREATE INDEX idx_gmb_questions_user_location_answer ON public.gmb_questions USING btree (user_id, location_id, answer_text)",32 kB,76,880,538
--- INDEX ---,public,gmb_questions,idx_questions_asked_at,CREATE INDEX idx_questions_asked_at ON public.gmb_questions USING btree (asked_at DESC),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,idx_questions_priority,CREATE INDEX idx_questions_priority ON public.gmb_questions USING btree (priority),16 kB,1,23,9
--- INDEX ---,public,gmb_questions,idx_questions_question_id,CREATE INDEX idx_questions_question_id ON public.gmb_questions USING btree (question_id),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,idx_questions_status,CREATE INDEX idx_questions_status ON public.gmb_questions USING btree (status),16 kB,2,0,0
--- INDEX ---,public,gmb_questions,idx_questions_upvotes,CREATE INDEX idx_questions_upvotes ON public.gmb_questions USING btree (upvote_count DESC),16 kB,0,0,0
--- INDEX ---,public,gmb_questions,uidx_gmb_questions_external,CREATE UNIQUE INDEX uidx_gmb_questions_external ON public.gmb_questions USING btree (external_question_id),16 kB,433,404,0
--- INDEX ---,public,gmb_reviews,gmb_reviews_external_review_id_key,CREATE UNIQUE INDEX gmb_reviews_external_review_id_key ON public.gmb_reviews USING btree (external_review_id),104 kB,37625,32801,30502
--- INDEX ---,public,gmb_reviews,gmb_reviews_external_uidx,CREATE UNIQUE INDEX gmb_reviews_external_uidx ON public.gmb_reviews USING btree (external_review_id),104 kB,5328,1865,0
--- INDEX ---,public,gmb_reviews,gmb_reviews_location_idx,CREATE INDEX gmb_reviews_location_idx ON public.gmb_reviews USING btree (location_id),32 kB,0,0,0
--- INDEX ---,public,gmb_reviews,gmb_reviews_pkey,CREATE UNIQUE INDEX gmb_reviews_pkey ON public.gmb_reviews USING btree (id),56 kB,2716,9168,8386
--- INDEX ---,public,gmb_reviews,gmb_reviews_review_id_key,CREATE UNIQUE INDEX gmb_reviews_review_id_key ON public.gmb_reviews USING btree (review_id),32 kB,6,2808,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_account_id,CREATE INDEX idx_gmb_reviews_account_id ON public.gmb_reviews USING btree (account_id),32 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_ai_generated_at,CREATE INDEX idx_gmb_reviews_ai_generated_at ON public.gmb_reviews USING btree (ai_generated_at),32 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_ai_sentiment,CREATE INDEX idx_gmb_reviews_ai_sentiment ON public.gmb_reviews USING btree (ai_sentiment),32 kB,2,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_archived,"CREATE INDEX idx_gmb_reviews_archived ON public.gmb_reviews USING btree (is_archived, archived_at) WHERE (is_archived = true)",16 kB,24,336,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_auto_reply_status,CREATE INDEX idx_gmb_reviews_auto_reply_status ON public.gmb_reviews USING btree (auto_reply_status),32 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_created_at,CREATE INDEX idx_gmb_reviews_created_at ON public.gmb_reviews USING btree (created_at DESC),32 kB,667,56743,20238
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_external_id,CREATE INDEX idx_gmb_reviews_external_id ON public.gmb_reviews USING btree (external_review_id),120 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_gmb_account,CREATE INDEX idx_gmb_reviews_gmb_account ON public.gmb_reviews USING btree (gmb_account_id),32 kB,11,469,469
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_gmb_account_id,CREATE INDEX idx_gmb_reviews_gmb_account_id ON public.gmb_reviews USING btree (gmb_account_id),32 kB,1,412,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_has_reply,CREATE INDEX idx_gmb_reviews_has_reply ON public.gmb_reviews USING btree (has_reply),40 kB,114,1397,676
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_loc,CREATE INDEX idx_gmb_reviews_loc ON public.gmb_reviews USING btree (location_id),32 kB,5602,849394,780463
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_location,CREATE INDEX idx_gmb_reviews_location ON public.gmb_reviews USING btree (location_id),32 kB,1553,241829,236729
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_location_date,"CREATE INDEX idx_gmb_reviews_location_date ON public.gmb_reviews USING btree (location_id, review_date DESC)",104 kB,12,137,137
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_location_id,CREATE INDEX idx_gmb_reviews_location_id ON public.gmb_reviews USING btree (location_id),32 kB,482,89157,86856
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_location_status,"CREATE INDEX idx_gmb_reviews_location_status ON public.gmb_reviews USING btree (location_id, status) WHERE (status = ANY (ARRAY['new'::text, 'in_progress'::text]))",16 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_pending,"CREATE INDEX idx_gmb_reviews_pending ON public.gmb_reviews USING btree (user_id, location_id) WHERE ((review_reply IS NULL) OR (review_reply = ''::text))",16 kB,1,37,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_pending_auto_reply,"CREATE INDEX idx_gmb_reviews_pending_auto_reply ON public.gmb_reviews USING btree (user_id, has_reply, auto_reply_status) WHERE (has_reply = false)",16 kB,124,356,14
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_rate,CREATE INDEX idx_gmb_reviews_rate ON public.gmb_reviews USING btree (rating),32 kB,4,1680,120
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_rating,CREATE INDEX idx_gmb_reviews_rating ON public.gmb_reviews USING btree (rating),32 kB,4,20,20
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_reply_pending,"CREATE INDEX idx_gmb_reviews_reply_pending ON public.gmb_reviews USING btree (location_id, user_id) WHERE ((review_reply IS NULL) OR (review_reply = ''::text))",16 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_reply_timestamp,CREATE INDEX idx_gmb_reviews_reply_timestamp ON public.gmb_reviews USING btree (reply_timestamp),32 kB,1,714,412
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_review_date,CREATE INDEX idx_gmb_reviews_review_date ON public.gmb_reviews USING btree (review_date DESC) WHERE (review_date IS NOT NULL),56 kB,39,73,69
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_review_timestamp,CREATE INDEX idx_gmb_reviews_review_timestamp ON public.gmb_reviews USING btree (review_timestamp DESC),32 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_reviewer_name,CREATE INDEX idx_gmb_reviews_reviewer_name ON public.gmb_reviews USING btree (reviewer_name),72 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_sentiment,CREATE INDEX idx_gmb_reviews_sentiment ON public.gmb_reviews USING btree (ai_sentiment),32 kB,0,0,0
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_status,CREATE INDEX idx_gmb_reviews_status ON public.gmb_reviews USING btree (status),40 kB,9,1356,661
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_user,CREATE INDEX idx_gmb_reviews_user ON public.gmb_reviews USING btree (user_id),32 kB,4837,793696,316363
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_user_date,"CREATE INDEX idx_gmb_reviews_user_date ON public.gmb_reviews USING btree (user_id, review_date DESC, location_id)",128 kB,2064,399522,56710
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_user_id,CREATE INDEX idx_gmb_reviews_user_id ON public.gmb_reviews USING btree (user_id),32 kB,1800,188413,159826
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_user_location_date,"CREATE INDEX idx_gmb_reviews_user_location_date ON public.gmb_reviews USING btree (user_id, location_id, review_date DESC)",120 kB,6327,1356894,402215
--- INDEX ---,public,gmb_reviews,idx_gmb_reviews_user_status,"CREATE INDEX idx_gmb_reviews_user_status ON public.gmb_reviews USING btree (user_id, status)",40 kB,47,16674,370
--- INDEX ---,public,gmb_reviews,uidx_gmb_reviews_external,CREATE UNIQUE INDEX uidx_gmb_reviews_external ON public.gmb_reviews USING btree (external_review_id),104 kB,5262,1247,0
--- INDEX ---,public,gmb_search_keywords,gmb_keywords_loc_month_idx,"CREATE INDEX gmb_keywords_loc_month_idx ON public.gmb_search_keywords USING btree (location_id, month_year)",184 kB,2,457,0
--- INDEX ---,public,gmb_search_keywords,gmb_keywords_location_month_idx,"CREATE INDEX gmb_keywords_location_month_idx ON public.gmb_search_keywords USING btree (location_id, month_year)",184 kB,0,0,0
--- INDEX ---,public,gmb_search_keywords,gmb_search_keywords_location_id_search_keyword_month_year_key,"CREATE UNIQUE INDEX gmb_search_keywords_location_id_search_keyword_month_year_key ON public.gmb_search_keywords USING btree (location_id, search_keyword, month_year)",1080 kB,439511,413844,387343
--- INDEX ---,public,gmb_search_keywords,gmb_search_keywords_pkey,CREATE UNIQUE INDEX gmb_search_keywords_pkey ON public.gmb_search_keywords USING btree (id),312 kB,10,1022,1000
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_account,CREATE INDEX idx_gmb_search_keywords_account ON public.gmb_search_keywords USING btree (gmb_account_id),144 kB,5,359,359
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_gmb_account_id,CREATE INDEX idx_gmb_search_keywords_gmb_account_id ON public.gmb_search_keywords USING btree (gmb_account_id),144 kB,0,0,0
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_keyword,CREATE INDEX idx_gmb_search_keywords_keyword ON public.gmb_search_keywords USING btree (search_keyword),408 kB,0,0,0
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_location,CREATE INDEX idx_gmb_search_keywords_location ON public.gmb_search_keywords USING btree (location_id),160 kB,14,4721,348
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_location_id,CREATE INDEX idx_gmb_search_keywords_location_id ON public.gmb_search_keywords USING btree (location_id),160 kB,20,14068,12165
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_month,CREATE INDEX idx_gmb_search_keywords_month ON public.gmb_search_keywords USING btree (month_year DESC),112 kB,8,42808,207
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_user,CREATE INDEX idx_gmb_search_keywords_user ON public.gmb_search_keywords USING btree (user_id),144 kB,12,6785,2771
--- INDEX ---,public,gmb_search_keywords,idx_gmb_search_keywords_user_id,CREATE INDEX idx_gmb_search_keywords_user_id ON public.gmb_search_keywords USING btree (user_id),144 kB,24,19489,4113
--- INDEX ---,public,gmb_search_keywords,uidx_gmb_keywords_loc_term_month,"CREATE UNIQUE INDEX uidx_gmb_keywords_loc_term_month ON public.gmb_search_keywords USING btree (location_id, search_keyword, month_year)",1112 kB,41743,0,0
--- INDEX ---,public,gmb_sync_logs,gmb_sync_logs_pkey,CREATE UNIQUE INDEX gmb_sync_logs_pkey ON public.gmb_sync_logs USING btree (id),64 kB,1334,2124,2122
--- INDEX ---,public,gmb_sync_logs,idx_gmb_sync_logs_account_phase,"CREATE INDEX idx_gmb_sync_logs_account_phase ON public.gmb_sync_logs USING btree (gmb_account_id, phase)",32 kB,88,3265,3247
--- INDEX ---,public,gmb_sync_logs,idx_gmb_sync_logs_account_time,"CREATE INDEX idx_gmb_sync_logs_account_time ON public.gmb_sync_logs USING btree (gmb_account_id, started_at DESC)",96 kB,2014,254665,254192
--- INDEX ---,public,mv_location_stats,idx_mv_location_stats_id,CREATE UNIQUE INDEX idx_mv_location_stats_id ON public.mv_location_stats USING btree (id),16 kB,0,0,0
--- INDEX ---,public,mv_location_stats,idx_mv_location_stats_user_id,CREATE INDEX idx_mv_location_stats_user_id ON public.mv_location_stats USING btree (user_id),16 kB,0,0,0
--- INDEX ---,public,notifications,idx_notifications_created_at,CREATE INDEX idx_notifications_created_at ON public.notifications USING btree (created_at DESC),8192 bytes,2,0,0
--- INDEX ---,public,notifications,idx_notifications_location_id,CREATE INDEX idx_notifications_location_id ON public.notifications USING btree (location_id),8192 bytes,1,0,0
--- INDEX ---,public,notifications,idx_notifications_notification_type,CREATE INDEX idx_notifications_notification_type ON public.notifications USING btree (notification_type),8192 bytes,0,0,0
--- INDEX ---,public,notifications,idx_notifications_read,"CREATE INDEX idx_notifications_read ON public.notifications USING btree (user_id, read)",8192 bytes,36831,0,0
--- INDEX ---,public,notifications,idx_notifications_user_id,CREATE INDEX idx_notifications_user_id ON public.notifications USING btree (user_id),8192 bytes,1634,0,0
--- INDEX ---,public,notifications,idx_notifications_user_read,"CREATE INDEX idx_notifications_user_read ON public.notifications USING btree (user_id, read)",8192 bytes,825,0,0
--- INDEX ---,public,notifications,notifications_pkey,CREATE UNIQUE INDEX notifications_pkey ON public.notifications USING btree (id),8192 bytes,10,0,0
--- INDEX ---,public,oauth_states,idx_oauth_states_expires_at,CREATE INDEX idx_oauth_states_expires_at ON public.oauth_states USING btree (expires_at),16 kB,4,2,2
--- INDEX ---,public,oauth_states,idx_oauth_states_state,CREATE INDEX idx_oauth_states_state ON public.oauth_states USING btree (state),16 kB,256,257,256
--- INDEX ---,public,oauth_states,idx_oauth_states_used,CREATE INDEX idx_oauth_states_used ON public.oauth_states USING btree (used),16 kB,108,311,166
--- INDEX ---,public,oauth_states,idx_oauth_states_user_id,CREATE INDEX idx_oauth_states_user_id ON public.oauth_states USING btree (user_id),16 kB,13,94,69
--- INDEX ---,public,oauth_states,oauth_states_pkey,CREATE UNIQUE INDEX oauth_states_pkey ON public.oauth_states USING btree (id),16 kB,0,0,0
--- INDEX ---,public,oauth_states,oauth_states_state_key,CREATE UNIQUE INDEX oauth_states_state_key ON public.oauth_states USING btree (state),16 kB,0,0,0
--- INDEX ---,public,performance_metrics,idx_performance_metrics_name,CREATE INDEX idx_performance_metrics_name ON public.performance_metrics USING btree (name),8192 bytes,0,0,0
--- INDEX ---,public,performance_metrics,idx_performance_metrics_timestamp,"CREATE INDEX idx_performance_metrics_timestamp ON public.performance_metrics USING btree (""timestamp"")",8192 bytes,1,0,0
--- INDEX ---,public,performance_metrics,idx_performance_metrics_user_id,CREATE INDEX idx_performance_metrics_user_id ON public.performance_metrics USING btree (user_id),8192 bytes,15,0,0
--- INDEX ---,public,performance_metrics,performance_metrics_pkey,CREATE UNIQUE INDEX performance_metrics_pkey ON public.performance_metrics USING btree (id),8192 bytes,6,0,0
--- INDEX ---,public,profiles,idx_profiles_id,CREATE INDEX idx_profiles_id ON public.profiles USING btree (id),16 kB,3796,3955,2232
--- INDEX ---,public,profiles,idx_profiles_phone,CREATE INDEX idx_profiles_phone ON public.profiles USING btree (phone) WHERE (phone IS NOT NULL),16 kB,0,0,0
--- INDEX ---,public,profiles,idx_profiles_provider_sub,CREATE INDEX idx_profiles_provider_sub ON public.profiles USING btree (provider_sub),16 kB,20,297,18
--- INDEX ---,public,profiles,idx_profiles_user_id,CREATE INDEX idx_profiles_user_id ON public.profiles USING btree (user_id),16 kB,483,17,0
--- INDEX ---,public,profiles,profiles_email_key,CREATE UNIQUE INDEX profiles_email_key ON public.profiles USING btree (email),16 kB,4,7,6
--- INDEX ---,public,profiles,profiles_pkey,CREATE UNIQUE INDEX profiles_pkey ON public.profiles USING btree (id),16 kB,1350,1331,1307
--- INDEX ---,public,rate_limit_requests,idx_rate_limit_created_at,CREATE INDEX idx_rate_limit_created_at ON public.rate_limit_requests USING btree (created_at),8192 bytes,0,0,0
--- INDEX ---,public,rate_limit_requests,idx_rate_limit_endpoint,"CREATE INDEX idx_rate_limit_endpoint ON public.rate_limit_requests USING btree (endpoint, created_at)",8192 bytes,0,0,0
--- INDEX ---,public,rate_limit_requests,idx_rate_limit_user_action_time,"CREATE INDEX idx_rate_limit_user_action_time ON public.rate_limit_requests USING btree (user_id, action, created_at)",8192 bytes,15,0,0
--- INDEX ---,public,rate_limit_requests,idx_rate_limit_user_time,"CREATE INDEX idx_rate_limit_user_time ON public.rate_limit_requests USING btree (user_id, created_at)",8192 bytes,0,0,0
--- INDEX ---,public,rate_limit_requests,rate_limit_requests_pkey,CREATE UNIQUE INDEX rate_limit_requests_pkey ON public.rate_limit_requests USING btree (id),8192 bytes,3,0,0
--- INDEX ---,public,sync_status,idx_sync_status_account,"CREATE INDEX idx_sync_status_account ON public.sync_status USING btree (account_id, started_at DESC)",16 kB,0,0,0
--- INDEX ---,public,sync_status,idx_sync_status_status,CREATE INDEX idx_sync_status_status ON public.sync_status USING btree (status),16 kB,0,0,0
--- INDEX ---,public,sync_status,idx_sync_status_user,"CREATE INDEX idx_sync_status_user ON public.sync_status USING btree (user_id, started_at DESC)",16 kB,10,56,15
--- INDEX ---,public,sync_status,sync_status_pkey,CREATE UNIQUE INDEX sync_status_pkey ON public.sync_status USING btree (id),16 kB,12,35,35
--- INDEX ---,public,weekly_task_recommendations,idx_weekly_task_recommendations_user_id,CREATE INDEX idx_weekly_task_recommendations_user_id ON public.weekly_task_recommendations USING btree (user_id),16 kB,45,2,2
--- INDEX ---,public,weekly_task_recommendations,idx_weekly_tasks_user_id,CREATE INDEX idx_weekly_tasks_user_id ON public.weekly_task_recommendations USING btree (user_id),16 kB,0,0,0
--- INDEX ---,public,weekly_task_recommendations,idx_weekly_tasks_user_week_priority,"CREATE INDEX idx_weekly_tasks_user_week_priority ON public.weekly_task_recommendations USING btree (user_id, week_start_date DESC, priority, estimated_minutes)",16 kB,846,965,965
--- INDEX ---,public,weekly_task_recommendations,idx_weekly_tasks_user_week_status,"CREATE INDEX idx_weekly_tasks_user_week_status ON public.weekly_task_recommendations USING btree (user_id, week_start_date, status)",16 kB,0,0,0
--- INDEX ---,public,weekly_task_recommendations,idx_weekly_tasks_week_start,CREATE INDEX idx_weekly_tasks_week_start ON public.weekly_task_recommendations USING btree (week_start_date),16 kB,51,0,0
--- INDEX ---,public,weekly_task_recommendations,weekly_task_recommendations_pkey,CREATE UNIQUE INDEX weekly_task_recommendations_pkey ON public.weekly_task_recommendations USING btree (id),16 kB,0,0,0
separator,schema,view_name,view_definition,is_updatable,is_insertable_into,is_trigger_updatable,is_trigger_deletable,is_trigger_insertable_into
--- VIEW ---,public,gmb_locations_with_rating," SELECT l.id,
    l.gmb_account_id,
    l.user_id,
    l.location_id,
    l.location_name,
    l.address,
    l.phone,
    l.website,
    l.category,
    l.is_active,
    l.metadata,
    l.business_hours,
    l.created_at,
    l.updated_at,
    l.rating AS stored_rating,
    l.normalized_location_id,
    (COALESCE(avg(r.rating), (0)::numeric))::numeric(3,2) AS calculated_rating,
    (count(r.id))::integer AS reviews_count,
    max(r.created_at) AS last_review_date
   FROM (gmb_locations l
     LEFT JOIN gmb_reviews r ON ((r.location_id = l.id)))
  GROUP BY l.id, l.gmb_account_id, l.user_id, l.location_id, l.location_name, l.address, l.phone, l.website, l.category, l.is_active, l.metadata, l.business_hours, l.created_at, l.updated_at, l.rating, l.normalized_location_id;",NO,NO,NO,NO,NO
--- VIEW ---,public,notification_stats," SELECT user_id,
    count(*) FILTER (WHERE (read = false)) AS unread_count,
    count(*) FILTER (WHERE (read = true)) AS read_count,
    count(*) FILTER (WHERE (notification_type = 'NEW_REVIEW'::text)) AS new_reviews_count,
    count(*) FILTER (WHERE (notification_type = 'NEW_QUESTION'::text)) AS new_questions_count,
    count(*) FILTER (WHERE (notification_type = 'NEW_CUSTOMER_MEDIA'::text)) AS new_media_count,
    max(created_at) FILTER (WHERE (read = false)) AS latest_unread_at
   FROM notifications
  GROUP BY user_id;",NO,NO,NO,NO,NO
--- VIEW ---,public,review_stats_view," SELECT l.user_id,
    count(r.id) AS total_reviews,
    count(r.id) FILTER (WHERE ((r.has_reply = false) AND (r.reply_text IS NULL))) AS pending_reviews,
    count(r.id) FILTER (WHERE ((r.has_reply = true) OR (r.reply_text IS NOT NULL))) AS responded_reviews,
        CASE
            WHEN (count(r.id) > 0) THEN round((((count(r.id) FILTER (WHERE ((r.has_reply = true) OR (r.reply_text IS NOT NULL))))::numeric / (count(r.id))::numeric) * (100)::numeric), 1)
            ELSE (0)::numeric
        END AS response_rate,
    round(avg(r.rating), 1) AS avg_rating,
    count(r.id) FILTER (WHERE (r.rating >= 4)) AS positive_count,
    count(r.id) FILTER (WHERE (r.rating = 3)) AS neutral_count,
    count(r.id) FILTER (WHERE (r.rating <= 2)) AS negative_count
   FROM (gmb_locations l
     LEFT JOIN gmb_reviews r ON ((l.id = r.location_id)))
  GROUP BY l.user_id;",NO,NO,NO,NO,NO
--- VIEW ---,public,v_dashboard_stats," WITH location_stats AS (
         SELECT l.user_id,
            count(DISTINCT l.id) AS total_locations,
            sum(l.review_count) AS total_reviews_from_locations,
            avg(l.calculated_response_rate) AS avg_response_rate
           FROM gmb_locations l
          WHERE (l.is_active = true)
          GROUP BY l.user_id
        ), review_stats AS (
         SELECT r.user_id,
            count(DISTINCT r.id) AS total_reviews,
            avg(r.rating) FILTER (WHERE ((r.rating IS NOT NULL) AND (r.rating > 0))) AS avg_rating,
            count(DISTINCT r.id) FILTER (WHERE ((r.has_reply = false) OR (r.has_reply IS NULL))) AS pending_reviews,
            count(DISTINCT r.id) FILTER (WHERE (r.created_at > (now() - '7 days'::interval))) AS recent_reviews,
            count(DISTINCT r.id) FILTER (WHERE (r.has_reply = true)) AS replied_reviews
           FROM gmb_reviews r
          WHERE (r.rating IS NOT NULL)
          GROUP BY r.user_id
        ), question_stats AS (
         SELECT q.user_id,
            count(DISTINCT q.id) FILTER (WHERE ((q.answer_status = 'pending'::text) OR (q.answer_text IS NULL))) AS pending_questions
           FROM gmb_questions q
          GROUP BY q.user_id
        )
 SELECT COALESCE(ls.user_id, rs.user_id, qs.user_id) AS user_id,
    COALESCE(ls.total_locations, (0)::bigint) AS total_locations,
    COALESCE(rs.total_reviews, (0)::bigint) AS total_reviews,
    COALESCE(rs.avg_rating, (0)::numeric) AS avg_rating,
    COALESCE(rs.pending_reviews, (0)::bigint) AS pending_reviews,
    COALESCE(rs.replied_reviews, (0)::bigint) AS replied_reviews,
    COALESCE(qs.pending_questions, (0)::bigint) AS pending_questions,
    COALESCE(rs.recent_reviews, (0)::bigint) AS recent_reviews,
    COALESCE(ls.avg_response_rate, (0)::numeric) AS avg_response_rate,
        CASE
            WHEN (COALESCE(rs.total_reviews, (0)::bigint) > 0) THEN round((((COALESCE(rs.replied_reviews, (0)::bigint))::numeric / (rs.total_reviews)::numeric) * (100)::numeric), 2)
            ELSE (0)::numeric
        END AS calculated_response_rate
   FROM ((location_stats ls
     FULL JOIN review_stats rs ON ((ls.user_id = rs.user_id)))
     FULL JOIN question_stats qs ON ((COALESCE(ls.user_id, rs.user_id) = qs.user_id)));",NO,NO,NO,NO,NO
--- VIEW ---,public,v_error_summary," SELECT user_id,
    severity,
    count(*) AS error_count,
    count(
        CASE
            WHEN resolved THEN 1
            ELSE NULL::integer
        END) AS resolved_count,
    max(created_at) AS last_error
   FROM error_logs
  WHERE (created_at > (now() - '7 days'::interval))
  GROUP BY user_id, severity;",NO,NO,NO,NO,NO
--- VIEW ---,public,v_notification_summary," SELECT user_id,
    type,
    count(*) AS total_count,
    count(
        CASE
            WHEN (NOT read) THEN 1
            ELSE NULL::integer
        END) AS unread_count,
    max(created_at) AS last_notification
   FROM notifications
  WHERE (created_at > (now() - '30 days'::interval))
  GROUP BY user_id, type;",NO,NO,NO,NO,NO
--- VIEW ---,public,v_performance_summary," SELECT user_id,
    name,
    count(*) AS measurement_count,
    avg(value) AS avg_value,
    min(value) AS min_value,
    max(value) AS max_value,
    percentile_cont((0.5)::double precision) WITHIN GROUP (ORDER BY ((value)::double precision)) AS median_value,
    percentile_cont((0.95)::double precision) WITHIN GROUP (ORDER BY ((value)::double precision)) AS p95_value,
    max(""timestamp"") AS last_measured
   FROM performance_metrics
  WHERE (""timestamp"" > (now() - '24:00:00'::interval))
  GROUP BY user_id, name;",NO,NO,NO,NO,NO
separator,schema,function_name,arguments,return_type,volatility,kind,definition
--- FUNCTION ---,public,calculate_location_health_score,p_location_id uuid,integer,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.calculate_location_health_score(p_location_id uuid)
 RETURNS integer
 LANGUAGE plpgsql
 STABLE
AS $function$
        DECLARE
          v_score INTEGER := 0;
          v_profile_score INTEGER := 0;
          v_rating_score INTEGER := 0;
          v_loc RECORD;
        BEGIN
          -- Simplified version
          SELECT * INTO v_loc
          FROM public.gmb_locations
          WHERE id = p_location_id;
          
          IF NOT FOUND THEN
            RETURN 0;
          END IF;
          
          -- Basic scoring
          IF v_loc.location_name IS NOT NULL THEN
            v_profile_score := v_profile_score + 20;
          END IF;
          
          IF v_loc.rating IS NOT NULL THEN
            v_rating_score := ROUND((v_loc.rating / 5.0) * 20);
          END IF;
          
          v_score := v_profile_score + v_rating_score;
          
          -- Add response rate bonus
          IF v_loc.calculated_response_rate IS NOT NULL THEN
            v_score := v_score + ROUND((v_loc.calculated_response_rate / 100.0) * 30);
          END IF;
          
          -- Freshness bonus
          IF v_loc.updated_at > NOW() - INTERVAL '7 days' THEN
            v_score := v_score + 30;
          ELSIF v_loc.updated_at > NOW() - INTERVAL '30 days' THEN
            v_score := v_score + 20;
          END IF;
          
          RETURN GREATEST(0, LEAST(v_score, 100));
        END;
        $function$
"
--- FUNCTION ---,public,calculate_location_response_rate,p_location_id uuid,numeric,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.calculate_location_response_rate(p_location_id uuid)
 RETURNS numeric
 LANGUAGE plpgsql
 STABLE
AS $function$
        DECLARE
          v_total_reviews INTEGER;
          v_replied_reviews INTEGER;
          v_response_rate NUMERIC(5,2);
        BEGIN
          SELECT COUNT(*) INTO v_total_reviews
          FROM public.gmb_reviews
          WHERE location_id = p_location_id;
          
          IF v_total_reviews = 0 THEN
            RETURN 0;
          END IF;
          
          SELECT COUNT(*) INTO v_replied_reviews
          FROM public.gmb_reviews
          WHERE location_id = p_location_id
            AND has_reply = true;
          
          v_response_rate := (v_replied_reviews::NUMERIC / v_total_reviews::NUMERIC) * 100;
          
          RETURN ROUND(v_response_rate, 2);
        END;
        $function$
"
--- FUNCTION ---,public,calculate_user_response_rate,p_user_id uuid,numeric,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.calculate_user_response_rate(p_user_id uuid)
 RETURNS numeric
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
  location_ids UUID[];
BEGIN
  SELECT ARRAY_AGG(id) INTO location_ids
  FROM public.gmb_locations
  WHERE user_id = p_user_id
    AND is_active = true;
  
  IF location_ids IS NULL OR array_length(location_ids, 1) IS NULL THEN
    RETURN 0;
  END IF;
  
  RETURN calculate_weighted_response_rate(location_ids);
END;
$function$
"
--- FUNCTION ---,public,calculate_weighted_response_rate,location_ids uuid[],numeric,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.calculate_weighted_response_rate(location_ids uuid[])
 RETURNS numeric
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
  total_reviews INTEGER;
  total_replied INTEGER;
  response_rate NUMERIC(5,2);
BEGIN
  SELECT 
    COUNT(*),
    COUNT(*) FILTER (WHERE has_reply = true)
  INTO total_reviews, total_replied
  FROM public.gmb_reviews
  WHERE location_id = ANY(location_ids);
  
  IF total_reviews = 0 THEN
    RETURN 0;
  END IF;
  
  response_rate := (total_replied::NUMERIC / total_reviews::NUMERIC) * 100;
  RETURN ROUND(response_rate, 2);
END;
$function$
"
--- FUNCTION ---,public,clean_old_error_logs,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.clean_old_error_logs()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  -- Delete error logs older than 90 days
  DELETE FROM public.error_logs
  WHERE created_at < NOW() - INTERVAL '90 days'
  AND resolved = true;
  
  -- Delete info level logs older than 30 days
  DELETE FROM public.error_logs
  WHERE created_at < NOW() - INTERVAL '30 days'
  AND level = 'info';
  
  -- Delete warning level logs older than 60 days
  DELETE FROM public.error_logs
  WHERE created_at < NOW() - INTERVAL '60 days'
  AND level = 'warning';
END;
$function$
"
--- FUNCTION ---,public,cleanup_error_logs,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.cleanup_error_logs()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  DELETE FROM error_logs
  WHERE created_at < NOW() - INTERVAL '90 days'
  AND resolved = true;
END;
$function$
"
--- FUNCTION ---,public,cleanup_expired_oauth_states,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.cleanup_expired_oauth_states()
 RETURNS void
 LANGUAGE sql
 SET search_path TO 'public', 'pg_temp'
AS $function$
  DELETE FROM public.oauth_states WHERE expires_at IS NOT NULL AND expires_at < now();
$function$
"
--- FUNCTION ---,public,cleanup_old_activities,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.cleanup_old_activities()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  DELETE FROM activity_logs
  WHERE created_at < NOW() - INTERVAL '90 days';
END;
$function$
"
--- FUNCTION ---,public,cleanup_old_notifications,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.cleanup_old_notifications()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  DELETE FROM notifications
  WHERE created_at < NOW() - INTERVAL '90 days'
  AND read = true;
  
  RAISE NOTICE 'Cleaned up old read notifications';
END;
$function$
"
--- FUNCTION ---,public,cleanup_performance_metrics,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.cleanup_performance_metrics()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  DELETE FROM performance_metrics
  WHERE timestamp < NOW() - INTERVAL '30 days';
END;
$function$
"
--- FUNCTION ---,public,cleanup_rate_limit_requests,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.cleanup_rate_limit_requests()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  DELETE FROM rate_limit_requests
  WHERE created_at < NOW() - INTERVAL '1 hour';
END;
$function$
"
--- FUNCTION ---,public,create_default_client_profile,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.create_default_client_profile()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public'
AS $function$
BEGIN
  -- Insert default client profile for new user
  INSERT INTO public.client_profiles (user_id, brand_name, primary_color, secondary_color)
  VALUES (
    NEW.id,
    COALESCE(NEW.raw_user_meta_data->>'full_name', NEW.email, 'My Business'),
    '#FFA500',
    '#1A1A1A'
  )
  ON CONFLICT (user_id) DO NOTHING; -- Don't fail if profile already exists
  
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,create_notification,"p_user_id uuid, p_type text, p_title text, p_message text, p_link text DEFAULT NULL::text, p_metadata jsonb DEFAULT NULL::jsonb",uuid,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.create_notification(p_user_id uuid, p_type text, p_title text, p_message text, p_link text DEFAULT NULL::text, p_metadata jsonb DEFAULT NULL::jsonb)
 RETURNS uuid
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
  v_notification_id UUID;
BEGIN
  INSERT INTO notifications (user_id, type, title, message, link, metadata)
  VALUES (p_user_id, p_type, p_title, p_message, p_link, p_metadata)
  RETURNING id INTO v_notification_id;
  
  RETURN v_notification_id;
END;
$function$
"
--- FUNCTION ---,public,create_oauth_state,"p_user_id uuid, p_ttl_seconds integer DEFAULT 300",text,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.create_oauth_state(p_user_id uuid, p_ttl_seconds integer DEFAULT 300)
 RETURNS text
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
DECLARE
  v_state text := encode(gen_random_bytes(24), 'hex');
BEGIN
  INSERT INTO public.oauth_states(state, user_id, expires_at) VALUES (v_state, p_user_id, now() + (p_ttl_seconds || ' seconds')::interval);
  RETURN v_state;
END;
$function$
"
--- FUNCTION ---,public,decrypt_token,encrypted bytea,text,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.decrypt_token(encrypted bytea)
 RETURNS text
 LANGUAGE sql
 STABLE
 SET search_path TO 'public', 'pg_temp'
AS $function$
  SELECT pgp_sym_decrypt(encrypted, encode((SELECT key FROM public.secret_keys WHERE id='tokens_encryption'), 'hex'))::text;
$function$
"
--- FUNCTION ---,public,delete_all_users,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.delete_all_users()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  --      profiles
  DELETE FROM public.profiles;

  --       (auth)
  DELETE FROM auth.users;
END;
$function$
"
--- FUNCTION ---,public,encrypt_token,plaintext text,bytea,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.encrypt_token(plaintext text)
 RETURNS bytea
 LANGUAGE sql
 STABLE
 SET search_path TO 'public', 'pg_temp'
AS $function$
  SELECT pgp_sym_encrypt(plaintext::text, encode((SELECT key FROM public.secret_keys WHERE id='tokens_encryption'), 'hex'), 'cipher-algo=aes256');
$function$
"
--- FUNCTION ---,public,extract_sentiment_topics,analysis jsonb,text[],IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.extract_sentiment_topics(analysis jsonb)
 RETURNS text[]
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
DECLARE
  topics TEXT[] := '{}';
  topic JSONB;
BEGIN
  IF analysis IS NULL OR analysis->'topics' IS NULL THEN
    RETURN topics;
  END IF;
  
  FOR topic IN SELECT * FROM jsonb_array_elements(analysis->'topics')
  LOOP
    topics := array_append(topics, topic->>'topic');
  END LOOP;
  
  RETURN topics;
END;
$function$
"
--- FUNCTION ---,public,get_aspect_score,"analysis jsonb, aspect text",numeric,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_aspect_score(analysis jsonb, aspect text)
 RETURNS numeric
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
BEGIN
  IF analysis IS NULL OR analysis->'aspects' IS NULL THEN
    RETURN NULL;
  END IF;
  
  RETURN (analysis->'aspects'->>aspect)::NUMERIC;
END;
$function$
"
--- FUNCTION ---,public,get_dashboard_trends,"p_user_id uuid, p_days integer DEFAULT 30","TABLE(metric_name text, current_value numeric, previous_value numeric, change_value numeric, change_percentage numeric)",STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_dashboard_trends(p_user_id uuid, p_days integer DEFAULT 30)
 RETURNS TABLE(metric_name text, current_value numeric, previous_value numeric, change_value numeric, change_percentage numeric)
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
  v_current_period_start TIMESTAMP;
  v_previous_period_start TIMESTAMP;
  v_period_length INTERVAL;
BEGIN
  v_period_length := (p_days || ' days')::INTERVAL;
  v_current_period_start := NOW() - v_period_length;
  v_previous_period_start := v_current_period_start - v_period_length;
  
  RETURN QUERY
  WITH review_counts AS (
    SELECT
      COUNT(*) FILTER (WHERE r.review_date >= v_current_period_start) as current_reviews,
      COUNT(*) FILTER (WHERE r.review_date >= v_previous_period_start AND r.review_date < v_current_period_start) as previous_reviews
    FROM gmb_reviews r
    JOIN gmb_locations l ON r.location_id = l.id
    WHERE l.user_id = p_user_id AND l.is_active = true
  )
  SELECT 
    'reviews'::TEXT,
    current_reviews::NUMERIC,
    previous_reviews::NUMERIC,
    (current_reviews - previous_reviews)::NUMERIC,
    CASE 
      WHEN previous_reviews = 0 THEN 0
      ELSE ROUND(((current_reviews - previous_reviews)::NUMERIC / previous_reviews::NUMERIC) * 100, 1)
    END
  FROM review_counts;
END;
$function$
"
--- FUNCTION ---,public,get_decrypted_tokens,p_id uuid,"TABLE(access_token text, refresh_token text, expires_at timestamp with time zone)",VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_decrypted_tokens(p_id uuid)
 RETURNS TABLE(access_token text, refresh_token text, expires_at timestamp with time zone)
 LANGUAGE sql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
  SELECT public.decrypt_token(access_token_encrypted) AS access_token,
         public.decrypt_token(refresh_token_encrypted) AS refresh_token,
         expires_at
  FROM public.oauth_tokens WHERE id = p_id;
$function$
"
--- FUNCTION ---,public,get_location_trends,"p_location_id uuid, p_days integer DEFAULT 30","TABLE(metric_name text, current_value numeric, previous_value numeric, change_value numeric, change_percentage numeric)",STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_location_trends(p_location_id uuid, p_days integer DEFAULT 30)
 RETURNS TABLE(metric_name text, current_value numeric, previous_value numeric, change_value numeric, change_percentage numeric)
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
  v_current_period_start TIMESTAMP;
  v_previous_period_start TIMESTAMP;
  v_period_length INTERVAL;
BEGIN
  v_period_length := (p_days || ' days')::INTERVAL;
  v_current_period_start := NOW() - v_period_length;
  v_previous_period_start := v_current_period_start - v_period_length;
  
  RETURN QUERY
  WITH location_reviews AS (
    SELECT
      COUNT(*) FILTER (WHERE review_date >= v_current_period_start) as current_reviews,
      COUNT(*) FILTER (WHERE review_date >= v_previous_period_start AND review_date < v_current_period_start) as previous_reviews,
      AVG(rating) FILTER (WHERE review_date >= v_current_period_start) as current_rating,
      AVG(rating) FILTER (WHERE review_date >= v_previous_period_start AND review_date < v_current_period_start) as previous_rating
    FROM gmb_reviews
    WHERE location_id = p_location_id
  )
  SELECT 
    'reviews'::TEXT,
    lr.current_reviews::NUMERIC,
    lr.previous_reviews::NUMERIC,
    (lr.current_reviews - lr.previous_reviews)::NUMERIC,
    CASE 
      WHEN lr.previous_reviews = 0 THEN 0
      ELSE ROUND(((lr.current_reviews - lr.previous_reviews)::NUMERIC / lr.previous_reviews::NUMERIC) * 100, 1)
    END
  FROM location_reviews lr;
END;
$function$
"
--- FUNCTION ---,public,get_profile_history_with_diff,p_location_id uuid,"TABLE(id uuid, operation_type text, created_at timestamp with time zone, created_by uuid, changes jsonb, previous_values jsonb, current_values jsonb)",STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_profile_history_with_diff(p_location_id uuid)
 RETURNS TABLE(id uuid, operation_type text, created_at timestamp with time zone, created_by uuid, changes jsonb, previous_values jsonb, current_values jsonb)
 LANGUAGE plpgsql
 STABLE
AS $function$
BEGIN
  RETURN QUERY
  WITH ordered_history AS (
    SELECT 
      h.*,
      LAG(h.data) OVER (PARTITION BY h.location_id ORDER BY h.created_at) as prev_data
    FROM public.business_profile_history h
    WHERE h.location_id = p_location_id
  )
  SELECT 
    oh.id,
    oh.operation_type,
    oh.created_at,
    oh.created_by,
    CASE 
      WHEN oh.prev_data IS NULL THEN oh.data
      ELSE jsonb_diff(oh.prev_data, oh.data)
    END as changes,
    oh.prev_data as previous_values,
    oh.data as current_values
  FROM ordered_history oh
  ORDER BY oh.created_at DESC;
END;
$function$
"
--- FUNCTION ---,public,get_review_stats,p_user_id uuid,"TABLE(total_reviews bigint, pending_reviews bigint, responded_reviews bigint, response_rate numeric, avg_rating numeric, positive_count bigint, neutral_count bigint, negative_count bigint)",VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_review_stats(p_user_id uuid)
 RETURNS TABLE(total_reviews bigint, pending_reviews bigint, responded_reviews bigint, response_rate numeric, avg_rating numeric, positive_count bigint, neutral_count bigint, negative_count bigint)
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  RETURN QUERY
  SELECT 
    COUNT(*)::BIGINT as total_reviews,
    COUNT(*) FILTER (WHERE r.has_reply = false AND r.reply_text IS NULL)::BIGINT as pending_reviews,
    COUNT(*) FILTER (WHERE r.has_reply = true OR r.reply_text IS NOT NULL)::BIGINT as responded_reviews,
    CASE 
      WHEN COUNT(*) > 0 THEN 
        ROUND(
          (COUNT(*) FILTER (WHERE r.has_reply = true OR r.reply_text IS NOT NULL)::NUMERIC / COUNT(*)::NUMERIC) * 100, 
          1
        )
      ELSE 0 
    END as response_rate,
    ROUND(AVG(r.rating), 1) as avg_rating,
    COUNT(*) FILTER (WHERE r.rating >= 4)::BIGINT as positive_count,
    COUNT(*) FILTER (WHERE r.rating = 3)::BIGINT as neutral_count,
    COUNT(*) FILTER (WHERE r.rating <= 2)::BIGINT as negative_count
  FROM gmb_reviews r
  INNER JOIN gmb_locations l ON r.location_id = l.id
  WHERE l.user_id = p_user_id;
END;
$function$
"
--- FUNCTION ---,public,get_unread_notifications_by_type,p_user_id uuid,"TABLE(notification_type text, count bigint)",VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_unread_notifications_by_type(p_user_id uuid)
 RETURNS TABLE(notification_type text, count bigint)
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  RETURN QUERY
  SELECT 
    n.notification_type,
    COUNT(*)::BIGINT
  FROM notifications n
  WHERE n.user_id = p_user_id
  AND n.read = false
  AND n.notification_type IS NOT NULL
  GROUP BY n.notification_type
  ORDER BY COUNT(*) DESC;
END;
$function$
"
--- FUNCTION ---,public,get_unread_notifications_count,p_user_id uuid,integer,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.get_unread_notifications_count(p_user_id uuid)
 RETURNS integer
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  RETURN (SELECT COUNT(*)::integer FROM public.notifications WHERE user_id = p_user_id AND read = false);
END; $function$
"
--- FUNCTION ---,public,gin_extract_query_trgm,"text, internal, smallint, internal, internal, internal, internal",internal,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gin_extract_query_trgm(text, internal, smallint, internal, internal, internal, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gin_extract_query_trgm$function$
"
--- FUNCTION ---,public,gin_extract_value_trgm,"text, internal",internal,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gin_extract_value_trgm(text, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gin_extract_value_trgm$function$
"
--- FUNCTION ---,public,gin_trgm_consistent,"internal, smallint, text, integer, internal, internal, internal, internal",boolean,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gin_trgm_consistent(internal, smallint, text, integer, internal, internal, internal, internal)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gin_trgm_consistent$function$
"
--- FUNCTION ---,public,gin_trgm_triconsistent,"internal, smallint, text, integer, internal, internal, internal","""char""",IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gin_trgm_triconsistent(internal, smallint, text, integer, internal, internal, internal)
 RETURNS ""char""
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gin_trgm_triconsistent$function$
"
--- FUNCTION ---,public,gtrgm_compress,internal,internal,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_compress(internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_compress$function$
"
--- FUNCTION ---,public,gtrgm_consistent,"internal, text, smallint, oid, internal",boolean,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_consistent(internal, text, smallint, oid, internal)
 RETURNS boolean
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_consistent$function$
"
--- FUNCTION ---,public,gtrgm_decompress,internal,internal,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_decompress(internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_decompress$function$
"
--- FUNCTION ---,public,gtrgm_distance,"internal, text, smallint, oid, internal",double precision,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_distance(internal, text, smallint, oid, internal)
 RETURNS double precision
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_distance$function$
"
--- FUNCTION ---,public,gtrgm_in,cstring,gtrgm,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_in(cstring)
 RETURNS gtrgm
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_in$function$
"
--- FUNCTION ---,public,gtrgm_options,internal,void,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_options(internal)
 RETURNS void
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE
AS '$libdir/pg_trgm', $function$gtrgm_options$function$
"
--- FUNCTION ---,public,gtrgm_out,gtrgm,cstring,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_out(gtrgm)
 RETURNS cstring
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_out$function$
"
--- FUNCTION ---,public,gtrgm_penalty,"internal, internal, internal",internal,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_penalty(internal, internal, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_penalty$function$
"
--- FUNCTION ---,public,gtrgm_picksplit,"internal, internal",internal,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_picksplit(internal, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_picksplit$function$
"
--- FUNCTION ---,public,gtrgm_same,"gtrgm, gtrgm, internal",internal,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_same(gtrgm, gtrgm, internal)
 RETURNS internal
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_same$function$
"
--- FUNCTION ---,public,gtrgm_union,"internal, internal",gtrgm,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.gtrgm_union(internal, internal)
 RETURNS gtrgm
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$gtrgm_union$function$
"
--- FUNCTION ---,public,handle_new_user,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.handle_new_user()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  -- Insert profile, handling both email and phone signups
  INSERT INTO public.profiles (id, email, full_name, phone, user_id, created_at, updated_at)
  VALUES (
    new.id,
    new.email, -- Can be NULL for phone signups
    COALESCE(
      new.raw_user_meta_data->>'full_name',
      new.email,
      new.phone,
      'User'
    ), -- Use phone as fallback for full_name
    new.phone, -- Can be NULL for email signups
    new.id, -- user_id should match id
    NOW(),
    NOW()
  )
  ON CONFLICT (id) DO UPDATE
  SET 
    email = COALESCE(EXCLUDED.email, profiles.email),
    full_name = COALESCE(EXCLUDED.full_name, profiles.full_name),
    phone = COALESCE(EXCLUDED.phone, profiles.phone),
    user_id = COALESCE(EXCLUDED.user_id, profiles.user_id),
    updated_at = NOW();
  
  RETURN new;
EXCEPTION
  WHEN others THEN
    -- Log error but don't fail user creation
    RAISE WARNING 'Error creating profile for user %: %', new.id, SQLERRM;
    RETURN new;
END;
$function$
"
--- FUNCTION ---,public,join_room,p_room_id uuid,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.join_room(p_room_id uuid)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public'
AS $function$
DECLARE
  v_user uuid := auth.uid();
BEGIN
  IF v_user IS NULL THEN
    RAISE EXCEPTION 'Unauthorized';
  END IF;
  INSERT INTO public.room_members(user_id, room_id)
  VALUES (v_user, p_room_id)
  ON CONFLICT (user_id, room_id) DO NOTHING;
END;
$function$
"
--- FUNCTION ---,public,jsonb_diff,"old_val jsonb, new_val jsonb",jsonb,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.jsonb_diff(old_val jsonb, new_val jsonb)
 RETURNS jsonb
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
DECLARE
  result JSONB := '{}';
  k TEXT;
  v JSONB;
BEGIN
  -- Find keys that exist in new but not in old, or have different values
  FOR k, v IN SELECT * FROM jsonb_each(new_val)
  LOOP
    IF NOT old_val ? k OR old_val->k != v THEN
      result := result || jsonb_build_object(
        k, jsonb_build_object(
          'old', COALESCE(old_val->k, 'null'::jsonb),
          'new', v
        )
      );
    END IF;
  END LOOP;
  
  -- Find keys that exist in old but not in new (deletions)
  FOR k IN SELECT jsonb_object_keys(old_val)
  LOOP
    IF NOT new_val ? k THEN
      result := result || jsonb_build_object(
        k, jsonb_build_object(
          'old', old_val->k,
          'new', 'null'::jsonb,
          'deleted', true
        )
      );
    END IF;
  END LOOP;
  
  RETURN result;
END;
$function$
"
--- FUNCTION ---,public,leave_room,p_room_id uuid,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.leave_room(p_room_id uuid)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public'
AS $function$
DECLARE
  v_user uuid := auth.uid();
BEGIN
  IF v_user IS NULL THEN
    RAISE EXCEPTION 'Unauthorized';
  END IF;
  DELETE FROM public.room_members
  WHERE user_id = v_user AND room_id = p_room_id;
END;
$function$
"
--- FUNCTION ---,public,link_gmb_locations_accounts,p_user_id uuid,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.link_gmb_locations_accounts(p_user_id uuid)
 RETURNS void
 LANGUAGE plpgsql
AS $function$
BEGIN
  -- Fill account_id for locations where it's null using local account PK
  UPDATE public.gmb_locations l
  SET account_id = a.id
  FROM public.gmb_accounts a
  WHERE l.gmb_account_id = a.id
    AND (l.account_id IS NULL OR l.account_id <> a.id)
    AND a.user_id = p_user_id;

  -- Ensure user_id is set correctly
  UPDATE public.gmb_locations l
  SET user_id = a.user_id
  FROM public.gmb_accounts a
  WHERE l.gmb_account_id = a.id
    AND (l.user_id IS NULL OR l.user_id <> a.user_id)
    AND a.user_id = p_user_id;

  -- Ensure is_active true for linked locations
  UPDATE public.gmb_locations l
  SET is_active = TRUE
  FROM public.gmb_accounts a
  WHERE l.gmb_account_id = a.id
    AND a.user_id = p_user_id
    AND l.is_active IS DISTINCT FROM TRUE;
END;
$function$
"
--- FUNCTION ---,public,log_error,"p_user_id uuid, p_message text, p_stack text DEFAULT NULL::text, p_context jsonb DEFAULT NULL::jsonb, p_severity integer DEFAULT 1",uuid,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.log_error(p_user_id uuid, p_message text, p_stack text DEFAULT NULL::text, p_context jsonb DEFAULT NULL::jsonb, p_severity integer DEFAULT 1)
 RETURNS uuid
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
  v_error_id UUID;
BEGIN
  INSERT INTO error_logs (user_id, message, stack, context, severity)
  VALUES (p_user_id, p_message, p_stack, p_context, p_severity)
  RETURNING id INTO v_error_id;
  
  RETURN v_error_id;
END;
$function$
"
--- FUNCTION ---,public,log_post_activity,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.log_post_activity()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  IF TG_OP = 'INSERT' THEN
    INSERT INTO activity_logs (user_id, activity_type, activity_message, created_at)
    VALUES (
      NEW.user_id,
      'post_published',
      'Published new post: ' || LEFT(COALESCE(NEW.summary, 'Post'), 50),
      NEW.created_at
    );
  END IF;
  
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,log_question_activity,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.log_question_activity()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  -- Log new question
  IF TG_OP = 'INSERT' THEN
    INSERT INTO activity_logs (user_id, activity_type, activity_message, created_at)
    VALUES (
      NEW.user_id,
      'question_received',
      'New question received: ' || LEFT(COALESCE(NEW.question_text, 'Question'), 50),
      NEW.created_at
    );
  END IF;
  
  -- Log question answer
  IF TG_OP = 'UPDATE' AND OLD.answer_text IS NULL AND NEW.answer_text IS NOT NULL THEN
    INSERT INTO activity_logs (user_id, activity_type, activity_message, created_at)
    VALUES (
      NEW.user_id,
      'question_answered',
      'Answered a customer question',
      NOW()
    );
  END IF;
  
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,log_review_activity,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.log_review_activity()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  -- Log new review
  IF TG_OP = 'INSERT' THEN
    INSERT INTO activity_logs (user_id, activity_type, activity_message, created_at)
    VALUES (
      NEW.user_id,
      'review_received',
      'New review received: ' || COALESCE(NEW.rating::text, '0') || ' stars from ' || COALESCE(NEW.reviewer_name, 'Anonymous'),
      NEW.created_at
    );
  END IF;
  
  -- Log review reply
  IF TG_OP = 'UPDATE' AND OLD.reply_text IS NULL AND NEW.reply_text IS NOT NULL THEN
    INSERT INTO activity_logs (user_id, activity_type, activity_message, created_at)
    VALUES (
      NEW.user_id,
      'review_responded',
      'Replied to review from ' || COALESCE(NEW.reviewer_name, 'Anonymous'),
      NOW()
    );
  END IF;
  
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,maintain_review_reply_consistency,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.maintain_review_reply_consistency()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.has_reply := (NEW.reply_text IS NOT NULL AND NEW.reply_text != '');
  
  IF NEW.reply_text IS NOT NULL AND NEW.replied_at IS NULL THEN
    NEW.replied_at := NOW();
  END IF;
  
  IF NEW.reply_text IS NULL OR NEW.reply_text = '' THEN
    NEW.replied_at := NULL;
  END IF;
  
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,moddatetime,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.moddatetime()
 RETURNS trigger
 LANGUAGE plpgsql
 SET search_path TO 'public', 'pg_temp'
AS $function$
begin
  new.updated_at = now();
  return new;
end;
$function$
"
--- FUNCTION ---,public,normalize_location_id,location_id_text text,text,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.normalize_location_id(location_id_text text)
 RETURNS text
 LANGUAGE plpgsql
 IMMUTABLE
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  RETURN CASE 
    WHEN location_id_text LIKE 'locations/%' THEN 
      SUBSTRING(location_id_text FROM 'locations/([^/]+)$')
    WHEN location_id_text LIKE 'accounts/%/locations/%' THEN 
      SUBSTRING(location_id_text FROM 'locations/([^/]+)$')
    ELSE location_id_text
  END;
END; $function$
"
--- FUNCTION ---,public,notify_new_question,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.notify_new_question()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  PERFORM create_notification(
    NEW.user_id,
    'question',
    'New Question Asked',
    'A customer has asked a new question',
    '/dashboard/questions?id=' || NEW.id::text,
    jsonb_build_object('question_id', NEW.id)
  );
  RETURN NEW;
EXCEPTION WHEN OTHERS THEN
  -- Don't fail the insert if notification fails
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,notify_new_review,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.notify_new_review()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  PERFORM create_notification(
    NEW.user_id,
    'review',
    'New Review Received',
    'You have received a new ' || NEW.rating || '-star review',
    '/dashboard/reviews?id=' || NEW.id::text,
    jsonb_build_object('review_id', NEW.id, 'rating', NEW.rating)
  );
  RETURN NEW;
EXCEPTION WHEN OTHERS THEN
  -- Don't fail the insert if notification fails
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,oauth_states_set_expiry,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.oauth_states_set_expiry()
 RETURNS trigger
 LANGUAGE plpgsql
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
IF NEW.expires_at IS NULL THEN
NEW.expires_at := now() + interval '15 minutes';
END IF;
RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,pgaudit_ddl_command_end,,event_trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.pgaudit_ddl_command_end()
 RETURNS event_trigger
 LANGUAGE c
 SECURITY DEFINER
 SET search_path TO 'pg_catalog, pg_temp'
AS '$libdir/pgaudit', $function$pgaudit_ddl_command_end$function$
"
--- FUNCTION ---,public,pgaudit_sql_drop,,event_trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.pgaudit_sql_drop()
 RETURNS event_trigger
 LANGUAGE c
 SECURITY DEFINER
 SET search_path TO 'pg_catalog, pg_temp'
AS '$libdir/pgaudit', $function$pgaudit_sql_drop$function$
"
--- FUNCTION ---,public,record_profile_changes,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.record_profile_changes()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
BEGIN
  IF TG_TABLE_NAME != 'gmb_locations' THEN
    RETURN NEW;
  END IF;

  IF TG_OP = 'UPDATE' AND OLD IS DISTINCT FROM NEW THEN
    INSERT INTO public.business_profile_history (
      location_id,
      location_name,
      operation_type,
      data,
      metadata,
      created_by
    )
    VALUES (
      NEW.id,
      NEW.location_name,
      'update',
      jsonb_build_object(
        'metadata', NEW.metadata,
        'description', NEW.description,
        'phone', NEW.phone,
        'website', NEW.website,
        'address', NEW.address,
        'business_hours', NEW.business_hours
      ),
      jsonb_build_object(
        'automatic', true,
        'trigger', 'record_profile_changes'
      ),
      auth.uid()
    );
  END IF;

  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,rollback_profile_to_history,"p_history_id uuid, p_user_id uuid",jsonb,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.rollback_profile_to_history(p_history_id uuid, p_user_id uuid)
 RETURNS jsonb
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_history RECORD;
BEGIN
  SELECT * INTO v_history
  FROM public.business_profile_history
  WHERE id = p_history_id;

  IF NOT FOUND THEN
    RETURN jsonb_build_object('success', false, 'error', 'History record not found');
  END IF;

  IF NOT EXISTS (
    SELECT 1 FROM public.gmb_locations
    WHERE id = v_history.location_id
      AND user_id = p_user_id
  ) THEN
    RETURN jsonb_build_object('success', false, 'error', 'Access denied');
  END IF;

  INSERT INTO public.business_profile_history (
    location_id,
    location_name,
    operation_type,
    data,
    created_by,
    metadata
  )
  SELECT
    id,
    location_name,
    'rollback',
    jsonb_build_object(
      'metadata', metadata,
      'description', description,
      'phone', phone,
      'website', website,
      'address', address,
      'business_hours', business_hours
    ),
    p_user_id,
    jsonb_build_object('rollback_to', p_history_id)
  FROM public.gmb_locations
  WHERE id = v_history.location_id;

  UPDATE public.gmb_locations
  SET
    metadata = COALESCE((v_history.data->>'metadata')::jsonb, metadata),
    description = COALESCE(v_history.data->>'description', description),
    phone = COALESCE(v_history.data->>'phone', phone),
    website = COALESCE(v_history.data->>'website', website),
    address = COALESCE((v_history.data->>'address')::jsonb, address),
    business_hours = COALESCE((v_history.data->>'business_hours')::jsonb, business_hours),
    updated_at = NOW()
  WHERE id = v_history.location_id;

  RETURN jsonb_build_object(
    'success', true,
    'message', 'Profile rolled back successfully',
    'history_id', p_history_id
  );
EXCEPTION
  WHEN OTHERS THEN
    RETURN jsonb_build_object('success', false, 'error', SQLERRM);
END;
$function$
"
--- FUNCTION ---,public,set_current_timestamp_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.set_current_timestamp_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,set_limit,real,real,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.set_limit(real)
 RETURNS real
 LANGUAGE c
 STRICT
AS '$libdir/pg_trgm', $function$set_limit$function$
"
--- FUNCTION ---,public,set_sync_status_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.set_sync_status_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
begin
  new.updated_at = now();
  return new;
end;
$function$
"
--- FUNCTION ---,public,set_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.set_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,set_weekly_task_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.set_weekly_task_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,show_limit,,real,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.show_limit()
 RETURNS real
 LANGUAGE c
 STABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$show_limit$function$
"
--- FUNCTION ---,public,show_trgm,text,text[],IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.show_trgm(text)
 RETURNS text[]
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$show_trgm$function$
"
--- FUNCTION ---,public,similarity,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.similarity(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$similarity$function$
"
--- FUNCTION ---,public,similarity_dist,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.similarity_dist(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$similarity_dist$function$
"
--- FUNCTION ---,public,similarity_op,"text, text",boolean,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.similarity_op(text, text)
 RETURNS boolean
 LANGUAGE c
 STABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$similarity_op$function$
"
--- FUNCTION ---,public,strict_word_similarity,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.strict_word_similarity(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$strict_word_similarity$function$
"
--- FUNCTION ---,public,strict_word_similarity_commutator_op,"text, text",boolean,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.strict_word_similarity_commutator_op(text, text)
 RETURNS boolean
 LANGUAGE c
 STABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$strict_word_similarity_commutator_op$function$
"
--- FUNCTION ---,public,strict_word_similarity_dist_commutator_op,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.strict_word_similarity_dist_commutator_op(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$strict_word_similarity_dist_commutator_op$function$
"
--- FUNCTION ---,public,strict_word_similarity_dist_op,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.strict_word_similarity_dist_op(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$strict_word_similarity_dist_op$function$
"
--- FUNCTION ---,public,strict_word_similarity_op,"text, text",boolean,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.strict_word_similarity_op(text, text)
 RETURNS boolean
 LANGUAGE c
 STABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$strict_word_similarity_op$function$
"
--- FUNCTION ---,public,track_performance,"p_user_id uuid, p_name text, p_value numeric, p_metadata jsonb DEFAULT NULL::jsonb",uuid,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.track_performance(p_user_id uuid, p_name text, p_value numeric, p_metadata jsonb DEFAULT NULL::jsonb)
 RETURNS uuid
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
  v_metric_id UUID;
BEGIN
  INSERT INTO performance_metrics (user_id, name, value, metadata)
  VALUES (p_user_id, p_name, p_value, p_metadata)
  RETURNING id INTO v_metric_id;
  
  RETURN v_metric_id;
END;
$function$
"
--- FUNCTION ---,public,trigger_gmb_sync,,void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.trigger_gmb_sync()
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
DECLARE
  project_ref TEXT := 'rrarhekwhgpgkakqrlyn'; --   ID   Supabase
  trigger_secret TEXT;
  edge_function_url TEXT;
BEGIN
  --    
  SELECT value INTO trigger_secret FROM system_settings WHERE key = 'trigger_secret';

  IF trigger_secret IS NULL THEN
    RAISE EXCEPTION 'trigger_secret is missing from system_settings';
  END IF;

  edge_function_url := 'https://' || project_ref || '.supabase.co/functions/v1/gmb-sync-trigger';

  --   POST  Edge Function
  PERFORM net.http_post(
    url := edge_function_url,
    headers := jsonb_build_object(
      'X-Trigger-Secret', trigger_secret,
      'Content-Type', 'application/json'
    ),
    body := jsonb_build_object('manual', true)
  );

  RAISE NOTICE ' GMB sync triggered successfully via gmb-sync-trigger Edge Function';
END;
$function$
"
--- FUNCTION ---,public,update_auto_reply_settings_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_auto_reply_settings_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,update_client_profiles_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_client_profiles_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,update_gmb_attributes_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_gmb_attributes_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  NEW.updated_at := NOW();
  RETURN NEW;
END; $function$
"
--- FUNCTION ---,public,update_gmb_questions_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_gmb_questions_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  NEW.updated_at := NOW();
  RETURN NEW;
END; $function$
"
--- FUNCTION ---,public,update_gmb_reviews_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_gmb_reviews_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,update_last_login,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_last_login()
 RETURNS trigger
 LANGUAGE plpgsql
 SET search_path TO 'public', 'pg_temp'
AS $function$
begin
  update profiles
  set updated_at = now()
  where id = new.user_id;
  return new;
end;
$function$
"
--- FUNCTION ---,public,update_location_review_stats,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_location_review_stats()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  --   
  UPDATE gmb_locations
  SET review_count = (
    SELECT COUNT(*)
    FROM gmb_reviews
    WHERE location_id = COALESCE(NEW.location_id, OLD.location_id)
  ),
  response_rate = (
    SELECT 
      CASE 
        WHEN COUNT(*) = 0 THEN 0
        ELSE ROUND((COUNT(*) FILTER (WHERE has_reply = true)::DECIMAL / COUNT(*)) * 100, 2)
      END
    FROM gmb_reviews
    WHERE location_id = COALESCE(NEW.location_id, OLD.location_id)
  )
  WHERE id = COALESCE(NEW.location_id, OLD.location_id);
  
  RETURN COALESCE(NEW, OLD);
END;
$function$
"
--- FUNCTION ---,public,update_normalized_location_id,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_normalized_location_id()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  NEW.normalized_location_id := public.normalize_location_id(NEW.location_id);
  RETURN NEW;
END; $function$
"
--- FUNCTION ---,public,update_notifications_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_notifications_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,update_oauth_tokens_by_id,"p_id uuid, p_access_token text, p_refresh_token text, p_expires_at timestamp with time zone",void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_oauth_tokens_by_id(p_id uuid, p_access_token text, p_refresh_token text, p_expires_at timestamp with time zone)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  UPDATE public.oauth_tokens SET
    access_token_encrypted = public.encrypt_token(p_access_token),
    refresh_token_encrypted = public.encrypt_token(p_refresh_token),
    expires_at = p_expires_at,
    updated_at = now()
  WHERE id = p_id;
END;
$function$
"
--- FUNCTION ---,public,update_question_templates_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_question_templates_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,update_updated_at_column,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_updated_at_column()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,update_weekly_tasks_updated_at,,trigger,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.update_weekly_tasks_updated_at()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$function$
"
--- FUNCTION ---,public,upsert_oauth_tokens,"p_provider text, p_user_id uuid, p_account_id uuid, p_access_token text, p_refresh_token text, p_expires_at timestamp with time zone, p_scope text",void,VOLATILE,FUNCTION,"CREATE OR REPLACE FUNCTION public.upsert_oauth_tokens(p_provider text, p_user_id uuid, p_account_id uuid, p_access_token text, p_refresh_token text, p_expires_at timestamp with time zone, p_scope text)
 RETURNS void
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public', 'pg_temp'
AS $function$
BEGIN
  INSERT INTO public.oauth_tokens (provider, user_id, account_id, access_token, refresh_token, expires_at, scope, access_token_encrypted, refresh_token_encrypted)
  VALUES (p_provider, p_user_id, p_account_id, NULL, NULL, p_expires_at, p_scope, public.encrypt_token(p_access_token), public.encrypt_token(p_refresh_token))
  ON CONFLICT (id) DO UPDATE SET
    access_token_encrypted = public.encrypt_token(p_access_token),
    refresh_token_encrypted = public.encrypt_token(p_refresh_token),
    expires_at = EXCLUDED.expires_at,
    scope = EXCLUDED.scope,
    updated_at = now();
END;
$function$
"
--- FUNCTION ---,public,word_similarity,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.word_similarity(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$word_similarity$function$
"
--- FUNCTION ---,public,word_similarity_commutator_op,"text, text",boolean,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.word_similarity_commutator_op(text, text)
 RETURNS boolean
 LANGUAGE c
 STABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$word_similarity_commutator_op$function$
"
--- FUNCTION ---,public,word_similarity_dist_commutator_op,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.word_similarity_dist_commutator_op(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$word_similarity_dist_commutator_op$function$
"
--- FUNCTION ---,public,word_similarity_dist_op,"text, text",real,IMMUTABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.word_similarity_dist_op(text, text)
 RETURNS real
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$word_similarity_dist_op$function$
"
--- FUNCTION ---,public,word_similarity_op,"text, text",boolean,STABLE,FUNCTION,"CREATE OR REPLACE FUNCTION public.word_similarity_op(text, text)
 RETURNS boolean
 LANGUAGE c
 STABLE PARALLEL SAFE STRICT
AS '$libdir/pg_trgm', $function$word_similarity_op$function$
"
separator,schema,trigger_name,table_name,event,timing,orientation,action_statement
--- TRIGGER ---,public,set_updated_at_trigger,ai_settings,UPDATE,BEFORE,ROW,EXECUTE FUNCTION set_updated_at()
--- TRIGGER ---,public,trigger_update_ai_settings_updated_at,ai_settings,UPDATE,BEFORE,ROW,EXECUTE FUNCTION update_updated_at_column()
--- TRIGGER ---,public,auto_reply_settings_updated_at,auto_reply_settings,UPDATE,BEFORE,ROW,EXECUTE FUNCTION update_auto_reply_settings_updated_at()
--- TRIGGER ---,public,trigger_update_last_login,gmb_accounts,INSERT,AFTER,ROW,EXECUTE FUNCTION update_last_login()
--- TRIGGER ---,public,trigger_update_last_login,gmb_accounts,UPDATE,AFTER,ROW,EXECUTE FUNCTION update_last_login()
--- TRIGGER ---,public,gmb_locations_history_trigger,gmb_locations,UPDATE,AFTER,ROW,EXECUTE FUNCTION record_profile_changes()
--- TRIGGER ---,public,set_updated_at_trigger,gmb_locations,UPDATE,BEFORE,ROW,EXECUTE FUNCTION set_updated_at()
--- TRIGGER ---,public,trigger_update_normalized_location_id,gmb_locations,INSERT,BEFORE,ROW,EXECUTE FUNCTION update_normalized_location_id()
--- TRIGGER ---,public,trigger_update_normalized_location_id,gmb_locations,UPDATE,BEFORE,ROW,EXECUTE FUNCTION update_normalized_location_id()
--- TRIGGER ---,public,trigger_log_post_activity,gmb_posts,INSERT,AFTER,ROW,EXECUTE FUNCTION log_post_activity()
--- TRIGGER ---,public,trigger_log_question_activity,gmb_questions,UPDATE,AFTER,ROW,EXECUTE FUNCTION log_question_activity()
--- TRIGGER ---,public,trigger_log_question_activity,gmb_questions,INSERT,AFTER,ROW,EXECUTE FUNCTION log_question_activity()
--- TRIGGER ---,public,set_updated_at_trigger,gmb_reviews,UPDATE,BEFORE,ROW,EXECUTE FUNCTION set_updated_at()
--- TRIGGER ---,public,trigger_log_review_activity,gmb_reviews,UPDATE,AFTER,ROW,EXECUTE FUNCTION log_review_activity()
--- TRIGGER ---,public,trigger_log_review_activity,gmb_reviews,INSERT,AFTER,ROW,EXECUTE FUNCTION log_review_activity()
--- TRIGGER ---,public,trigger_update_gmb_reviews_updated_at,gmb_reviews,UPDATE,BEFORE,ROW,EXECUTE FUNCTION update_gmb_reviews_updated_at()
--- TRIGGER ---,public,trigger_update_location_review_stats_delete,gmb_reviews,DELETE,AFTER,ROW,EXECUTE FUNCTION update_location_review_stats()
--- TRIGGER ---,public,trigger_update_location_review_stats_insert,gmb_reviews,INSERT,AFTER,ROW,EXECUTE FUNCTION update_location_review_stats()
--- TRIGGER ---,public,trigger_update_location_review_stats_update,gmb_reviews,UPDATE,AFTER,ROW,EXECUTE FUNCTION update_location_review_stats()
--- TRIGGER ---,public,notifications_updated_at,notifications,UPDATE,BEFORE,ROW,EXECUTE FUNCTION update_notifications_updated_at()
--- TRIGGER ---,public,set_timestamp_on_profiles,profiles,UPDATE,BEFORE,ROW,EXECUTE FUNCTION set_current_timestamp_updated_at()
--- TRIGGER ---,public,set_updated_at_trigger,profiles,UPDATE,BEFORE,ROW,EXECUTE FUNCTION set_updated_at()
--- TRIGGER ---,public,tr_weekly_task_updated_at,weekly_task_recommendations,UPDATE,BEFORE,ROW,EXECUTE FUNCTION set_weekly_task_updated_at()
separator,schema,table_name,policy_name,permissive,roles,command,using_expression,with_check_expression
--- POLICY ---,public,activity_logs,Users can insert own activity,PERMISSIVE,{authenticated},INSERT,,(( SELECT auth.uid() AS uid) = user_id)
--- POLICY ---,public,activity_logs,Users can view own activity,PERMISSIVE,{authenticated},SELECT,(( SELECT auth.uid() AS uid) = user_id),
--- POLICY ---,public,ai_requests,Users can delete their own AI requests,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,ai_requests,Users can insert own AI requests,PERMISSIVE,{authenticated},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,ai_requests,Users can insert their own AI requests,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,ai_requests,Users can read own AI requests,PERMISSIVE,{authenticated},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,ai_requests,Users can update their own AI requests,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,ai_requests,Users can view their own AI requests,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,ai_settings,Users can delete their own AI settings,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,ai_settings,Users can insert their own AI settings,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,ai_settings,Users can update their own AI settings,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,ai_settings,Users can view their own AI settings,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,ai_settings,ai_settings_delete_owner,PERMISSIVE,{authenticated},DELETE,(( SELECT auth.uid() AS uid) = user_id),
--- POLICY ---,public,ai_settings,ai_settings_insert_owner,PERMISSIVE,{authenticated},INSERT,,(( SELECT auth.uid() AS uid) = user_id)
--- POLICY ---,public,ai_settings,ai_settings_select_owner,PERMISSIVE,{authenticated},SELECT,(( SELECT auth.uid() AS uid) = user_id),
--- POLICY ---,public,ai_settings,ai_settings_update_owner,PERMISSIVE,{authenticated},UPDATE,(( SELECT auth.uid() AS uid) = user_id),(( SELECT auth.uid() AS uid) = user_id)
--- POLICY ---,public,audit_logs,Authenticated users can append audit logs,PERMISSIVE,{public},INSERT,,(auth.role() = 'authenticated'::text)
--- POLICY ---,public,audit_logs,Users can read their audit logs,PERMISSIVE,{public},SELECT,"(COALESCE(user_id, auth.uid()) = auth.uid())",
--- POLICY ---,public,auto_reply_settings,Users can manage their auto reply settings,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,business_profile_history,Users can insert history for their locations,PERMISSIVE,{public},INSERT,,"(location_id IN ( SELECT gmb_locations.id
   FROM gmb_locations
  WHERE (gmb_locations.user_id = auth.uid())))"
--- POLICY ---,public,business_profile_history,Users can view their own location history,PERMISSIVE,{public},SELECT,"(location_id IN ( SELECT gmb_locations.id
   FROM gmb_locations
  WHERE (gmb_locations.user_id = auth.uid())))",
--- POLICY ---,public,error_logs,Admins can update errors,PERMISSIVE,{authenticated},UPDATE,"(EXISTS ( SELECT 1
   FROM auth.users
  WHERE ((users.id = auth.uid()) AND ((users.raw_user_meta_data ->> 'role'::text) = 'admin'::text))))",
--- POLICY ---,public,error_logs,Admins can view all errors,PERMISSIVE,{authenticated},SELECT,"(EXISTS ( SELECT 1
   FROM auth.users
  WHERE ((users.id = auth.uid()) AND ((users.raw_user_meta_data ->> 'role'::text) = 'admin'::text))))",
--- POLICY ---,public,error_logs,Users can insert their own error logs,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,error_logs,Users can insert their own errors,PERMISSIVE,{authenticated},INSERT,,((auth.uid() = user_id) OR (user_id IS NULL))
--- POLICY ---,public,error_logs,Users can view their own error logs,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,error_logs,Users can view their own errors,PERMISSIVE,{authenticated},SELECT,(user_id = auth.uid()),
--- POLICY ---,public,gmb_accounts,Users can update own data,PERMISSIVE,{public},UPDATE,(user_id = auth.uid()),
--- POLICY ---,public,gmb_accounts,Users can view own data,PERMISSIVE,{public},SELECT,(user_id = auth.uid()),
--- POLICY ---,public,gmb_accounts,gmb_accounts_delete_own,PERMISSIVE,{authenticated},DELETE,(user_id = auth.uid()),
--- POLICY ---,public,gmb_accounts,gmb_accounts_insert_own,PERMISSIVE,{authenticated},INSERT,,(user_id = auth.uid())
--- POLICY ---,public,gmb_accounts,gmb_accounts_select_own,PERMISSIVE,{authenticated},SELECT,(user_id = auth.uid()),
--- POLICY ---,public,gmb_accounts,gmb_accounts_update_own,PERMISSIVE,{authenticated},UPDATE,(user_id = auth.uid()),(user_id = auth.uid())
--- POLICY ---,public,gmb_locations,Users can delete their own locations,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_locations,Users can insert their own locations,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,gmb_locations,Users can update their own locations,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_locations,Users can view their own locations,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,gmb_locations,gmb_locations_delete,PERMISSIVE,{authenticated},DELETE,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (gmb_accounts.user_id = ( SELECT auth.uid() AS uid))))",
--- POLICY ---,public,gmb_locations,gmb_locations_delete_owner,PERMISSIVE,{authenticated},DELETE,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (( SELECT auth.uid() AS uid) = gmb_accounts.user_id)))",
--- POLICY ---,public,gmb_locations,gmb_locations_insert,PERMISSIVE,{authenticated},INSERT,,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (gmb_accounts.user_id = ( SELECT auth.uid() AS uid))))"
--- POLICY ---,public,gmb_locations,gmb_locations_insert_owner,PERMISSIVE,{authenticated},INSERT,,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (( SELECT auth.uid() AS uid) = gmb_accounts.user_id)))"
--- POLICY ---,public,gmb_locations,gmb_locations_select,PERMISSIVE,{authenticated},SELECT,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (gmb_accounts.user_id = ( SELECT auth.uid() AS uid))))",
--- POLICY ---,public,gmb_locations,gmb_locations_select_owner,PERMISSIVE,{authenticated},SELECT,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (( SELECT auth.uid() AS uid) = gmb_accounts.user_id)))",
--- POLICY ---,public,gmb_locations,gmb_locations_update,PERMISSIVE,{authenticated},UPDATE,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (gmb_accounts.user_id = ( SELECT auth.uid() AS uid))))","(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (gmb_accounts.user_id = ( SELECT auth.uid() AS uid))))"
--- POLICY ---,public,gmb_locations,gmb_locations_update_owner,PERMISSIVE,{authenticated},UPDATE,"(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (( SELECT auth.uid() AS uid) = gmb_accounts.user_id)))","(gmb_account_id IN ( SELECT gmb_accounts.id
   FROM gmb_accounts
  WHERE (( SELECT auth.uid() AS uid) = gmb_accounts.user_id)))"
--- POLICY ---,public,gmb_media,Users can delete their own media,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_media,Users can insert their own media,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,gmb_media,Users can update their own media,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,gmb_media,Users can view their own media,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,gmb_performance_metrics,Users can delete their own performance metrics,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_performance_metrics,Users can insert their own performance metrics,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,gmb_performance_metrics,Users can update their own performance metrics,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_performance_metrics,Users can view their own performance metrics,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,gmb_posts,gmb_posts_delete_own,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_posts,gmb_posts_insert_own,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,gmb_posts,gmb_posts_select_own,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,gmb_posts,gmb_posts_update_own,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_questions,Users can delete their own questions,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_questions,Users can insert their own questions,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,gmb_questions,Users can update their own questions,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,gmb_questions,Users can view their own questions,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,gmb_reviews,Allow insert for service role,PERMISSIVE,{service_role},INSERT,,true
--- POLICY ---,public,gmb_reviews,Allow select for service role,PERMISSIVE,{service_role},SELECT,true,
--- POLICY ---,public,gmb_reviews,Allow update for service role,PERMISSIVE,{service_role},UPDATE,true,true
--- POLICY ---,public,gmb_reviews,Users can delete their own reviews,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_reviews,Users can insert their own reviews,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,gmb_reviews,Users can update their own reviews,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,gmb_reviews,Users can view their own reviews,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,gmb_search_keywords,Users can delete their own search keywords,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_search_keywords,Users can insert their own search keywords,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,gmb_search_keywords,Users can update their own search keywords,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),
--- POLICY ---,public,gmb_search_keywords,Users can view their own search keywords,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,notifications,System can insert notifications,PERMISSIVE,{public},INSERT,,true
--- POLICY ---,public,notifications,Users can delete own notifications,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,notifications,Users can delete their own notifications,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,notifications,Users can insert their own notifications,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,notifications,Users can update own notifications,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),
--- POLICY ---,public,notifications,Users can update their own notifications,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),
--- POLICY ---,public,notifications,Users can view own notifications,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,notifications,Users can view their own notifications,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,oauth_states,Users can delete their own oauth states,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),
--- POLICY ---,public,oauth_states,Users can insert their own oauth states,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,oauth_states,Users can manage their own oauth states,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,oauth_states,Users can update their own oauth states,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,oauth_states,Users can view their own oauth states,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,performance_metrics,System can insert performance metrics,PERMISSIVE,{public},INSERT,,true
--- POLICY ---,public,performance_metrics,Users can insert their own metrics,PERMISSIVE,{public},INSERT,,(auth.uid() = user_id)
--- POLICY ---,public,performance_metrics,Users can view their own metrics,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),
--- POLICY ---,public,performance_metrics,Users can view their own performance metrics,PERMISSIVE,{public},SELECT,((auth.uid() = user_id) OR (user_id IS NULL)),
--- POLICY ---,public,profiles,User can insert own profile,PERMISSIVE,{authenticated},INSERT,,(( SELECT auth.uid() AS uid) = user_id)
--- POLICY ---,public,profiles,User can update own profile,PERMISSIVE,{authenticated},UPDATE,(( SELECT auth.uid() AS uid) = user_id),(( SELECT auth.uid() AS uid) = user_id)
--- POLICY ---,public,profiles,User can view own profile,PERMISSIVE,{authenticated},SELECT,(( SELECT auth.uid() AS uid) = user_id),
--- POLICY ---,public,profiles,Users can insert their own profile,PERMISSIVE,{public},INSERT,,true
--- POLICY ---,public,profiles,profiles_delete_owner,PERMISSIVE,{authenticated},DELETE,(( SELECT auth.uid() AS uid) = id),
--- POLICY ---,public,profiles,profiles_insert_owner,PERMISSIVE,{authenticated},INSERT,,(( SELECT auth.uid() AS uid) = id)
--- POLICY ---,public,profiles,profiles_select_owner,PERMISSIVE,{authenticated},SELECT,(( SELECT auth.uid() AS uid) = id),
--- POLICY ---,public,profiles,profiles_update_owner,PERMISSIVE,{authenticated},UPDATE,(( SELECT auth.uid() AS uid) = id),(( SELECT auth.uid() AS uid) = id)
--- POLICY ---,public,rate_limit_requests,Users can manage their own rate limit records,PERMISSIVE,{public},ALL,(auth.uid() = user_id),
--- POLICY ---,public,sync_status,Users can manage their sync status,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
--- POLICY ---,public,weekly_task_recommendations,Users manage their weekly tasks,PERMISSIVE,{public},ALL,(auth.uid() = user_id),(auth.uid() = user_id)
separator,schema,enum_name,value,sort_order
separator,schema,sequence_name,data_type,start_value,minimum_value,maximum_value,increment,cycle_option
separator,name,version,relocatable,description
--- EXTENSION ---,pg_cron,1.6.4,f,Job scheduler for PostgreSQL
--- EXTENSION ---,pg_graphql,1.5.11,f,pg_graphql: GraphQL support
--- EXTENSION ---,pg_net,0.19.5,f,Async HTTP
--- EXTENSION ---,pg_stat_statements,1.11,t,track planning and execution statistics of all SQL statements executed
--- EXTENSION ---,pg_trgm,1.6,t,text similarity measurement and index searching based on trigrams
--- EXTENSION ---,pgaudit,17.0,t,provides auditing functionality
--- EXTENSION ---,pgcrypto,1.3,t,cryptographic functions
--- EXTENSION ---,plpgsql,1.0,f,PL/pgSQL procedural language
--- EXTENSION ---,supabase_vault,0.3.1,f,Supabase Vault Extension
--- EXTENSION ---,uuid-ossp,1.1,t,generate universally unique identifiers (UUIDs)
separator,table_name,column_name,column_default
--- DEFAULT ---,activity_logs,id,gen_random_uuid()
--- DEFAULT ---,activity_logs,metadata,'{}'::jsonb
--- DEFAULT ---,activity_logs,actionable,false
--- DEFAULT ---,activity_logs,created_at,now()
--- DEFAULT ---,ai_requests,id,gen_random_uuid()
--- DEFAULT ---,ai_requests,prompt_tokens,0
--- DEFAULT ---,ai_requests,completion_tokens,0
--- DEFAULT ---,ai_requests,total_tokens,0
--- DEFAULT ---,ai_requests,cost_usd,0
--- DEFAULT ---,ai_requests,latency_ms,0
--- DEFAULT ---,ai_requests,success,true
--- DEFAULT ---,ai_requests,created_at,now()
--- DEFAULT ---,ai_settings,id,gen_random_uuid()
--- DEFAULT ---,ai_settings,is_active,false
--- DEFAULT ---,ai_settings,priority,999
--- DEFAULT ---,ai_settings,created_at,now()
--- DEFAULT ---,ai_settings,updated_at,now()
--- DEFAULT ---,audit_logs,id,gen_random_uuid()
--- DEFAULT ---,audit_logs,created_at,now()
--- DEFAULT ---,auto_reply_settings,id,gen_random_uuid()
--- DEFAULT ---,auto_reply_settings,enabled,false
--- DEFAULT ---,auto_reply_settings,min_rating,1
--- DEFAULT ---,auto_reply_settings,max_rating,5
--- DEFAULT ---,auto_reply_settings,use_ai,true
--- DEFAULT ---,auto_reply_settings,ai_tone,'professional'::text
--- DEFAULT ---,auto_reply_settings,created_at,now()
--- DEFAULT ---,auto_reply_settings,updated_at,now()
--- DEFAULT ---,auto_reply_settings,require_approval,false
--- DEFAULT ---,auto_reply_settings,auto_reply_1_star,true
--- DEFAULT ---,auto_reply_settings,auto_reply_2_star,true
--- DEFAULT ---,auto_reply_settings,auto_reply_3_star,true
--- DEFAULT ---,auto_reply_settings,auto_reply_4_star,true
--- DEFAULT ---,auto_reply_settings,auto_reply_5_star,true
--- DEFAULT ---,auto_reply_settings,response_style,'friendly'::text
--- DEFAULT ---,auto_reply_settings,response_delay_minutes,0
--- DEFAULT ---,auto_reply_settings,reply_to_positive,true
--- DEFAULT ---,auto_reply_settings,reply_to_neutral,false
--- DEFAULT ---,auto_reply_settings,reply_to_negative,false
--- DEFAULT ---,business_profile_history,id,gen_random_uuid()
--- DEFAULT ---,business_profile_history,created_at,now()
--- DEFAULT ---,error_logs,id,(gen_random_uuid())::text
--- DEFAULT ---,error_logs,level,'error'::text
--- DEFAULT ---,error_logs,timestamp,now()
--- DEFAULT ---,error_logs,created_at,now()
--- DEFAULT ---,error_logs,severity,3
--- DEFAULT ---,error_logs,resolved,false
--- DEFAULT ---,gmb_accounts,id,gen_random_uuid()
--- DEFAULT ---,gmb_accounts,last_sync,now()
--- DEFAULT ---,gmb_accounts,created_at,now()
--- DEFAULT ---,gmb_accounts,is_active,true
--- DEFAULT ---,gmb_accounts,updated_at,now()
--- DEFAULT ---,gmb_accounts,settings,'{}'::jsonb
--- DEFAULT ---,gmb_accounts,data_retention_days,30
--- DEFAULT ---,gmb_accounts,delete_on_disconnect,false
--- DEFAULT ---,gmb_locations,id,gen_random_uuid()
--- DEFAULT ---,gmb_locations,is_active,true
--- DEFAULT ---,gmb_locations,metadata,'{}'::jsonb
--- DEFAULT ---,gmb_locations,created_at,now()
--- DEFAULT ---,gmb_locations,updated_at,now()
--- DEFAULT ---,gmb_locations,business_hours,"'{""friday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""monday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""sunday"": {""open"": ""00:00"", ""close"": ""00:00"", ""closed"": true}, ""tuesday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""saturday"": {""open"": ""10:00"", ""close"": ""16:00"", ""closed"": false}, ""thursday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}, ""wednesday"": {""open"": ""09:00"", ""close"": ""17:00"", ""closed"": false}}'::jsonb"
--- DEFAULT ---,gmb_locations,review_count,0
--- DEFAULT ---,gmb_locations,response_rate,0
--- DEFAULT ---,gmb_locations,is_syncing,false
--- DEFAULT ---,gmb_locations,status,'pending'::text
--- DEFAULT ---,gmb_locations,regularhours,'{}'::jsonb
--- DEFAULT ---,gmb_locations,health_score,0
--- DEFAULT ---,gmb_locations,is_archived,false
--- DEFAULT ---,gmb_locations,additional_categories,"COALESCE(ARRAY[]::text[], ARRAY[]::text[])"
--- DEFAULT ---,gmb_locations,from_the_business,"COALESCE(ARRAY[]::text[], ARRAY[]::text[])"
--- DEFAULT ---,gmb_locations,service_area_enabled,false
--- DEFAULT ---,gmb_locations,profile_completeness,0
--- DEFAULT ---,gmb_media,id,gen_random_uuid()
--- DEFAULT ---,gmb_media,metadata,'{}'::jsonb
--- DEFAULT ---,gmb_media,synced_at,now()
--- DEFAULT ---,gmb_metrics,id,gen_random_uuid()
--- DEFAULT ---,gmb_metrics,runs_count,0
--- DEFAULT ---,gmb_metrics,total_duration_ms,0
--- DEFAULT ---,gmb_metrics,total_items_count,0
--- DEFAULT ---,gmb_metrics,updated_at,now()
--- DEFAULT ---,gmb_metrics,created_at,now()
--- DEFAULT ---,gmb_performance_metrics,id,gen_random_uuid()
--- DEFAULT ---,gmb_performance_metrics,metric_value,0
--- DEFAULT ---,gmb_performance_metrics,sub_entity_type,'{}'::jsonb
--- DEFAULT ---,gmb_performance_metrics,metadata,'{}'::jsonb
--- DEFAULT ---,gmb_performance_metrics,synced_at,now()
--- DEFAULT ---,gmb_performance_metrics,created_at,now()
--- DEFAULT ---,gmb_performance_metrics,updated_at,now()
--- DEFAULT ---,gmb_posts,id,gen_random_uuid()
--- DEFAULT ---,gmb_posts,status,'draft'::text
--- DEFAULT ---,gmb_posts,created_at,now()
--- DEFAULT ---,gmb_posts,updated_at,now()
--- DEFAULT ---,gmb_posts,metadata,'{}'::jsonb
--- DEFAULT ---,gmb_posts,post_type,'whats_new'::text
--- DEFAULT ---,gmb_posts,is_archived,false
--- DEFAULT ---,gmb_questions,id,gen_random_uuid()
--- DEFAULT ---,gmb_questions,answer_status,'pending'::text
--- DEFAULT ---,gmb_questions,upvote_count,0
--- DEFAULT ---,gmb_questions,is_featured,false
--- DEFAULT ---,gmb_questions,is_hidden,false
--- DEFAULT ---,gmb_questions,language_code,'en'::text
--- DEFAULT ---,gmb_questions,metadata,'{}'::jsonb
--- DEFAULT ---,gmb_questions,created_at,now()
--- DEFAULT ---,gmb_questions,updated_at,now()
--- DEFAULT ---,gmb_questions,synced_at,now()
--- DEFAULT ---,gmb_questions,total_answer_count,0
--- DEFAULT ---,gmb_questions,status,'pending'::text
--- DEFAULT ---,gmb_questions,ai_answer_generated,false
--- DEFAULT ---,gmb_questions,is_archived,false
--- DEFAULT ---,gmb_reviews,id,gen_random_uuid()
--- DEFAULT ---,gmb_reviews,has_reply,false
--- DEFAULT ---,gmb_reviews,created_at,now()
--- DEFAULT ---,gmb_reviews,updated_at,now()
--- DEFAULT ---,gmb_reviews,status,'pending'::text
--- DEFAULT ---,gmb_reviews,has_response,false
--- DEFAULT ---,gmb_reviews,auto_reply_enabled,false
--- DEFAULT ---,gmb_reviews,is_verified_purchase,false
--- DEFAULT ---,gmb_reviews,ai_reply_generated,false
--- DEFAULT ---,gmb_reviews,synced_at,now()
--- DEFAULT ---,gmb_reviews,is_archived,false
--- DEFAULT ---,gmb_reviews,is_anonymized,false
--- DEFAULT ---,gmb_search_keywords,id,gen_random_uuid()
--- DEFAULT ---,gmb_search_keywords,impressions_count,0
--- DEFAULT ---,gmb_search_keywords,metadata,'{}'::jsonb
--- DEFAULT ---,gmb_search_keywords,synced_at,now()
--- DEFAULT ---,gmb_search_keywords,created_at,now()
--- DEFAULT ---,gmb_search_keywords,updated_at,now()
--- DEFAULT ---,gmb_sync_logs,id,gen_random_uuid()
--- DEFAULT ---,gmb_sync_logs,status,'started'::text
--- DEFAULT ---,gmb_sync_logs,started_at,now()
--- DEFAULT ---,gmb_sync_logs,counts,'{}'::jsonb
--- DEFAULT ---,gmb_sync_logs,metadata,'{}'::jsonb
--- DEFAULT ---,gmb_sync_logs,created_at,now()
--- DEFAULT ---,notifications,id,gen_random_uuid()
--- DEFAULT ---,notifications,read,false
--- DEFAULT ---,notifications,metadata,'{}'::jsonb
--- DEFAULT ---,notifications,created_at,now()
--- DEFAULT ---,notifications,updated_at,now()
--- DEFAULT ---,oauth_states,id,gen_random_uuid()
--- DEFAULT ---,oauth_states,used,false
--- DEFAULT ---,oauth_states,created_at,now()
--- DEFAULT ---,performance_metrics,id,gen_random_uuid()
--- DEFAULT ---,performance_metrics,timestamp,now()
--- DEFAULT ---,performance_metrics,metadata,'{}'::jsonb
--- DEFAULT ---,profiles,id,gen_random_uuid()
--- DEFAULT ---,profiles,created_at,now()
--- DEFAULT ---,profiles,updated_at,now()
--- DEFAULT ---,rate_limit_requests,id,gen_random_uuid()
--- DEFAULT ---,rate_limit_requests,created_at,now()
--- DEFAULT ---,sync_status,id,gen_random_uuid()
--- DEFAULT ---,sync_status,status,'pending'::text
--- DEFAULT ---,sync_status,progress,0
--- DEFAULT ---,sync_status,started_at,now()
--- DEFAULT ---,sync_status,meta,'{}'::jsonb
--- DEFAULT ---,weekly_task_recommendations,id,gen_random_uuid()
--- DEFAULT ---,weekly_task_recommendations,tasks,'[]'::jsonb
--- DEFAULT ---,weekly_task_recommendations,created_at,now()
--- DEFAULT ---,weekly_task_recommendations,priority,'medium'::text
--- DEFAULT ---,weekly_task_recommendations,effort_level,'moderate'::text
--- DEFAULT ---,weekly_task_recommendations,estimated_minutes,0
--- DEFAULT ---,weekly_task_recommendations,status,'pending'::text
--- DEFAULT ---,weekly_task_recommendations,updated_at,now()
separator,schema,type_name,attribute_name,attribute_type,attribute_order
--- COMPOSITE TYPE ---,public,activity_logs,id,uuid,1
--- COMPOSITE TYPE ---,public,activity_logs,user_id,uuid,2
--- COMPOSITE TYPE ---,public,activity_logs,activity_type,text,3
--- COMPOSITE TYPE ---,public,activity_logs,activity_message,text,4
--- COMPOSITE TYPE ---,public,activity_logs,metadata,jsonb,5
--- COMPOSITE TYPE ---,public,activity_logs,actionable,boolean,6
--- COMPOSITE TYPE ---,public,activity_logs,created_at,timestamp with time zone,7
--- COMPOSITE TYPE ---,public,ai_requests,id,uuid,1
--- COMPOSITE TYPE ---,public,ai_requests,user_id,uuid,2
--- COMPOSITE TYPE ---,public,ai_requests,location_id,uuid,3
--- COMPOSITE TYPE ---,public,ai_requests,provider,text,4
--- COMPOSITE TYPE ---,public,ai_requests,model,text,5
--- COMPOSITE TYPE ---,public,ai_requests,feature,text,6
--- COMPOSITE TYPE ---,public,ai_requests,prompt_tokens,integer,7
--- COMPOSITE TYPE ---,public,ai_requests,completion_tokens,integer,8
--- COMPOSITE TYPE ---,public,ai_requests,total_tokens,integer,9
--- COMPOSITE TYPE ---,public,ai_requests,cost_usd,"numeric(10,6)",10
--- COMPOSITE TYPE ---,public,ai_requests,latency_ms,integer,11
--- COMPOSITE TYPE ---,public,ai_requests,success,boolean,12
--- COMPOSITE TYPE ---,public,ai_requests,created_at,timestamp with time zone,13
--- COMPOSITE TYPE ---,public,ai_settings,id,uuid,1
--- COMPOSITE TYPE ---,public,ai_settings,user_id,uuid,2
--- COMPOSITE TYPE ---,public,ai_settings,provider,text,3
--- COMPOSITE TYPE ---,public,ai_settings,api_key,text,4
--- COMPOSITE TYPE ---,public,ai_settings,is_active,boolean,5
--- COMPOSITE TYPE ---,public,ai_settings,priority,integer,6
--- COMPOSITE TYPE ---,public,ai_settings,created_at,timestamp with time zone,7
--- COMPOSITE TYPE ---,public,ai_settings,updated_at,timestamp with time zone,8
--- COMPOSITE TYPE ---,public,audit_logs,id,uuid,1
--- COMPOSITE TYPE ---,public,audit_logs,user_id,uuid,2
--- COMPOSITE TYPE ---,public,audit_logs,action,character varying(100),3
--- COMPOSITE TYPE ---,public,audit_logs,resource_type,character varying(50),4
--- COMPOSITE TYPE ---,public,audit_logs,resource_id,character varying(255),5
--- COMPOSITE TYPE ---,public,audit_logs,metadata,jsonb,6
--- COMPOSITE TYPE ---,public,audit_logs,ip_address,text,7
--- COMPOSITE TYPE ---,public,audit_logs,created_at,timestamp with time zone,8
--- COMPOSITE TYPE ---,public,auto_reply_settings,id,uuid,1
--- COMPOSITE TYPE ---,public,auto_reply_settings,user_id,uuid,2
--- COMPOSITE TYPE ---,public,auto_reply_settings,location_id,uuid,3
--- COMPOSITE TYPE ---,public,auto_reply_settings,enabled,boolean,4
--- COMPOSITE TYPE ---,public,auto_reply_settings,min_rating,integer,5
--- COMPOSITE TYPE ---,public,auto_reply_settings,max_rating,integer,6
--- COMPOSITE TYPE ---,public,auto_reply_settings,reply_template,text,7
--- COMPOSITE TYPE ---,public,auto_reply_settings,use_ai,boolean,8
--- COMPOSITE TYPE ---,public,auto_reply_settings,ai_tone,text,9
--- COMPOSITE TYPE ---,public,auto_reply_settings,created_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,auto_reply_settings,updated_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,auto_reply_settings,require_approval,boolean,12
--- COMPOSITE TYPE ---,public,auto_reply_settings,auto_reply_1_star,boolean,13
--- COMPOSITE TYPE ---,public,auto_reply_settings,auto_reply_2_star,boolean,14
--- COMPOSITE TYPE ---,public,auto_reply_settings,auto_reply_3_star,boolean,15
--- COMPOSITE TYPE ---,public,auto_reply_settings,auto_reply_4_star,boolean,16
--- COMPOSITE TYPE ---,public,auto_reply_settings,auto_reply_5_star,boolean,17
--- COMPOSITE TYPE ---,public,auto_reply_settings,response_style,text,18
--- COMPOSITE TYPE ---,public,auto_reply_settings,response_delay_minutes,integer,19
--- COMPOSITE TYPE ---,public,auto_reply_settings,reply_to_positive,boolean,20
--- COMPOSITE TYPE ---,public,auto_reply_settings,reply_to_neutral,boolean,21
--- COMPOSITE TYPE ---,public,auto_reply_settings,reply_to_negative,boolean,22
--- COMPOSITE TYPE ---,public,business_profile_history,id,uuid,1
--- COMPOSITE TYPE ---,public,business_profile_history,location_id,uuid,2
--- COMPOSITE TYPE ---,public,business_profile_history,location_name,text,3
--- COMPOSITE TYPE ---,public,business_profile_history,operation_type,text,4
--- COMPOSITE TYPE ---,public,business_profile_history,data,jsonb,5
--- COMPOSITE TYPE ---,public,business_profile_history,metadata,jsonb,6
--- COMPOSITE TYPE ---,public,business_profile_history,created_by,uuid,7
--- COMPOSITE TYPE ---,public,business_profile_history,created_at,timestamp with time zone,8
--- COMPOSITE TYPE ---,public,error_logs,id,text,1
--- COMPOSITE TYPE ---,public,error_logs,message,text,2
--- COMPOSITE TYPE ---,public,error_logs,stack,text,3
--- COMPOSITE TYPE ---,public,error_logs,level,text,4
--- COMPOSITE TYPE ---,public,error_logs,timestamp,timestamp with time zone,5
--- COMPOSITE TYPE ---,public,error_logs,user_id,uuid,6
--- COMPOSITE TYPE ---,public,error_logs,context,jsonb,7
--- COMPOSITE TYPE ---,public,error_logs,user_agent,text,8
--- COMPOSITE TYPE ---,public,error_logs,url,text,9
--- COMPOSITE TYPE ---,public,error_logs,created_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,error_logs,session_id,text,11
--- COMPOSITE TYPE ---,public,error_logs,ip_address,inet,12
--- COMPOSITE TYPE ---,public,error_logs,browser_name,text,13
--- COMPOSITE TYPE ---,public,error_logs,browser_version,text,14
--- COMPOSITE TYPE ---,public,error_logs,os_name,text,15
--- COMPOSITE TYPE ---,public,error_logs,os_version,text,16
--- COMPOSITE TYPE ---,public,error_logs,device_type,text,17
--- COMPOSITE TYPE ---,public,error_logs,error_type,text,18
--- COMPOSITE TYPE ---,public,error_logs,error_code,text,19
--- COMPOSITE TYPE ---,public,error_logs,severity,integer,20
--- COMPOSITE TYPE ---,public,error_logs,resolved,boolean,21
--- COMPOSITE TYPE ---,public,error_logs,resolved_at,timestamp with time zone,22
--- COMPOSITE TYPE ---,public,error_logs,resolved_by,uuid,23
--- COMPOSITE TYPE ---,public,error_logs,resolution_notes,text,24
--- COMPOSITE TYPE ---,public,gmb_accounts,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_accounts,user_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_accounts,account_name,text,3
--- COMPOSITE TYPE ---,public,gmb_accounts,email,text,4
--- COMPOSITE TYPE ---,public,gmb_accounts,google_account_id,text,5
--- COMPOSITE TYPE ---,public,gmb_accounts,access_token,text,6
--- COMPOSITE TYPE ---,public,gmb_accounts,refresh_token,text,7
--- COMPOSITE TYPE ---,public,gmb_accounts,token_expires_at,timestamp with time zone,8
--- COMPOSITE TYPE ---,public,gmb_accounts,last_sync,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,gmb_accounts,created_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,gmb_accounts,is_active,boolean,13
--- COMPOSITE TYPE ---,public,gmb_accounts,updated_at,timestamp with time zone,14
--- COMPOSITE TYPE ---,public,gmb_accounts,account_id,text,15
--- COMPOSITE TYPE ---,public,gmb_accounts,settings,jsonb,16
--- COMPOSITE TYPE ---,public,gmb_accounts,disconnected_at,timestamp with time zone,17
--- COMPOSITE TYPE ---,public,gmb_accounts,data_retention_days,integer,18
--- COMPOSITE TYPE ---,public,gmb_accounts,delete_on_disconnect,boolean,19
--- COMPOSITE TYPE ---,public,gmb_accounts,notification_settings,jsonb,20
--- COMPOSITE TYPE ---,public,gmb_locations,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_locations,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_locations,location_name,text,3
--- COMPOSITE TYPE ---,public,gmb_locations,location_id,text,4
--- COMPOSITE TYPE ---,public,gmb_locations,address,text,5
--- COMPOSITE TYPE ---,public,gmb_locations,phone,text,6
--- COMPOSITE TYPE ---,public,gmb_locations,category,text,7
--- COMPOSITE TYPE ---,public,gmb_locations,website,text,8
--- COMPOSITE TYPE ---,public,gmb_locations,is_active,boolean,9
--- COMPOSITE TYPE ---,public,gmb_locations,metadata,jsonb,10
--- COMPOSITE TYPE ---,public,gmb_locations,created_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,gmb_locations,updated_at,timestamp with time zone,12
--- COMPOSITE TYPE ---,public,gmb_locations,business_hours,jsonb,13
--- COMPOSITE TYPE ---,public,gmb_locations,user_id,uuid,14
--- COMPOSITE TYPE ---,public,gmb_locations,rating,"numeric(2,1)",15
--- COMPOSITE TYPE ---,public,gmb_locations,normalized_location_id,text,16
--- COMPOSITE TYPE ---,public,gmb_locations,latitude,double precision,17
--- COMPOSITE TYPE ---,public,gmb_locations,longitude,double precision,18
--- COMPOSITE TYPE ---,public,gmb_locations,type,text,19
--- COMPOSITE TYPE ---,public,gmb_locations,review_count,integer,20
--- COMPOSITE TYPE ---,public,gmb_locations,response_rate,"numeric(5,2)",21
--- COMPOSITE TYPE ---,public,gmb_locations,is_syncing,boolean,22
--- COMPOSITE TYPE ---,public,gmb_locations,ai_insights,text,23
--- COMPOSITE TYPE ---,public,gmb_locations,status,text,24
--- COMPOSITE TYPE ---,public,gmb_locations,latlng,text,25
--- COMPOSITE TYPE ---,public,gmb_locations,regularhours,jsonb,26
--- COMPOSITE TYPE ---,public,gmb_locations,account_id,text,27
--- COMPOSITE TYPE ---,public,gmb_locations,location_id_external,text,28
--- COMPOSITE TYPE ---,public,gmb_locations,health_score,integer,29
--- COMPOSITE TYPE ---,public,gmb_locations,last_synced_at,timestamp with time zone,30
--- COMPOSITE TYPE ---,public,gmb_locations,is_archived,boolean,31
--- COMPOSITE TYPE ---,public,gmb_locations,archived_at,timestamp with time zone,32
--- COMPOSITE TYPE ---,public,gmb_locations,cover_photo_url,text,33
--- COMPOSITE TYPE ---,public,gmb_locations,description,text,34
--- COMPOSITE TYPE ---,public,gmb_locations,short_description,text,35
--- COMPOSITE TYPE ---,public,gmb_locations,additional_categories,text[],36
--- COMPOSITE TYPE ---,public,gmb_locations,from_the_business,text[],37
--- COMPOSITE TYPE ---,public,gmb_locations,opening_date,date,38
--- COMPOSITE TYPE ---,public,gmb_locations,service_area_enabled,boolean,39
--- COMPOSITE TYPE ---,public,gmb_locations,menu_url,text,40
--- COMPOSITE TYPE ---,public,gmb_locations,booking_url,text,41
--- COMPOSITE TYPE ---,public,gmb_locations,order_url,text,42
--- COMPOSITE TYPE ---,public,gmb_locations,appointment_url,text,43
--- COMPOSITE TYPE ---,public,gmb_locations,profile_completeness,integer,44
--- COMPOSITE TYPE ---,public,gmb_locations,calculated_response_rate,"numeric(5,2)",45
--- COMPOSITE TYPE ---,public,gmb_locations,logo_url,text,46
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,user_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,location_id,text,4
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,location_name,text,5
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,address,text,6
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,phone,text,7
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,website,text,8
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,category,text,9
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,is_active,boolean,10
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,metadata,jsonb,11
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,business_hours,jsonb,12
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,created_at,timestamp with time zone,13
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,updated_at,timestamp with time zone,14
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,stored_rating,"numeric(2,1)",15
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,normalized_location_id,text,16
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,calculated_rating,"numeric(3,2)",17
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,reviews_count,integer,18
--- COMPOSITE TYPE ---,public,gmb_locations_with_rating,last_review_date,timestamp with time zone,19
--- COMPOSITE TYPE ---,public,gmb_media,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_media,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_media,location_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_media,user_id,uuid,4
--- COMPOSITE TYPE ---,public,gmb_media,external_media_id,text,5
--- COMPOSITE TYPE ---,public,gmb_media,type,text,6
--- COMPOSITE TYPE ---,public,gmb_media,url,text,7
--- COMPOSITE TYPE ---,public,gmb_media,thumbnail_url,text,8
--- COMPOSITE TYPE ---,public,gmb_media,created_at,timestamp with time zone,9
--- COMPOSITE TYPE ---,public,gmb_media,updated_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,gmb_media,metadata,jsonb,11
--- COMPOSITE TYPE ---,public,gmb_media,synced_at,timestamp with time zone,12
--- COMPOSITE TYPE ---,public,gmb_media,category,text,13
--- COMPOSITE TYPE ---,public,gmb_metrics,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_metrics,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_metrics,user_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_metrics,phase,text,4
--- COMPOSITE TYPE ---,public,gmb_metrics,runs_count,integer,5
--- COMPOSITE TYPE ---,public,gmb_metrics,total_duration_ms,bigint,6
--- COMPOSITE TYPE ---,public,gmb_metrics,total_items_count,bigint,7
--- COMPOSITE TYPE ---,public,gmb_metrics,avg_duration_ms,numeric,8
--- COMPOSITE TYPE ---,public,gmb_metrics,updated_at,timestamp with time zone,9
--- COMPOSITE TYPE ---,public,gmb_metrics,created_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,location_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,user_id,uuid,4
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,metric_type,text,5
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,metric_date,date,6
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,metric_value,bigint,7
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,sub_entity_type,jsonb,8
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,metadata,jsonb,9
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,synced_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,created_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,gmb_performance_metrics,updated_at,timestamp with time zone,12
--- COMPOSITE TYPE ---,public,gmb_posts,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_posts,user_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_posts,location_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_posts,title,text,4
--- COMPOSITE TYPE ---,public,gmb_posts,content,text,5
--- COMPOSITE TYPE ---,public,gmb_posts,media_url,text,6
--- COMPOSITE TYPE ---,public,gmb_posts,call_to_action,text,7
--- COMPOSITE TYPE ---,public,gmb_posts,call_to_action_url,text,8
--- COMPOSITE TYPE ---,public,gmb_posts,status,text,9
--- COMPOSITE TYPE ---,public,gmb_posts,scheduled_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,gmb_posts,published_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,gmb_posts,provider_post_id,text,12
--- COMPOSITE TYPE ---,public,gmb_posts,error_message,text,13
--- COMPOSITE TYPE ---,public,gmb_posts,created_at,timestamp with time zone,14
--- COMPOSITE TYPE ---,public,gmb_posts,updated_at,timestamp with time zone,15
--- COMPOSITE TYPE ---,public,gmb_posts,metadata,jsonb,16
--- COMPOSITE TYPE ---,public,gmb_posts,post_type,text,17
--- COMPOSITE TYPE ---,public,gmb_posts,post_id,text,18
--- COMPOSITE TYPE ---,public,gmb_posts,cta_type,text,19
--- COMPOSITE TYPE ---,public,gmb_posts,cta_url,text,20
--- COMPOSITE TYPE ---,public,gmb_posts,start_date,timestamp with time zone,21
--- COMPOSITE TYPE ---,public,gmb_posts,end_date,timestamp with time zone,22
--- COMPOSITE TYPE ---,public,gmb_posts,is_archived,boolean,23
--- COMPOSITE TYPE ---,public,gmb_posts,archived_at,timestamp with time zone,24
--- COMPOSITE TYPE ---,public,gmb_questions,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_questions,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_questions,location_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_questions,user_id,uuid,4
--- COMPOSITE TYPE ---,public,gmb_questions,external_question_id,text,5
--- COMPOSITE TYPE ---,public,gmb_questions,question_text,text,6
--- COMPOSITE TYPE ---,public,gmb_questions,author_name,text,7
--- COMPOSITE TYPE ---,public,gmb_questions,author_type,text,8
--- COMPOSITE TYPE ---,public,gmb_questions,answer_text,text,9
--- COMPOSITE TYPE ---,public,gmb_questions,answered_by,text,10
--- COMPOSITE TYPE ---,public,gmb_questions,answered_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,gmb_questions,answer_status,text,12
--- COMPOSITE TYPE ---,public,gmb_questions,ai_suggested_answer,text,13
--- COMPOSITE TYPE ---,public,gmb_questions,ai_confidence_score,"numeric(3,2)",14
--- COMPOSITE TYPE ---,public,gmb_questions,upvote_count,integer,15
--- COMPOSITE TYPE ---,public,gmb_questions,is_featured,boolean,16
--- COMPOSITE TYPE ---,public,gmb_questions,is_hidden,boolean,17
--- COMPOSITE TYPE ---,public,gmb_questions,language_code,text,18
--- COMPOSITE TYPE ---,public,gmb_questions,metadata,jsonb,19
--- COMPOSITE TYPE ---,public,gmb_questions,created_at,timestamp with time zone,20
--- COMPOSITE TYPE ---,public,gmb_questions,updated_at,timestamp with time zone,21
--- COMPOSITE TYPE ---,public,gmb_questions,synced_at,timestamp with time zone,22
--- COMPOSITE TYPE ---,public,gmb_questions,author_profile_photo_url,text,23
--- COMPOSITE TYPE ---,public,gmb_questions,question_id,text,24
--- COMPOSITE TYPE ---,public,gmb_questions,asked_at,timestamp with time zone,25
--- COMPOSITE TYPE ---,public,gmb_questions,author_display_name,text,26
--- COMPOSITE TYPE ---,public,gmb_questions,answer_id,text,27
--- COMPOSITE TYPE ---,public,gmb_questions,total_answer_count,integer,28
--- COMPOSITE TYPE ---,public,gmb_questions,status,text,29
--- COMPOSITE TYPE ---,public,gmb_questions,priority,text,30
--- COMPOSITE TYPE ---,public,gmb_questions,question_url,text,31
--- COMPOSITE TYPE ---,public,gmb_questions,google_resource_name,text,32
--- COMPOSITE TYPE ---,public,gmb_questions,internal_notes,text,33
--- COMPOSITE TYPE ---,public,gmb_questions,ai_category,text,34
--- COMPOSITE TYPE ---,public,gmb_questions,ai_answer_generated,boolean,35
--- COMPOSITE TYPE ---,public,gmb_questions,is_archived,boolean,36
--- COMPOSITE TYPE ---,public,gmb_questions,archived_at,timestamp with time zone,37
--- COMPOSITE TYPE ---,public,gmb_reviews,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_reviews,location_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_reviews,external_review_id,text,3
--- COMPOSITE TYPE ---,public,gmb_reviews,reviewer_name,text,4
--- COMPOSITE TYPE ---,public,gmb_reviews,rating,integer,5
--- COMPOSITE TYPE ---,public,gmb_reviews,review_text,text,6
--- COMPOSITE TYPE ---,public,gmb_reviews,review_date,timestamp with time zone,7
--- COMPOSITE TYPE ---,public,gmb_reviews,reply_text,text,8
--- COMPOSITE TYPE ---,public,gmb_reviews,reply_date,timestamp with time zone,9
--- COMPOSITE TYPE ---,public,gmb_reviews,has_reply,boolean,10
--- COMPOSITE TYPE ---,public,gmb_reviews,created_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,gmb_reviews,updated_at,timestamp with time zone,12
--- COMPOSITE TYPE ---,public,gmb_reviews,user_id,uuid,13
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_sentiment,text,14
--- COMPOSITE TYPE ---,public,gmb_reviews,gmb_account_id,uuid,15
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_generated_response,text,16
--- COMPOSITE TYPE ---,public,gmb_reviews,review_id,text,17
--- COMPOSITE TYPE ---,public,gmb_reviews,comment,text,18
--- COMPOSITE TYPE ---,public,gmb_reviews,review_reply,text,19
--- COMPOSITE TYPE ---,public,gmb_reviews,replied_at,timestamp with time zone,20
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_suggested_reply,text,21
--- COMPOSITE TYPE ---,public,gmb_reviews,status,text,22
--- COMPOSITE TYPE ---,public,gmb_reviews,has_response,boolean,23
--- COMPOSITE TYPE ---,public,gmb_reviews,response_text,text,24
--- COMPOSITE TYPE ---,public,gmb_reviews,responded_at,timestamp with time zone,25
--- COMPOSITE TYPE ---,public,gmb_reviews,auto_reply_enabled,boolean,26
--- COMPOSITE TYPE ---,public,gmb_reviews,auto_reply_status,character varying(50),27
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_generated_at,timestamp with time zone,28
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_sent_at,timestamp with time zone,29
--- COMPOSITE TYPE ---,public,gmb_reviews,reviewer_profile_photo_url,text,30
--- COMPOSITE TYPE ---,public,gmb_reviews,reply_timestamp,timestamp with time zone,31
--- COMPOSITE TYPE ---,public,gmb_reviews,review_timestamp,timestamp with time zone,32
--- COMPOSITE TYPE ---,public,gmb_reviews,account_id,text,33
--- COMPOSITE TYPE ---,public,gmb_reviews,google_my_business_name,text,34
--- COMPOSITE TYPE ---,public,gmb_reviews,review_url,text,35
--- COMPOSITE TYPE ---,public,gmb_reviews,reviewer_display_name,text,36
--- COMPOSITE TYPE ---,public,gmb_reviews,is_verified_purchase,boolean,37
--- COMPOSITE TYPE ---,public,gmb_reviews,response,text,38
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_sentiment_score,"numeric(3,2)",39
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_reply_generated,boolean,40
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_confidence_score,"numeric(3,2)",41
--- COMPOSITE TYPE ---,public,gmb_reviews,response_priority,text,42
--- COMPOSITE TYPE ---,public,gmb_reviews,internal_notes,text,43
--- COMPOSITE TYPE ---,public,gmb_reviews,flagged_reason,text,44
--- COMPOSITE TYPE ---,public,gmb_reviews,tags,text[],45
--- COMPOSITE TYPE ---,public,gmb_reviews,synced_at,timestamp with time zone,46
--- COMPOSITE TYPE ---,public,gmb_reviews,is_archived,boolean,47
--- COMPOSITE TYPE ---,public,gmb_reviews,archived_at,timestamp with time zone,48
--- COMPOSITE TYPE ---,public,gmb_reviews,is_anonymized,boolean,49
--- COMPOSITE TYPE ---,public,gmb_reviews,metadata,jsonb,50
--- COMPOSITE TYPE ---,public,gmb_reviews,ai_sentiment_analysis,jsonb,51
--- COMPOSITE TYPE ---,public,gmb_search_keywords,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_search_keywords,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_search_keywords,location_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_search_keywords,user_id,uuid,4
--- COMPOSITE TYPE ---,public,gmb_search_keywords,search_keyword,text,5
--- COMPOSITE TYPE ---,public,gmb_search_keywords,month_year,date,6
--- COMPOSITE TYPE ---,public,gmb_search_keywords,impressions_count,bigint,7
--- COMPOSITE TYPE ---,public,gmb_search_keywords,threshold_value,bigint,8
--- COMPOSITE TYPE ---,public,gmb_search_keywords,metadata,jsonb,9
--- COMPOSITE TYPE ---,public,gmb_search_keywords,synced_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,gmb_search_keywords,created_at,timestamp with time zone,11
--- COMPOSITE TYPE ---,public,gmb_search_keywords,updated_at,timestamp with time zone,12
--- COMPOSITE TYPE ---,public,gmb_sync_logs,id,uuid,1
--- COMPOSITE TYPE ---,public,gmb_sync_logs,gmb_account_id,uuid,2
--- COMPOSITE TYPE ---,public,gmb_sync_logs,user_id,uuid,3
--- COMPOSITE TYPE ---,public,gmb_sync_logs,phase,text,4
--- COMPOSITE TYPE ---,public,gmb_sync_logs,status,text,5
--- COMPOSITE TYPE ---,public,gmb_sync_logs,started_at,timestamp with time zone,6
--- COMPOSITE TYPE ---,public,gmb_sync_logs,ended_at,timestamp with time zone,7
--- COMPOSITE TYPE ---,public,gmb_sync_logs,duration_ms,integer,8
--- COMPOSITE TYPE ---,public,gmb_sync_logs,counts,jsonb,9
--- COMPOSITE TYPE ---,public,gmb_sync_logs,error,text,10
--- COMPOSITE TYPE ---,public,gmb_sync_logs,metadata,jsonb,11
--- COMPOSITE TYPE ---,public,gmb_sync_logs,created_at,timestamp with time zone,12
--- COMPOSITE TYPE ---,public,mv_location_stats,id,uuid,1
--- COMPOSITE TYPE ---,public,mv_location_stats,user_id,uuid,2
--- COMPOSITE TYPE ---,public,mv_location_stats,location_name,text,3
--- COMPOSITE TYPE ---,public,mv_location_stats,total_reviews,bigint,4
--- COMPOSITE TYPE ---,public,mv_location_stats,avg_rating,numeric,5
--- COMPOSITE TYPE ---,public,mv_location_stats,total_questions,bigint,6
--- COMPOSITE TYPE ---,public,mv_location_stats,replied_reviews,bigint,7
--- COMPOSITE TYPE ---,public,mv_location_stats,answered_questions,bigint,8
--- COMPOSITE TYPE ---,public,mv_location_stats,last_review_date,timestamp with time zone,9
--- COMPOSITE TYPE ---,public,mv_location_stats,last_question_date,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,notification_stats,user_id,uuid,1
--- COMPOSITE TYPE ---,public,notification_stats,unread_count,bigint,2
--- COMPOSITE TYPE ---,public,notification_stats,read_count,bigint,3
--- COMPOSITE TYPE ---,public,notification_stats,new_reviews_count,bigint,4
--- COMPOSITE TYPE ---,public,notification_stats,new_questions_count,bigint,5
--- COMPOSITE TYPE ---,public,notification_stats,new_media_count,bigint,6
--- COMPOSITE TYPE ---,public,notification_stats,latest_unread_at,timestamp with time zone,7
--- COMPOSITE TYPE ---,public,notifications,id,uuid,1
--- COMPOSITE TYPE ---,public,notifications,user_id,uuid,2
--- COMPOSITE TYPE ---,public,notifications,type,text,3
--- COMPOSITE TYPE ---,public,notifications,title,text,4
--- COMPOSITE TYPE ---,public,notifications,message,text,5
--- COMPOSITE TYPE ---,public,notifications,link,text,6
--- COMPOSITE TYPE ---,public,notifications,read,boolean,7
--- COMPOSITE TYPE ---,public,notifications,metadata,jsonb,8
--- COMPOSITE TYPE ---,public,notifications,created_at,timestamp with time zone,9
--- COMPOSITE TYPE ---,public,notifications,updated_at,timestamp with time zone,10
--- COMPOSITE TYPE ---,public,notifications,notification_type,text,11
--- COMPOSITE TYPE ---,public,notifications,location_id,uuid,12
--- COMPOSITE TYPE ---,public,notifications,location_name,text,13
--- COMPOSITE TYPE ---,public,notifications,review_name,text,14
--- COMPOSITE TYPE ---,public,notifications,question_name,text,15
--- COMPOSITE TYPE ---,public,notifications,answer_name,text,16
--- COMPOSITE TYPE ---,public,notifications,media_name,text,17
--- COMPOSITE TYPE ---,public,notifications,raw_data,jsonb,18
--- COMPOSITE TYPE ---,public,oauth_states,id,uuid,1
--- COMPOSITE TYPE ---,public,oauth_states,state,text,2
--- COMPOSITE TYPE ---,public,oauth_states,user_id,uuid,3
--- COMPOSITE TYPE ---,public,oauth_states,expires_at,timestamp with time zone,4
--- COMPOSITE TYPE ---,public,oauth_states,used,boolean,5
--- COMPOSITE TYPE ---,public,oauth_states,created_at,timestamp with time zone,6
--- COMPOSITE TYPE ---,public,performance_metrics,id,uuid,1
--- COMPOSITE TYPE ---,public,performance_metrics,name,text,2
--- COMPOSITE TYPE ---,public,performance_metrics,value,numeric,3
--- COMPOSITE TYPE ---,public,performance_metrics,unit,text,4
--- COMPOSITE TYPE ---,public,performance_metrics,timestamp,timestamp with time zone,5
--- COMPOSITE TYPE ---,public,performance_metrics,user_id,uuid,6
--- COMPOSITE TYPE ---,public,performance_metrics,metadata,jsonb,7
--- COMPOSITE TYPE ---,public,profiles,id,uuid,1
--- COMPOSITE TYPE ---,public,profiles,email,text,2
--- COMPOSITE TYPE ---,public,profiles,full_name,text,3
--- COMPOSITE TYPE ---,public,profiles,avatar_url,text,4
--- COMPOSITE TYPE ---,public,profiles,created_at,timestamp with time zone,5
--- COMPOSITE TYPE ---,public,profiles,updated_at,timestamp with time zone,6
--- COMPOSITE TYPE ---,public,profiles,user_id,uuid,7
--- COMPOSITE TYPE ---,public,profiles,provider_sub,text,8
--- COMPOSITE TYPE ---,public,profiles,last_login,timestamp with time zone,9
--- COMPOSITE TYPE ---,public,profiles,phone,text,10
--- COMPOSITE TYPE ---,public,rate_limit_requests,id,uuid,1
--- COMPOSITE TYPE ---,public,rate_limit_requests,user_id,uuid,2
--- COMPOSITE TYPE ---,public,rate_limit_requests,action,text,3
--- COMPOSITE TYPE ---,public,rate_limit_requests,created_at,timestamp with time zone,4
--- COMPOSITE TYPE ---,public,rate_limit_requests,endpoint,text,5
--- COMPOSITE TYPE ---,public,rate_limit_requests,ip_address,inet,6
--- COMPOSITE TYPE ---,public,rate_limit_requests,user_agent,text,7
--- COMPOSITE TYPE ---,public,review_stats_view,user_id,uuid,1
--- COMPOSITE TYPE ---,public,review_stats_view,total_reviews,bigint,2
--- COMPOSITE TYPE ---,public,review_stats_view,pending_reviews,bigint,3
--- COMPOSITE TYPE ---,public,review_stats_view,responded_reviews,bigint,4
--- COMPOSITE TYPE ---,public,review_stats_view,response_rate,numeric,5
--- COMPOSITE TYPE ---,public,review_stats_view,avg_rating,numeric,6
--- COMPOSITE TYPE ---,public,review_stats_view,positive_count,bigint,7
--- COMPOSITE TYPE ---,public,review_stats_view,neutral_count,bigint,8
--- COMPOSITE TYPE ---,public,review_stats_view,negative_count,bigint,9
--- COMPOSITE TYPE ---,public,sync_status,id,uuid,1
--- COMPOSITE TYPE ---,public,sync_status,user_id,uuid,2
--- COMPOSITE TYPE ---,public,sync_status,account_id,uuid,3
--- COMPOSITE TYPE ---,public,sync_status,status,text,4
--- COMPOSITE TYPE ---,public,sync_status,progress,integer,5
--- COMPOSITE TYPE ---,public,sync_status,started_at,timestamp with time zone,6
--- COMPOSITE TYPE ---,public,sync_status,finished_at,timestamp with time zone,7
--- COMPOSITE TYPE ---,public,sync_status,meta,jsonb,8
--- COMPOSITE TYPE ---,public,v_dashboard_stats,user_id,uuid,1
--- COMPOSITE TYPE ---,public,v_dashboard_stats,total_locations,bigint,2
--- COMPOSITE TYPE ---,public,v_dashboard_stats,total_reviews,bigint,3
--- COMPOSITE TYPE ---,public,v_dashboard_stats,avg_rating,numeric,4
--- COMPOSITE TYPE ---,public,v_dashboard_stats,pending_reviews,bigint,5
--- COMPOSITE TYPE ---,public,v_dashboard_stats,replied_reviews,bigint,6
--- COMPOSITE TYPE ---,public,v_dashboard_stats,pending_questions,bigint,7
--- COMPOSITE TYPE ---,public,v_dashboard_stats,recent_reviews,bigint,8
--- COMPOSITE TYPE ---,public,v_dashboard_stats,avg_response_rate,numeric,9
--- COMPOSITE TYPE ---,public,v_dashboard_stats,calculated_response_rate,numeric,10
--- COMPOSITE TYPE ---,public,v_error_summary,user_id,uuid,1
--- COMPOSITE TYPE ---,public,v_error_summary,severity,integer,2
--- COMPOSITE TYPE ---,public,v_error_summary,error_count,bigint,3
--- COMPOSITE TYPE ---,public,v_error_summary,resolved_count,bigint,4
--- COMPOSITE TYPE ---,public,v_error_summary,last_error,timestamp with time zone,5
--- COMPOSITE TYPE ---,public,v_notification_summary,user_id,uuid,1
--- COMPOSITE TYPE ---,public,v_notification_summary,type,text,2
--- COMPOSITE TYPE ---,public,v_notification_summary,total_count,bigint,3
--- COMPOSITE TYPE ---,public,v_notification_summary,unread_count,bigint,4
--- COMPOSITE TYPE ---,public,v_notification_summary,last_notification,timestamp with time zone,5
--- COMPOSITE TYPE ---,public,v_performance_summary,user_id,uuid,1
--- COMPOSITE TYPE ---,public,v_performance_summary,name,text,2
--- COMPOSITE TYPE ---,public,v_performance_summary,measurement_count,bigint,3
--- COMPOSITE TYPE ---,public,v_performance_summary,avg_value,numeric,4
--- COMPOSITE TYPE ---,public,v_performance_summary,min_value,numeric,5
--- COMPOSITE TYPE ---,public,v_performance_summary,max_value,numeric,6
--- COMPOSITE TYPE ---,public,v_performance_summary,median_value,double precision,7
--- COMPOSITE TYPE ---,public,v_performance_summary,p95_value,double precision,8
--- COMPOSITE TYPE ---,public,v_performance_summary,last_measured,timestamp with time zone,9
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,id,uuid,1
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,user_id,uuid,2
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,week_start_date,date,3
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,week_end_date,date,4
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,tasks,jsonb,5
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,insights,text,6
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,created_at,timestamp with time zone,7
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,title,text,8
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,description,text,9
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,category,text,10
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,priority,text,11
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,effort_level,text,12
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,estimated_minutes,integer,13
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,status,text,14
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,reasoning,text,15
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,expected_impact,text,16
--- COMPOSITE TYPE ---,public,weekly_task_recommendations,updated_at,timestamp with time zone,17
separator,schema,table_name,table_size,indexes_size,total_size,estimated_rows
--- STORAGE ---,public,gmb_search_keywords,1688 kB,4600 kB,6288 kB,5351
--- STORAGE ---,public,gmb_reviews,3912 kB,1872 kB,5784 kB,677
--- STORAGE ---,public,gmb_media,1704 kB,2304 kB,4008 kB,953
--- STORAGE ---,public,gmb_locations,752 kB,2176 kB,2928 kB,4
--- STORAGE ---,public,business_profile_history,992 kB,64 kB,1056 kB,214
--- STORAGE ---,public,gmb_performance_metrics,232 kB,632 kB,864 kB,789
--- STORAGE ---,public,gmb_sync_logs,432 kB,192 kB,624 kB,1246
--- STORAGE ---,public,gmb_questions,88 kB,464 kB,552 kB,42
--- STORAGE ---,public,activity_logs,328 kB,176 kB,504 kB,1980
--- STORAGE ---,public,gmb_accounts,72 kB,240 kB,312 kB,4
--- STORAGE ---,public,audit_logs,136 kB,88 kB,224 kB,398
--- STORAGE ---,public,profiles,72 kB,96 kB,168 kB,4
--- STORAGE ---,public,oauth_states,64 kB,96 kB,160 kB,112
--- STORAGE ---,public,ai_requests,16 kB,112 kB,128 kB,-1
--- STORAGE ---,public,gmb_posts,8192 bytes,112 kB,120 kB,0
--- STORAGE ---,public,weekly_task_recommendations,16 kB,96 kB,112 kB,-1
--- STORAGE ---,public,sync_status,48 kB,64 kB,112 kB,46
--- STORAGE ---,public,ai_settings,16 kB,88 kB,104 kB,-1
--- STORAGE ---,public,gmb_metrics,48 kB,48 kB,96 kB,66
--- STORAGE ---,public,error_logs,8192 bytes,80 kB,88 kB,0
--- STORAGE ---,public,notifications,8192 bytes,56 kB,64 kB,-1
--- STORAGE ---,public,rate_limit_requests,8192 bytes,40 kB,48 kB,-1
--- STORAGE ---,public,auto_reply_settings,8192 bytes,32 kB,40 kB,-1
--- STORAGE ---,public,performance_metrics,8192 bytes,32 kB,40 kB,-1
separator,type,count
--- SUMMARY ---,Columns,462
--- SUMMARY ---,Enums,0
--- SUMMARY ---,Extensions,10
--- SUMMARY ---,Functions,96
--- SUMMARY ---,Indexes,253
--- SUMMARY ---,Policies,100
--- SUMMARY ---,Tables,24
--- SUMMARY ---,Triggers,23
--- SUMMARY ---,Views,7
